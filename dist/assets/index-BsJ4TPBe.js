var Bv=n=>{throw TypeError(n)};var lp=(n,e,t)=>e.has(n)||Bv("Cannot "+t);var N=(n,e,t)=>(lp(n,e,"read from private field"),t?t.call(n):e.get(n)),we=(n,e,t)=>e.has(n)?Bv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ue=(n,e,t,i)=>(lp(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),Pe=(n,e,t)=>(lp(n,e,"access private method"),t);var ah=(n,e,t,i)=>({set _(o){ue(n,e,o,t)},get _(){return N(n,e,i)}});function $S(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(i,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function mE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var up={exports:{}},Gl={},cp={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function qS(){if($v)return Oe;$v=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,U={};function P(F,G,ye){this.props=F,this.context=G,this.refs=U,this.updater=ye||R}P.prototype.isReactComponent={},P.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},P.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function W(){}W.prototype=P.prototype;function J(F,G,ye){this.props=F,this.context=G,this.refs=U,this.updater=ye||R}var ee=J.prototype=new W;ee.constructor=J,j(ee,P.prototype),ee.isPureReactComponent=!0;var te=Array.isArray,oe=Object.prototype.hasOwnProperty,ae={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function S(F,G,ye){var ke,Ne={},Le=null,Be=null;if(G!=null)for(ke in G.ref!==void 0&&(Be=G.ref),G.key!==void 0&&(Le=""+G.key),G)oe.call(G,ke)&&!D.hasOwnProperty(ke)&&(Ne[ke]=G[ke]);var $e=arguments.length-2;if($e===1)Ne.children=ye;else if(1<$e){for(var Ge=Array($e),At=0;At<$e;At++)Ge[At]=arguments[At+2];Ne.children=Ge}if(F&&F.defaultProps)for(ke in $e=F.defaultProps,$e)Ne[ke]===void 0&&(Ne[ke]=$e[ke]);return{$$typeof:n,type:F,key:Le,ref:Be,props:Ne,_owner:ae.current}}function A(F,G){return{$$typeof:n,type:F.type,key:G,ref:F.ref,props:F.props,_owner:F._owner}}function x(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function V(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ye){return G[ye]})}var L=/\/+/g;function k(F,G){return typeof F=="object"&&F!==null&&F.key!=null?V(""+F.key):G.toString(36)}function lt(F,G,ye,ke,Ne){var Le=typeof F;(Le==="undefined"||Le==="boolean")&&(F=null);var Be=!1;if(F===null)Be=!0;else switch(Le){case"string":case"number":Be=!0;break;case"object":switch(F.$$typeof){case n:case e:Be=!0}}if(Be)return Be=F,Ne=Ne(Be),F=ke===""?"."+k(Be,0):ke,te(Ne)?(ye="",F!=null&&(ye=F.replace(L,"$&/")+"/"),lt(Ne,G,ye,"",function(At){return At})):Ne!=null&&(x(Ne)&&(Ne=A(Ne,ye+(!Ne.key||Be&&Be.key===Ne.key?"":(""+Ne.key).replace(L,"$&/")+"/")+F)),G.push(Ne)),1;if(Be=0,ke=ke===""?".":ke+":",te(F))for(var $e=0;$e<F.length;$e++){Le=F[$e];var Ge=ke+k(Le,$e);Be+=lt(Le,G,ye,Ge,Ne)}else if(Ge=T(F),typeof Ge=="function")for(F=Ge.call(F),$e=0;!(Le=F.next()).done;)Le=Le.value,Ge=ke+k(Le,$e++),Be+=lt(Le,G,ye,Ge,Ne);else if(Le==="object")throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Be}function jt(F,G,ye){if(F==null)return F;var ke=[],Ne=0;return lt(F,ke,"","",function(Le){return G.call(ye,Le,Ne++)}),ke}function zt(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(ye){(F._status===0||F._status===-1)&&(F._status=1,F._result=ye)},function(ye){(F._status===0||F._status===-1)&&(F._status=2,F._result=ye)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var Ke={current:null},se={transition:null},_e={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:se,ReactCurrentOwner:ae};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:jt,forEach:function(F,G,ye){jt(F,function(){G.apply(this,arguments)},ye)},count:function(F){var G=0;return jt(F,function(){G++}),G},toArray:function(F){return jt(F,function(G){return G})||[]},only:function(F){if(!x(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Oe.Component=P,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=J,Oe.StrictMode=i,Oe.Suspense=p,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Oe.act=ce,Oe.cloneElement=function(F,G,ye){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ke=j({},F.props),Ne=F.key,Le=F.ref,Be=F._owner;if(G!=null){if(G.ref!==void 0&&(Le=G.ref,Be=ae.current),G.key!==void 0&&(Ne=""+G.key),F.type&&F.type.defaultProps)var $e=F.type.defaultProps;for(Ge in G)oe.call(G,Ge)&&!D.hasOwnProperty(Ge)&&(ke[Ge]=G[Ge]===void 0&&$e!==void 0?$e[Ge]:G[Ge])}var Ge=arguments.length-2;if(Ge===1)ke.children=ye;else if(1<Ge){$e=Array(Ge);for(var At=0;At<Ge;At++)$e[At]=arguments[At+2];ke.children=$e}return{$$typeof:n,type:F.type,key:Ne,ref:Le,props:ke,_owner:Be}},Oe.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},Oe.createElement=S,Oe.createFactory=function(F){var G=S.bind(null,F);return G.type=F,G},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(F){return{$$typeof:d,render:F}},Oe.isValidElement=x,Oe.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:zt}},Oe.memo=function(F,G){return{$$typeof:y,type:F,compare:G===void 0?null:G}},Oe.startTransition=function(F){var G=se.transition;se.transition={};try{F()}finally{se.transition=G}},Oe.unstable_act=ce,Oe.useCallback=function(F,G){return Ke.current.useCallback(F,G)},Oe.useContext=function(F){return Ke.current.useContext(F)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(F){return Ke.current.useDeferredValue(F)},Oe.useEffect=function(F,G){return Ke.current.useEffect(F,G)},Oe.useId=function(){return Ke.current.useId()},Oe.useImperativeHandle=function(F,G,ye){return Ke.current.useImperativeHandle(F,G,ye)},Oe.useInsertionEffect=function(F,G){return Ke.current.useInsertionEffect(F,G)},Oe.useLayoutEffect=function(F,G){return Ke.current.useLayoutEffect(F,G)},Oe.useMemo=function(F,G){return Ke.current.useMemo(F,G)},Oe.useReducer=function(F,G,ye){return Ke.current.useReducer(F,G,ye)},Oe.useRef=function(F){return Ke.current.useRef(F)},Oe.useState=function(F){return Ke.current.useState(F)},Oe.useSyncExternalStore=function(F,G,ye){return Ke.current.useSyncExternalStore(F,G,ye)},Oe.useTransition=function(){return Ke.current.useTransition()},Oe.version="18.3.1",Oe}var qv;function td(){return qv||(qv=1,cp.exports=qS()),cp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function HS(){if(Hv)return Gl;Hv=1;var n=td(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,y){var _,w={},T=null,R=null;y!==void 0&&(T=""+y),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(R=p.ref);for(_ in p)i.call(p,_)&&!a.hasOwnProperty(_)&&(w[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)w[_]===void 0&&(w[_]=p[_]);return{$$typeof:e,type:d,key:T,ref:R,props:w,_owner:o.current}}return Gl.Fragment=t,Gl.jsx=c,Gl.jsxs=c,Gl}var Wv;function WS(){return Wv||(Wv=1,up.exports=HS()),up.exports}var b=WS(),Y=td();const gE=mE(Y),KS=$S({__proto__:null,default:gE},[Y]);var lh={},hp={exports:{}},fn={},dp={exports:{}},fp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function QS(){return Kv||(Kv=1,function(n){function e(se,_e){var ce=se.length;se.push(_e);e:for(;0<ce;){var F=ce-1>>>1,G=se[F];if(0<o(G,_e))se[F]=_e,se[ce]=G,ce=F;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var _e=se[0],ce=se.pop();if(ce!==_e){se[0]=ce;e:for(var F=0,G=se.length,ye=G>>>1;F<ye;){var ke=2*(F+1)-1,Ne=se[ke],Le=ke+1,Be=se[Le];if(0>o(Ne,ce))Le<G&&0>o(Be,Ne)?(se[F]=Be,se[Le]=ce,F=Le):(se[F]=Ne,se[ke]=ce,F=ke);else if(Le<G&&0>o(Be,ce))se[F]=Be,se[Le]=ce,F=Le;else break e}}return _e}function o(se,_e){var ce=se.sortIndex-_e.sortIndex;return ce!==0?ce:se.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],y=[],_=1,w=null,T=3,R=!1,j=!1,U=!1,P=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(se){for(var _e=t(y);_e!==null;){if(_e.callback===null)i(y);else if(_e.startTime<=se)i(y),_e.sortIndex=_e.expirationTime,e(p,_e);else break;_e=t(y)}}function te(se){if(U=!1,ee(se),!j)if(t(p)!==null)j=!0,zt(oe);else{var _e=t(y);_e!==null&&Ke(te,_e.startTime-se)}}function oe(se,_e){j=!1,U&&(U=!1,W(S),S=-1),R=!0;var ce=T;try{for(ee(_e),w=t(p);w!==null&&(!(w.expirationTime>_e)||se&&!V());){var F=w.callback;if(typeof F=="function"){w.callback=null,T=w.priorityLevel;var G=F(w.expirationTime<=_e);_e=n.unstable_now(),typeof G=="function"?w.callback=G:w===t(p)&&i(p),ee(_e)}else i(p);w=t(p)}if(w!==null)var ye=!0;else{var ke=t(y);ke!==null&&Ke(te,ke.startTime-_e),ye=!1}return ye}finally{w=null,T=ce,R=!1}}var ae=!1,D=null,S=-1,A=5,x=-1;function V(){return!(n.unstable_now()-x<A)}function L(){if(D!==null){var se=n.unstable_now();x=se;var _e=!0;try{_e=D(!0,se)}finally{_e?k():(ae=!1,D=null)}}else ae=!1}var k;if(typeof J=="function")k=function(){J(L)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,jt=lt.port2;lt.port1.onmessage=L,k=function(){jt.postMessage(null)}}else k=function(){P(L,0)};function zt(se){D=se,ae||(ae=!0,k())}function Ke(se,_e){S=P(function(){se(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){j||R||(j=!0,zt(oe))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(se){switch(T){case 1:case 2:case 3:var _e=3;break;default:_e=T}var ce=T;T=_e;try{return se()}finally{T=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,_e){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ce=T;T=se;try{return _e()}finally{T=ce}},n.unstable_scheduleCallback=function(se,_e,ce){var F=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?F+ce:F):ce=F,se){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ce+G,se={id:_++,callback:_e,priorityLevel:se,startTime:ce,expirationTime:G,sortIndex:-1},ce>F?(se.sortIndex=ce,e(y,se),t(p)===null&&se===t(y)&&(U?(W(S),S=-1):U=!0,Ke(te,ce-F))):(se.sortIndex=G,e(p,se),j||R||(j=!0,zt(oe))),se},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(se){var _e=T;return function(){var ce=T;T=_e;try{return se.apply(this,arguments)}finally{T=ce}}}}(fp)),fp}var Qv;function GS(){return Qv||(Qv=1,dp.exports=QS()),dp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function YS(){if(Gv)return fn;Gv=1;var n=td(),e=GS();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function T(r){return p.call(w,r)?!0:p.call(_,r)?!1:y.test(r)?w[r]=!0:(_[r]=!0,!1)}function R(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,s,l,h){if(s===null||typeof s>"u"||R(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function U(r,s,l,h,f,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){P[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];P[s]=new U(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){P[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){P[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){P[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){P[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){P[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){P[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){P[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function J(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(W,J);P[s]=new U(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(W,J);P[s]=new U(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(W,J);P[s]=new U(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){P[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),P.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){P[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function ee(r,s,l,h){var f=P.hasOwnProperty(s)?P[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j(s,l,f,h)&&(l=null),h||f===null?T(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),ae=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),V=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),lt=Symbol.for("react.suspense_list"),jt=Symbol.for("react.memo"),zt=Symbol.for("react.lazy"),Ke=Symbol.for("react.offscreen"),se=Symbol.iterator;function _e(r){return r===null||typeof r!="object"?null:(r=se&&r[se]||r["@@iterator"],typeof r=="function"?r:null)}var ce=Object.assign,F;function G(r){if(F===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);F=s&&s[1]||""}return`
`+F+r}var ye=!1;function ke(r,s){if(!r||ye)return"";ye=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var h=q}Reflect.construct(r,[],s)}else{try{s.call()}catch(q){h=q}r.call(s.prototype)}else{try{throw Error()}catch(q){h=q}r()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),g=h.stack.split(`
`),E=f.length-1,C=g.length-1;1<=E&&0<=C&&f[E]!==g[C];)C--;for(;1<=E&&0<=C;E--,C--)if(f[E]!==g[C]){if(E!==1||C!==1)do if(E--,C--,0>C||f[E]!==g[C]){var O=`
`+f[E].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=E&&0<=C);break}}}finally{ye=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?G(r):""}function Ne(r){switch(r.tag){case 5:return G(r.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return r=ke(r.type,!1),r;case 11:return r=ke(r.type.render,!1),r;case 1:return r=ke(r.type,!0),r;default:return""}}function Le(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case ae:return"Portal";case A:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case lt:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case x:return(r._context.displayName||"Context")+".Provider";case L:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case jt:return s=r.displayName||null,s!==null?s:Le(r.type)||"Memo";case zt:s=r._payload,r=r._init;try{return Le(r(s))}catch{}}return null}function Be(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function $e(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ge(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function At(r){var s=Ge(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){h=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Dr(r){r._valueTracker||(r._valueTracker=At(r))}function Eo(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=Ge(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function di(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function vs(r,s){var l=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function To(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=$e(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function tl(r,s){s=s.checked,s!=null&&ee(r,"checked",s,!1)}function nl(r,s){tl(r,s);var l=$e(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Io(r,s.type,l):s.hasOwnProperty("defaultValue")&&Io(r,s.type,$e(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Wu(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Io(r,s,l){(s!=="number"||di(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var br=Array.isArray;function Vr(r,s,l,h){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+$e(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function rl(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function So(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(br(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:$e(l)}}function Co(r,s){var l=$e(s.value),h=$e(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function il(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function yt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?yt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Mr,sl=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,f)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Mr=Mr||document.createElement("div"),Mr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Mr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function fi(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var _s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ws=["Webkit","ms","Moz","O"];Object.keys(_s).forEach(function(r){ws.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),_s[s]=_s[r]})});function ol(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||_s.hasOwnProperty(r)&&_s[r]?(""+s).trim():s+"px"}function al(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=ol(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var ll=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ul(r,s){if(s){if(ll[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function cl(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Es=null;function Ao(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ro=null,kn=null,dr=null;function Po(r){if(r=bl(r)){if(typeof Ro!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Tc(s),Ro(r.stateNode,r.type,s))}}function fr(r){kn?dr?dr.push(r):dr=[r]:kn=r}function hl(){if(kn){var r=kn,s=dr;if(dr=kn=null,Po(r),s)for(r=0;r<s.length;r++)Po(s[r])}}function Ts(r,s){return r(s)}function dl(){}var Lr=!1;function fl(r,s,l){if(Lr)return r(s,l);Lr=!0;try{return Ts(r,s,l)}finally{Lr=!1,(kn!==null||dr!==null)&&(dl(),hl())}}function ut(r,s){var l=r.stateNode;if(l===null)return null;var h=Tc(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var ko=!1;if(d)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){ko=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{ko=!1}function Is(r,s,l,h,f,g,E,C,O){var q=Array.prototype.slice.call(arguments,3);try{s.apply(l,q)}catch(Z){this.onError(Z)}}var Ss=!1,xo=null,$n=!1,pl=null,Vd={onError:function(r){Ss=!0,xo=r}};function No(r,s,l,h,f,g,E,C,O){Ss=!1,xo=null,Is.apply(Vd,arguments)}function Ku(r,s,l,h,f,g,E,C,O){if(No.apply(this,arguments),Ss){if(Ss){var q=xo;Ss=!1,xo=null}else throw Error(t(198));$n||($n=!0,pl=q)}}function qn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Cs(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Hn(r){if(qn(r)!==r)throw Error(t(188))}function Qu(r){var s=r.alternate;if(!s){if(s=qn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return Hn(f),r;if(g===h)return Hn(f),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=g;else{for(var E=!1,C=f.child;C;){if(C===l){E=!0,l=f,h=g;break}if(C===h){E=!0,h=f,l=g;break}C=C.sibling}if(!E){for(C=g.child;C;){if(C===l){E=!0,l=g,h=f;break}if(C===h){E=!0,h=g,l=f;break}C=C.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function ml(r){return r=Qu(r),r!==null?Oo(r):null}function Oo(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Oo(r);if(s!==null)return s;r=r.sibling}return null}var Do=e.unstable_scheduleCallback,gl=e.unstable_cancelCallback,Gu=e.unstable_shouldYield,Md=e.unstable_requestPaint,Ye=e.unstable_now,Yu=e.unstable_getCurrentPriorityLevel,As=e.unstable_ImmediatePriority,pi=e.unstable_UserBlockingPriority,xn=e.unstable_NormalPriority,yl=e.unstable_LowPriority,Xu=e.unstable_IdlePriority,Rs=null,vn=null;function Ju(r){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Rs,r,void 0,(r.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:ec,vl=Math.log,Zu=Math.LN2;function ec(r){return r>>>=0,r===0?32:31-(vl(r)/Zu|0)|0}var bo=64,Vo=4194304;function mi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ps(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,E=l&268435455;if(E!==0){var C=E&~f;C!==0?h=mi(C):(g&=E,g!==0&&(h=mi(g)))}else E=l&~f,E!==0?h=mi(E):g!==0&&(h=mi(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-Xt(s),f=1<<l,h|=r[l],s&=~f;return h}function Ld(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-Xt(g),C=1<<E,O=f[E];O===-1?((C&l)===0||(C&h)!==0)&&(f[E]=Ld(C,s)):O<=s&&(r.expiredLanes|=C),g&=~C}}function _n(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ks(){var r=bo;return bo<<=1,(bo&4194240)===0&&(bo=64),r}function gi(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function yi(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Xt(s),r[s]=l}function Qe(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Xt(l),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,l&=~g}}function vi(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-Xt(l),f=1<<h;f&s|r[h]&s&&(r[h]|=s),l&=~f}}var Ve=0;function _i(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var tc,Mo,nc,rc,ic,_l=!1,pr=[],Ot=null,Wn=null,Kn=null,wi=new Map,Nn=new Map,mr=[],Fd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(r,s){switch(r){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":wi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nn.delete(s.pointerId)}}function on(r,s,l,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=bl(s),s!==null&&Mo(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Ud(r,s,l,h,f){switch(s){case"focusin":return Ot=on(Ot,r,s,l,h,f),!0;case"dragenter":return Wn=on(Wn,r,s,l,h,f),!0;case"mouseover":return Kn=on(Kn,r,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return wi.set(g,on(wi.get(g)||null,r,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,Nn.set(g,on(Nn.get(g)||null,r,s,l,h,f)),!0}return!1}function oc(r){var s=bs(r.target);if(s!==null){var l=qn(s);if(l!==null){if(s=l.tag,s===13){if(s=Cs(l),s!==null){r.blockedOn=s,ic(r.priority,function(){nc(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ur(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Lo(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Es=h,l.target.dispatchEvent(h),Es=null}else return s=bl(l),s!==null&&Mo(s),r.blockedOn=l,!1;s.shift()}return!0}function xs(r,s,l){Ur(r)&&l.delete(s)}function ac(){_l=!1,Ot!==null&&Ur(Ot)&&(Ot=null),Wn!==null&&Ur(Wn)&&(Wn=null),Kn!==null&&Ur(Kn)&&(Kn=null),wi.forEach(xs),Nn.forEach(xs)}function Qn(r,s){r.blockedOn===s&&(r.blockedOn=null,_l||(_l=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ac)))}function Gn(r){function s(f){return Qn(f,r)}if(0<pr.length){Qn(pr[0],r);for(var l=1;l<pr.length;l++){var h=pr[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Ot!==null&&Qn(Ot,r),Wn!==null&&Qn(Wn,r),Kn!==null&&Qn(Kn,r),wi.forEach(s),Nn.forEach(s),l=0;l<mr.length;l++)h=mr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<mr.length&&(l=mr[0],l.blockedOn===null);)oc(l),l.blockedOn===null&&mr.shift()}var jr=te.ReactCurrentBatchConfig,Ei=!0;function tt(r,s,l,h){var f=Ve,g=jr.transition;jr.transition=null;try{Ve=1,wl(r,s,l,h)}finally{Ve=f,jr.transition=g}}function jd(r,s,l,h){var f=Ve,g=jr.transition;jr.transition=null;try{Ve=4,wl(r,s,l,h)}finally{Ve=f,jr.transition=g}}function wl(r,s,l,h){if(Ei){var f=Lo(r,s,l,h);if(f===null)Xd(r,s,h,Ns,l),sc(r,h);else if(Ud(f,r,s,l,h))h.stopPropagation();else if(sc(r,h),s&4&&-1<Fd.indexOf(r)){for(;f!==null;){var g=bl(f);if(g!==null&&tc(g),g=Lo(r,s,l,h),g===null&&Xd(r,s,h,Ns,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else Xd(r,s,h,null,l)}}var Ns=null;function Lo(r,s,l,h){if(Ns=null,r=Ao(h),r=bs(r),r!==null)if(s=qn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Cs(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ns=r,null}function El(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yu()){case As:return 1;case pi:return 4;case xn:case yl:return 16;case Xu:return 536870912;default:return 16}default:return 16}}var wn=null,Fo=null,an=null;function Tl(){if(an)return an;var r,s=Fo,l=s.length,h,f="value"in wn?wn.value:wn.textContent,g=f.length;for(r=0;r<l&&s[r]===f[r];r++);var E=l-r;for(h=1;h<=E&&s[l-h]===f[g-h];h++);return an=f.slice(r,1<h?1-h:void 0)}function Uo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function gr(){return!0}function Il(){return!1}function Dt(r){function s(l,h,f,g,E){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?gr:Il,this.isPropagationStopped=Il,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),s}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=Dt(Yn),yr=ce({},Yn,{view:0,detail:0}),zd=Dt(yr),zo,zr,Ti,Os=ce({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ti&&(Ti&&r.type==="mousemove"?(zo=r.screenX-Ti.screenX,zr=r.screenY-Ti.screenY):zr=zo=0,Ti=r),zo)},movementY:function(r){return"movementY"in r?r.movementY:zr}}),Bo=Dt(Os),Sl=ce({},Os,{dataTransfer:0}),lc=Dt(Sl),$o=ce({},yr,{relatedTarget:0}),qo=Dt($o),uc=ce({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Br=Dt(uc),cc=ce({},Yn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),hc=Dt(cc),dc=ce({},Yn,{data:0}),Cl=Dt(dc),Ho={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=fc[r])?!!s[r]:!1}function vr(){return pc}var u=ce({},yr,{key:function(r){if(r.key){var s=Ho[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Uo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(r){return r.type==="keypress"?Uo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Uo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Dt(u),v=ce({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Dt(v),z=ce({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),H=Dt(z),ie=ce({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Dt(ie),_t=ce({},Os,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Dt(_t),Rt=[9,13,27,32],dt=d&&"CompositionEvent"in window,On=null;d&&"documentMode"in document&&(On=document.documentMode);var En=d&&"TextEvent"in window&&!On,Ds=d&&(!dt||On&&8<On&&11>=On),Wo=" ",Mg=!1;function Lg(r,s){switch(r){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ko=!1;function jI(r,s){switch(r){case"compositionend":return Fg(s);case"keypress":return s.which!==32?null:(Mg=!0,Wo);case"textInput":return r=s.data,r===Wo&&Mg?null:r;default:return null}}function zI(r,s){if(Ko)return r==="compositionend"||!dt&&Lg(r,s)?(r=Tl(),an=Fo=wn=null,Ko=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ds&&s.locale!=="ko"?null:s.data;default:return null}}var BI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!BI[r.type]:s==="textarea"}function jg(r,s,l,h){fr(h),s=_c(s,"onChange"),0<s.length&&(l=new jo("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var Al=null,Rl=null;function $I(r){iy(r,0)}function mc(r){var s=Jo(r);if(Eo(s))return r}function qI(r,s){if(r==="change")return s}var zg=!1;if(d){var Bd;if(d){var $d="oninput"in document;if(!$d){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),$d=typeof Bg.oninput=="function"}Bd=$d}else Bd=!1;zg=Bd&&(!document.documentMode||9<document.documentMode)}function $g(){Al&&(Al.detachEvent("onpropertychange",qg),Rl=Al=null)}function qg(r){if(r.propertyName==="value"&&mc(Rl)){var s=[];jg(s,Rl,r,Ao(r)),fl($I,s)}}function HI(r,s,l){r==="focusin"?($g(),Al=s,Rl=l,Al.attachEvent("onpropertychange",qg)):r==="focusout"&&$g()}function WI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return mc(Rl)}function KI(r,s){if(r==="click")return mc(s)}function QI(r,s){if(r==="input"||r==="change")return mc(s)}function GI(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Xn=typeof Object.is=="function"?Object.is:GI;function Pl(r,s){if(Xn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!Xn(r[f],s[f]))return!1}return!0}function Hg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Wg(r,s){var l=Hg(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hg(l)}}function Kg(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Kg(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Qg(){for(var r=window,s=di();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=di(r.document)}return s}function qd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function YI(r){var s=Qg(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Kg(l.ownerDocument.documentElement,l)){if(h!==null&&qd(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=Wg(l,g);var E=Wg(l,h);f&&E&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var XI=d&&"documentMode"in document&&11>=document.documentMode,Qo=null,Hd=null,kl=null,Wd=!1;function Gg(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wd||Qo==null||Qo!==di(h)||(h=Qo,"selectionStart"in h&&qd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),kl&&Pl(kl,h)||(kl=h,h=_c(Hd,"onSelect"),0<h.length&&(s=new jo("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=Qo)))}function gc(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Go={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},Kd={},Yg={};d&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function yc(r){if(Kd[r])return Kd[r];if(!Go[r])return r;var s=Go[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Yg)return Kd[r]=s[l];return r}var Xg=yc("animationend"),Jg=yc("animationiteration"),Zg=yc("animationstart"),ey=yc("transitionend"),ty=new Map,ny="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(r,s){ty.set(r,s),a(s,[r])}for(var Qd=0;Qd<ny.length;Qd++){var Gd=ny[Qd],JI=Gd.toLowerCase(),ZI=Gd[0].toUpperCase()+Gd.slice(1);Ii(JI,"on"+ZI)}Ii(Xg,"onAnimationEnd"),Ii(Jg,"onAnimationIteration"),Ii(Zg,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(ey,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eS=new Set("cancel close invalid load scroll toggle".split(" ").concat(xl));function ry(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Ku(h,s,void 0,r),r.currentTarget=null}function iy(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var E=h.length-1;0<=E;E--){var C=h[E],O=C.instance,q=C.currentTarget;if(C=C.listener,O!==g&&f.isPropagationStopped())break e;ry(f,C,q),g=O}else for(E=0;E<h.length;E++){if(C=h[E],O=C.instance,q=C.currentTarget,C=C.listener,O!==g&&f.isPropagationStopped())break e;ry(f,C,q),g=O}}}if($n)throw r=pl,$n=!1,pl=null,r}function Je(r,s){var l=s[rf];l===void 0&&(l=s[rf]=new Set);var h=r+"__bubble";l.has(h)||(sy(s,r,2,!1),l.add(h))}function Yd(r,s,l){var h=0;s&&(h|=4),sy(l,r,h,s)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Nl(r){if(!r[vc]){r[vc]=!0,i.forEach(function(l){l!=="selectionchange"&&(eS.has(l)||Yd(l,!1,r),Yd(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[vc]||(s[vc]=!0,Yd("selectionchange",!1,s))}}function sy(r,s,l,h){switch(El(s)){case 1:var f=tt;break;case 4:f=jd;break;default:f=wl}l=f.bind(null,s,l,r),f=void 0,!ko||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Xd(r,s,l,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var C=h.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(E===4)for(E=h.return;E!==null;){var O=E.tag;if((O===3||O===4)&&(O=E.stateNode.containerInfo,O===f||O.nodeType===8&&O.parentNode===f))return;E=E.return}for(;C!==null;){if(E=bs(C),E===null)return;if(O=E.tag,O===5||O===6){h=g=E;continue e}C=C.parentNode}}h=h.return}fl(function(){var q=g,Z=Ao(l),ne=[];e:{var X=ty.get(r);if(X!==void 0){var le=jo,pe=r;switch(r){case"keypress":if(Uo(l)===0)break e;case"keydown":case"keyup":le=m;break;case"focusin":pe="focus",le=qo;break;case"focusout":pe="blur",le=qo;break;case"beforeblur":case"afterblur":le=qo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=H;break;case Xg:case Jg:case Zg:le=Br;break;case ey:le=We;break;case"scroll":le=zd;break;case"wheel":le=Fe;break;case"copy":case"cut":case"paste":le=hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=I}var me=(s&4)!==0,ct=!me&&r==="scroll",B=me?X!==null?X+"Capture":null:X;me=[];for(var M=q,$;M!==null;){$=M;var re=$.stateNode;if($.tag===5&&re!==null&&($=re,B!==null&&(re=ut(M,B),re!=null&&me.push(Ol(M,re,$)))),ct)break;M=M.return}0<me.length&&(X=new le(X,pe,null,l,Z),ne.push({event:X,listeners:me}))}}if((s&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",X&&l!==Es&&(pe=l.relatedTarget||l.fromElement)&&(bs(pe)||pe[$r]))break e;if((le||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,le?(pe=l.relatedTarget||l.toElement,le=q,pe=pe?bs(pe):null,pe!==null&&(ct=qn(pe),pe!==ct||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(le=null,pe=q),le!==pe)){if(me=Bo,re="onMouseLeave",B="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(me=I,re="onPointerLeave",B="onPointerEnter",M="pointer"),ct=le==null?X:Jo(le),$=pe==null?X:Jo(pe),X=new me(re,M+"leave",le,l,Z),X.target=ct,X.relatedTarget=$,re=null,bs(Z)===q&&(me=new me(B,M+"enter",pe,l,Z),me.target=$,me.relatedTarget=ct,re=me),ct=re,le&&pe)t:{for(me=le,B=pe,M=0,$=me;$;$=Yo($))M++;for($=0,re=B;re;re=Yo(re))$++;for(;0<M-$;)me=Yo(me),M--;for(;0<$-M;)B=Yo(B),$--;for(;M--;){if(me===B||B!==null&&me===B.alternate)break t;me=Yo(me),B=Yo(B)}me=null}else me=null;le!==null&&oy(ne,X,le,me,!1),pe!==null&&ct!==null&&oy(ne,ct,pe,me,!0)}}e:{if(X=q?Jo(q):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var ge=qI;else if(Ug(X))if(zg)ge=QI;else{ge=WI;var Ee=HI}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(ge=KI);if(ge&&(ge=ge(r,q))){jg(ne,ge,l,Z);break e}Ee&&Ee(r,X,q),r==="focusout"&&(Ee=X._wrapperState)&&Ee.controlled&&X.type==="number"&&Io(X,"number",X.value)}switch(Ee=q?Jo(q):window,r){case"focusin":(Ug(Ee)||Ee.contentEditable==="true")&&(Qo=Ee,Hd=q,kl=null);break;case"focusout":kl=Hd=Qo=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,Gg(ne,l,Z);break;case"selectionchange":if(XI)break;case"keydown":case"keyup":Gg(ne,l,Z)}var Te;if(dt)e:{switch(r){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Ko?Lg(r,l)&&(Ce="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(Ds&&l.locale!=="ko"&&(Ko||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Ko&&(Te=Tl()):(wn=Z,Fo="value"in wn?wn.value:wn.textContent,Ko=!0)),Ee=_c(q,Ce),0<Ee.length&&(Ce=new Cl(Ce,r,null,l,Z),ne.push({event:Ce,listeners:Ee}),Te?Ce.data=Te:(Te=Fg(l),Te!==null&&(Ce.data=Te)))),(Te=En?jI(r,l):zI(r,l))&&(q=_c(q,"onBeforeInput"),0<q.length&&(Z=new Cl("onBeforeInput","beforeinput",null,l,Z),ne.push({event:Z,listeners:q}),Z.data=Te))}iy(ne,s)})}function Ol(r,s,l){return{instance:r,listener:s,currentTarget:l}}function _c(r,s){for(var l=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ut(r,l),g!=null&&h.unshift(Ol(r,g,f)),g=ut(r,s),g!=null&&h.push(Ol(r,g,f))),r=r.return}return h}function Yo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function oy(r,s,l,h,f){for(var g=s._reactName,E=[];l!==null&&l!==h;){var C=l,O=C.alternate,q=C.stateNode;if(O!==null&&O===h)break;C.tag===5&&q!==null&&(C=q,f?(O=ut(l,g),O!=null&&E.unshift(Ol(l,O,C))):f||(O=ut(l,g),O!=null&&E.push(Ol(l,O,C)))),l=l.return}E.length!==0&&r.push({event:s,listeners:E})}var tS=/\r\n?/g,nS=/\u0000|\uFFFD/g;function ay(r){return(typeof r=="string"?r:""+r).replace(tS,`
`).replace(nS,"")}function wc(r,s,l){if(s=ay(s),ay(r)!==s&&l)throw Error(t(425))}function Ec(){}var Jd=null,Zd=null;function ef(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var tf=typeof setTimeout=="function"?setTimeout:void 0,rS=typeof clearTimeout=="function"?clearTimeout:void 0,ly=typeof Promise=="function"?Promise:void 0,iS=typeof queueMicrotask=="function"?queueMicrotask:typeof ly<"u"?function(r){return ly.resolve(null).then(r).catch(sS)}:tf;function sS(r){setTimeout(function(){throw r})}function nf(r,s){var l=s,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),Gn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Gn(s)}function Si(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function uy(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),_r="__reactFiber$"+Xo,Dl="__reactProps$"+Xo,$r="__reactContainer$"+Xo,rf="__reactEvents$"+Xo,oS="__reactListeners$"+Xo,aS="__reactHandles$"+Xo;function bs(r){var s=r[_r];if(s)return s;for(var l=r.parentNode;l;){if(s=l[$r]||l[_r]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=uy(r);r!==null;){if(l=r[_r])return l;r=uy(r)}return s}r=l,l=r.parentNode}return null}function bl(r){return r=r[_r]||r[$r],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Jo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Tc(r){return r[Dl]||null}var sf=[],Zo=-1;function Ci(r){return{current:r}}function Ze(r){0>Zo||(r.current=sf[Zo],sf[Zo]=null,Zo--)}function Xe(r,s){Zo++,sf[Zo]=r.current,r.current=s}var Ai={},Bt=Ci(Ai),ln=Ci(!1),Vs=Ai;function ea(r,s){var l=r.type.contextTypes;if(!l)return Ai;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function un(r){return r=r.childContextTypes,r!=null}function Ic(){Ze(ln),Ze(Bt)}function cy(r,s,l){if(Bt.current!==Ai)throw Error(t(168));Xe(Bt,s),Xe(ln,l)}function hy(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Be(r)||"Unknown",f));return ce({},l,h)}function Sc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ai,Vs=Bt.current,Xe(Bt,r),Xe(ln,ln.current),!0}function dy(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=hy(r,s,Vs),h.__reactInternalMemoizedMergedChildContext=r,Ze(ln),Ze(Bt),Xe(Bt,r)):Ze(ln),Xe(ln,l)}var qr=null,Cc=!1,of=!1;function fy(r){qr===null?qr=[r]:qr.push(r)}function lS(r){Cc=!0,fy(r)}function Ri(){if(!of&&qr!==null){of=!0;var r=0,s=Ve;try{var l=qr;for(Ve=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}qr=null,Cc=!1}catch(f){throw qr!==null&&(qr=qr.slice(r+1)),Do(As,Ri),f}finally{Ve=s,of=!1}}return null}var ta=[],na=0,Ac=null,Rc=0,Dn=[],bn=0,Ms=null,Hr=1,Wr="";function Ls(r,s){ta[na++]=Rc,ta[na++]=Ac,Ac=r,Rc=s}function py(r,s,l){Dn[bn++]=Hr,Dn[bn++]=Wr,Dn[bn++]=Ms,Ms=r;var h=Hr;r=Wr;var f=32-Xt(h)-1;h&=~(1<<f),l+=1;var g=32-Xt(s)+f;if(30<g){var E=f-f%5;g=(h&(1<<E)-1).toString(32),h>>=E,f-=E,Hr=1<<32-Xt(s)+f|l<<f|h,Wr=g+r}else Hr=1<<g|l<<f|h,Wr=r}function af(r){r.return!==null&&(Ls(r,1),py(r,1,0))}function lf(r){for(;r===Ac;)Ac=ta[--na],ta[na]=null,Rc=ta[--na],ta[na]=null;for(;r===Ms;)Ms=Dn[--bn],Dn[bn]=null,Wr=Dn[--bn],Dn[bn]=null,Hr=Dn[--bn],Dn[bn]=null}var Tn=null,In=null,nt=!1,Jn=null;function my(r,s){var l=Fn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function gy(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Tn=r,In=Si(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Tn=r,In=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Ms!==null?{id:Hr,overflow:Wr}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Fn(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,Tn=r,In=null,!0):!1;default:return!1}}function uf(r){return(r.mode&1)!==0&&(r.flags&128)===0}function cf(r){if(nt){var s=In;if(s){var l=s;if(!gy(r,s)){if(uf(r))throw Error(t(418));s=Si(l.nextSibling);var h=Tn;s&&gy(r,s)?my(h,l):(r.flags=r.flags&-4097|2,nt=!1,Tn=r)}}else{if(uf(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,Tn=r}}}function yy(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Tn=r}function Pc(r){if(r!==Tn)return!1;if(!nt)return yy(r),nt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!ef(r.type,r.memoizedProps)),s&&(s=In)){if(uf(r))throw vy(),Error(t(418));for(;s;)my(r,s),s=Si(s.nextSibling)}if(yy(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){In=Si(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}In=null}}else In=Tn?Si(r.stateNode.nextSibling):null;return!0}function vy(){for(var r=In;r;)r=Si(r.nextSibling)}function ra(){In=Tn=null,nt=!1}function hf(r){Jn===null?Jn=[r]:Jn.push(r)}var uS=te.ReactCurrentBatchConfig;function Vl(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var C=f.refs;E===null?delete C[g]:C[g]=E},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function kc(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function _y(r){var s=r._init;return s(r._payload)}function wy(r){function s(B,M){if(r){var $=B.deletions;$===null?(B.deletions=[M],B.flags|=16):$.push(M)}}function l(B,M){if(!r)return null;for(;M!==null;)s(B,M),M=M.sibling;return null}function h(B,M){for(B=new Map;M!==null;)M.key!==null?B.set(M.key,M):B.set(M.index,M),M=M.sibling;return B}function f(B,M){return B=Vi(B,M),B.index=0,B.sibling=null,B}function g(B,M,$){return B.index=$,r?($=B.alternate,$!==null?($=$.index,$<M?(B.flags|=2,M):$):(B.flags|=2,M)):(B.flags|=1048576,M)}function E(B){return r&&B.alternate===null&&(B.flags|=2),B}function C(B,M,$,re){return M===null||M.tag!==6?(M=np($,B.mode,re),M.return=B,M):(M=f(M,$),M.return=B,M)}function O(B,M,$,re){var ge=$.type;return ge===D?Z(B,M,$.props.children,re,$.key):M!==null&&(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===zt&&_y(ge)===M.type)?(re=f(M,$.props),re.ref=Vl(B,M,$),re.return=B,re):(re=Zc($.type,$.key,$.props,null,B.mode,re),re.ref=Vl(B,M,$),re.return=B,re)}function q(B,M,$,re){return M===null||M.tag!==4||M.stateNode.containerInfo!==$.containerInfo||M.stateNode.implementation!==$.implementation?(M=rp($,B.mode,re),M.return=B,M):(M=f(M,$.children||[]),M.return=B,M)}function Z(B,M,$,re,ge){return M===null||M.tag!==7?(M=Hs($,B.mode,re,ge),M.return=B,M):(M=f(M,$),M.return=B,M)}function ne(B,M,$){if(typeof M=="string"&&M!==""||typeof M=="number")return M=np(""+M,B.mode,$),M.return=B,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case oe:return $=Zc(M.type,M.key,M.props,null,B.mode,$),$.ref=Vl(B,null,M),$.return=B,$;case ae:return M=rp(M,B.mode,$),M.return=B,M;case zt:var re=M._init;return ne(B,re(M._payload),$)}if(br(M)||_e(M))return M=Hs(M,B.mode,$,null),M.return=B,M;kc(B,M)}return null}function X(B,M,$,re){var ge=M!==null?M.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ge!==null?null:C(B,M,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case oe:return $.key===ge?O(B,M,$,re):null;case ae:return $.key===ge?q(B,M,$,re):null;case zt:return ge=$._init,X(B,M,ge($._payload),re)}if(br($)||_e($))return ge!==null?null:Z(B,M,$,re,null);kc(B,$)}return null}function le(B,M,$,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get($)||null,C(M,B,""+re,ge);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case oe:return B=B.get(re.key===null?$:re.key)||null,O(M,B,re,ge);case ae:return B=B.get(re.key===null?$:re.key)||null,q(M,B,re,ge);case zt:var Ee=re._init;return le(B,M,$,Ee(re._payload),ge)}if(br(re)||_e(re))return B=B.get($)||null,Z(M,B,re,ge,null);kc(M,re)}return null}function pe(B,M,$,re){for(var ge=null,Ee=null,Te=M,Ce=M=0,xt=null;Te!==null&&Ce<$.length;Ce++){Te.index>Ce?(xt=Te,Te=null):xt=Te.sibling;var ze=X(B,Te,$[Ce],re);if(ze===null){Te===null&&(Te=xt);break}r&&Te&&ze.alternate===null&&s(B,Te),M=g(ze,M,Ce),Ee===null?ge=ze:Ee.sibling=ze,Ee=ze,Te=xt}if(Ce===$.length)return l(B,Te),nt&&Ls(B,Ce),ge;if(Te===null){for(;Ce<$.length;Ce++)Te=ne(B,$[Ce],re),Te!==null&&(M=g(Te,M,Ce),Ee===null?ge=Te:Ee.sibling=Te,Ee=Te);return nt&&Ls(B,Ce),ge}for(Te=h(B,Te);Ce<$.length;Ce++)xt=le(Te,B,Ce,$[Ce],re),xt!==null&&(r&&xt.alternate!==null&&Te.delete(xt.key===null?Ce:xt.key),M=g(xt,M,Ce),Ee===null?ge=xt:Ee.sibling=xt,Ee=xt);return r&&Te.forEach(function(Mi){return s(B,Mi)}),nt&&Ls(B,Ce),ge}function me(B,M,$,re){var ge=_e($);if(typeof ge!="function")throw Error(t(150));if($=ge.call($),$==null)throw Error(t(151));for(var Ee=ge=null,Te=M,Ce=M=0,xt=null,ze=$.next();Te!==null&&!ze.done;Ce++,ze=$.next()){Te.index>Ce?(xt=Te,Te=null):xt=Te.sibling;var Mi=X(B,Te,ze.value,re);if(Mi===null){Te===null&&(Te=xt);break}r&&Te&&Mi.alternate===null&&s(B,Te),M=g(Mi,M,Ce),Ee===null?ge=Mi:Ee.sibling=Mi,Ee=Mi,Te=xt}if(ze.done)return l(B,Te),nt&&Ls(B,Ce),ge;if(Te===null){for(;!ze.done;Ce++,ze=$.next())ze=ne(B,ze.value,re),ze!==null&&(M=g(ze,M,Ce),Ee===null?ge=ze:Ee.sibling=ze,Ee=ze);return nt&&Ls(B,Ce),ge}for(Te=h(B,Te);!ze.done;Ce++,ze=$.next())ze=le(Te,B,Ce,ze.value,re),ze!==null&&(r&&ze.alternate!==null&&Te.delete(ze.key===null?Ce:ze.key),M=g(ze,M,Ce),Ee===null?ge=ze:Ee.sibling=ze,Ee=ze);return r&&Te.forEach(function(BS){return s(B,BS)}),nt&&Ls(B,Ce),ge}function ct(B,M,$,re){if(typeof $=="object"&&$!==null&&$.type===D&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case oe:e:{for(var ge=$.key,Ee=M;Ee!==null;){if(Ee.key===ge){if(ge=$.type,ge===D){if(Ee.tag===7){l(B,Ee.sibling),M=f(Ee,$.props.children),M.return=B,B=M;break e}}else if(Ee.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===zt&&_y(ge)===Ee.type){l(B,Ee.sibling),M=f(Ee,$.props),M.ref=Vl(B,Ee,$),M.return=B,B=M;break e}l(B,Ee);break}else s(B,Ee);Ee=Ee.sibling}$.type===D?(M=Hs($.props.children,B.mode,re,$.key),M.return=B,B=M):(re=Zc($.type,$.key,$.props,null,B.mode,re),re.ref=Vl(B,M,$),re.return=B,B=re)}return E(B);case ae:e:{for(Ee=$.key;M!==null;){if(M.key===Ee)if(M.tag===4&&M.stateNode.containerInfo===$.containerInfo&&M.stateNode.implementation===$.implementation){l(B,M.sibling),M=f(M,$.children||[]),M.return=B,B=M;break e}else{l(B,M);break}else s(B,M);M=M.sibling}M=rp($,B.mode,re),M.return=B,B=M}return E(B);case zt:return Ee=$._init,ct(B,M,Ee($._payload),re)}if(br($))return pe(B,M,$,re);if(_e($))return me(B,M,$,re);kc(B,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,M!==null&&M.tag===6?(l(B,M.sibling),M=f(M,$),M.return=B,B=M):(l(B,M),M=np($,B.mode,re),M.return=B,B=M),E(B)):l(B,M)}return ct}var ia=wy(!0),Ey=wy(!1),xc=Ci(null),Nc=null,sa=null,df=null;function ff(){df=sa=Nc=null}function pf(r){var s=xc.current;Ze(xc),r._currentValue=s}function mf(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function oa(r,s){Nc=r,df=sa=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(cn=!0),r.firstContext=null)}function Vn(r){var s=r._currentValue;if(df!==r)if(r={context:r,memoizedValue:s,next:null},sa===null){if(Nc===null)throw Error(t(308));sa=r,Nc.dependencies={lanes:0,firstContext:r}}else sa=sa.next=r;return s}var Fs=null;function gf(r){Fs===null?Fs=[r]:Fs.push(r)}function Ty(r,s,l,h){var f=s.interleaved;return f===null?(l.next=l,gf(s)):(l.next=f.next,f.next=l),s.interleaved=l,Kr(r,h)}function Kr(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Pi=!1;function yf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iy(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Qr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ki(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(je&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Kr(r,l)}return f=h.interleaved,f===null?(s.next=s,gf(h)):(s.next=f.next,f.next=s),h.interleaved=s,Kr(r,l)}function Oc(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,vi(r,l)}}function Sy(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=E:g=g.next=E,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Dc(r,s,l,h){var f=r.updateQueue;Pi=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var O=C,q=O.next;O.next=null,E===null?g=q:E.next=q,E=O;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==E&&(C===null?Z.firstBaseUpdate=q:C.next=q,Z.lastBaseUpdate=O))}if(g!==null){var ne=f.baseState;E=0,Z=q=O=null,C=g;do{var X=C.lane,le=C.eventTime;if((h&X)===X){Z!==null&&(Z=Z.next={eventTime:le,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var pe=r,me=C;switch(X=s,le=l,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){ne=pe.call(le,ne,X);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,X=typeof pe=="function"?pe.call(le,ne,X):pe,X==null)break e;ne=ce({},ne,X);break e;case 2:Pi=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,X=f.effects,X===null?f.effects=[C]:X.push(C))}else le={eventTime:le,lane:X,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?(q=Z=le,O=ne):Z=Z.next=le,E|=X;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;X=C,C=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);if(Z===null&&(O=ne),f.baseState=O,f.firstBaseUpdate=q,f.lastBaseUpdate=Z,s=f.shared.interleaved,s!==null){f=s;do E|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);zs|=E,r.lanes=E,r.memoizedState=ne}}function Cy(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Ml={},wr=Ci(Ml),Ll=Ci(Ml),Fl=Ci(Ml);function Us(r){if(r===Ml)throw Error(t(174));return r}function vf(r,s){switch(Xe(Fl,s),Xe(Ll,r),Xe(wr,Ml),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vt(s,r)}Ze(wr),Xe(wr,s)}function aa(){Ze(wr),Ze(Ll),Ze(Fl)}function Ay(r){Us(Fl.current);var s=Us(wr.current),l=vt(s,r.type);s!==l&&(Xe(Ll,r),Xe(wr,l))}function _f(r){Ll.current===r&&(Ze(wr),Ze(Ll))}var rt=Ci(0);function bc(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var wf=[];function Ef(){for(var r=0;r<wf.length;r++)wf[r]._workInProgressVersionPrimary=null;wf.length=0}var Vc=te.ReactCurrentDispatcher,Tf=te.ReactCurrentBatchConfig,js=0,it=null,wt=null,Pt=null,Mc=!1,Ul=!1,jl=0,cS=0;function $t(){throw Error(t(321))}function If(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Xn(r[l],s[l]))return!1;return!0}function Sf(r,s,l,h,f,g){if(js=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Vc.current=r===null||r.memoizedState===null?pS:mS,r=l(h,f),Ul){g=0;do{if(Ul=!1,jl=0,25<=g)throw Error(t(301));g+=1,Pt=wt=null,s.updateQueue=null,Vc.current=gS,r=l(h,f)}while(Ul)}if(Vc.current=Uc,s=wt!==null&&wt.next!==null,js=0,Pt=wt=it=null,Mc=!1,s)throw Error(t(300));return r}function Cf(){var r=jl!==0;return jl=0,r}function Er(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?it.memoizedState=Pt=r:Pt=Pt.next=r,Pt}function Mn(){if(wt===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var s=Pt===null?it.memoizedState:Pt.next;if(s!==null)Pt=s,wt=r;else{if(r===null)throw Error(t(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Pt===null?it.memoizedState=Pt=r:Pt=Pt.next=r}return Pt}function zl(r,s){return typeof s=="function"?s(r):s}function Af(r){var s=Mn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=wt,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var C=E=null,O=null,q=g;do{var Z=q.lane;if((js&Z)===Z)O!==null&&(O=O.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:r(h,q.action);else{var ne={lane:Z,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};O===null?(C=O=ne,E=h):O=O.next=ne,it.lanes|=Z,zs|=Z}q=q.next}while(q!==null&&q!==g);O===null?E=h:O.next=C,Xn(h,s.memoizedState)||(cn=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=O,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do g=f.lane,it.lanes|=g,zs|=g,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Rf(r){var s=Mn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var E=f=f.next;do g=r(g,E.action),E=E.next;while(E!==f);Xn(g,s.memoizedState)||(cn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function Ry(){}function Py(r,s){var l=it,h=Mn(),f=s(),g=!Xn(h.memoizedState,f);if(g&&(h.memoizedState=f,cn=!0),h=h.queue,Pf(Ny.bind(null,l,h,r),[r]),h.getSnapshot!==s||g||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,Bl(9,xy.bind(null,l,h,f,s),void 0,null),kt===null)throw Error(t(349));(js&30)!==0||ky(l,s,f)}return f}function ky(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function xy(r,s,l,h){s.value=l,s.getSnapshot=h,Oy(s)&&Dy(r)}function Ny(r,s,l){return l(function(){Oy(s)&&Dy(r)})}function Oy(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Xn(r,l)}catch{return!0}}function Dy(r){var s=Kr(r,1);s!==null&&nr(s,r,1,-1)}function by(r){var s=Er();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:r},s.queue=r,r=r.dispatch=fS.bind(null,it,r),[s.memoizedState,r]}function Bl(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function Vy(){return Mn().memoizedState}function Lc(r,s,l,h){var f=Er();it.flags|=r,f.memoizedState=Bl(1|s,l,void 0,h===void 0?null:h)}function Fc(r,s,l,h){var f=Mn();h=h===void 0?null:h;var g=void 0;if(wt!==null){var E=wt.memoizedState;if(g=E.destroy,h!==null&&If(h,E.deps)){f.memoizedState=Bl(s,l,g,h);return}}it.flags|=r,f.memoizedState=Bl(1|s,l,g,h)}function My(r,s){return Lc(8390656,8,r,s)}function Pf(r,s){return Fc(2048,8,r,s)}function Ly(r,s){return Fc(4,2,r,s)}function Fy(r,s){return Fc(4,4,r,s)}function Uy(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function jy(r,s,l){return l=l!=null?l.concat([r]):null,Fc(4,4,Uy.bind(null,s,r),l)}function kf(){}function zy(r,s){var l=Mn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&If(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function By(r,s){var l=Mn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&If(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function $y(r,s,l){return(js&21)===0?(r.baseState&&(r.baseState=!1,cn=!0),r.memoizedState=l):(Xn(l,s)||(l=ks(),it.lanes|=l,zs|=l,r.baseState=!0),s)}function hS(r,s){var l=Ve;Ve=l!==0&&4>l?l:4,r(!0);var h=Tf.transition;Tf.transition={};try{r(!1),s()}finally{Ve=l,Tf.transition=h}}function qy(){return Mn().memoizedState}function dS(r,s,l){var h=Di(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Hy(r))Wy(s,l);else if(l=Ty(r,s,l,h),l!==null){var f=en();nr(l,r,h,f),Ky(l,s,h)}}function fS(r,s,l){var h=Di(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Hy(r))Wy(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,C=g(E,l);if(f.hasEagerState=!0,f.eagerState=C,Xn(C,E)){var O=s.interleaved;O===null?(f.next=f,gf(s)):(f.next=O.next,O.next=f),s.interleaved=f;return}}catch{}finally{}l=Ty(r,s,f,h),l!==null&&(f=en(),nr(l,r,h,f),Ky(l,s,h))}}function Hy(r){var s=r.alternate;return r===it||s!==null&&s===it}function Wy(r,s){Ul=Mc=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Ky(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,vi(r,l)}}var Uc={readContext:Vn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},pS={readContext:Vn,useCallback:function(r,s){return Er().memoizedState=[r,s===void 0?null:s],r},useContext:Vn,useEffect:My,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Lc(4194308,4,Uy.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Lc(4194308,4,r,s)},useInsertionEffect:function(r,s){return Lc(4,2,r,s)},useMemo:function(r,s){var l=Er();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=Er();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=dS.bind(null,it,r),[h.memoizedState,r]},useRef:function(r){var s=Er();return r={current:r},s.memoizedState=r},useState:by,useDebugValue:kf,useDeferredValue:function(r){return Er().memoizedState=r},useTransition:function(){var r=by(!1),s=r[0];return r=hS.bind(null,r[1]),Er().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=it,f=Er();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),kt===null)throw Error(t(349));(js&30)!==0||ky(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,My(Ny.bind(null,h,g,r),[r]),h.flags|=2048,Bl(9,xy.bind(null,h,g,l,s),void 0,null),l},useId:function(){var r=Er(),s=kt.identifierPrefix;if(nt){var l=Wr,h=Hr;l=(h&~(1<<32-Xt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=jl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=cS++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},mS={readContext:Vn,useCallback:zy,useContext:Vn,useEffect:Pf,useImperativeHandle:jy,useInsertionEffect:Ly,useLayoutEffect:Fy,useMemo:By,useReducer:Af,useRef:Vy,useState:function(){return Af(zl)},useDebugValue:kf,useDeferredValue:function(r){var s=Mn();return $y(s,wt.memoizedState,r)},useTransition:function(){var r=Af(zl)[0],s=Mn().memoizedState;return[r,s]},useMutableSource:Ry,useSyncExternalStore:Py,useId:qy,unstable_isNewReconciler:!1},gS={readContext:Vn,useCallback:zy,useContext:Vn,useEffect:Pf,useImperativeHandle:jy,useInsertionEffect:Ly,useLayoutEffect:Fy,useMemo:By,useReducer:Rf,useRef:Vy,useState:function(){return Rf(zl)},useDebugValue:kf,useDeferredValue:function(r){var s=Mn();return wt===null?s.memoizedState=r:$y(s,wt.memoizedState,r)},useTransition:function(){var r=Rf(zl)[0],s=Mn().memoizedState;return[r,s]},useMutableSource:Ry,useSyncExternalStore:Py,useId:qy,unstable_isNewReconciler:!1};function Zn(r,s){if(r&&r.defaultProps){s=ce({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function xf(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:ce({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var jc={isMounted:function(r){return(r=r._reactInternals)?qn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=en(),f=Di(r),g=Qr(h,f);g.payload=s,l!=null&&(g.callback=l),s=ki(r,g,f),s!==null&&(nr(s,r,f,h),Oc(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=en(),f=Di(r),g=Qr(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=ki(r,g,f),s!==null&&(nr(s,r,f,h),Oc(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=en(),h=Di(r),f=Qr(l,h);f.tag=2,s!=null&&(f.callback=s),s=ki(r,f,h),s!==null&&(nr(s,r,h,l),Oc(s,r,h))}};function Qy(r,s,l,h,f,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,E):s.prototype&&s.prototype.isPureReactComponent?!Pl(l,h)||!Pl(f,g):!0}function Gy(r,s,l){var h=!1,f=Ai,g=s.contextType;return typeof g=="object"&&g!==null?g=Vn(g):(f=un(s)?Vs:Bt.current,h=s.contextTypes,g=(h=h!=null)?ea(r,f):Ai),s=new s(l,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=jc,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function Yy(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&jc.enqueueReplaceState(s,s.state,null)}function Nf(r,s,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},yf(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Vn(g):(g=un(s)?Vs:Bt.current,f.context=ea(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(xf(r,s,g,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&jc.enqueueReplaceState(f,f.state,null),Dc(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function la(r,s){try{var l="",h=s;do l+=Ne(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function Of(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Df(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var yS=typeof WeakMap=="function"?WeakMap:Map;function Xy(r,s,l){l=Qr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Kc||(Kc=!0,Qf=h),Df(r,s)},l}function Jy(r,s,l){l=Qr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Df(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Df(r,s),typeof h!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),l}function Zy(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new yS;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),r=NS.bind(null,r,s,l),s.then(r,r))}function ev(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function tv(r,s,l,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Qr(-1,1),s.tag=2,ki(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var vS=te.ReactCurrentOwner,cn=!1;function Zt(r,s,l,h){s.child=r===null?Ey(s,null,l,h):ia(s,r.child,l,h)}function nv(r,s,l,h,f){l=l.render;var g=s.ref;return oa(s,f),h=Sf(r,s,l,h,g,f),l=Cf(),r!==null&&!cn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Gr(r,s,f)):(nt&&l&&af(s),s.flags|=1,Zt(r,s,h,f),s.child)}function rv(r,s,l,h,f){if(r===null){var g=l.type;return typeof g=="function"&&!tp(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,iv(r,s,g,h,f)):(r=Zc(l.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var E=g.memoizedProps;if(l=l.compare,l=l!==null?l:Pl,l(E,h)&&r.ref===s.ref)return Gr(r,s,f)}return s.flags|=1,r=Vi(g,h),r.ref=s.ref,r.return=s,s.child=r}function iv(r,s,l,h,f){if(r!==null){var g=r.memoizedProps;if(Pl(g,h)&&r.ref===s.ref)if(cn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(cn=!0);else return s.lanes=r.lanes,Gr(r,s,f)}return bf(r,s,l,h,f)}function sv(r,s,l){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ca,Sn),Sn|=l;else{if((l&1073741824)===0)return r=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Xe(ca,Sn),Sn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Xe(ca,Sn),Sn|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,Xe(ca,Sn),Sn|=h;return Zt(r,s,f,l),s.child}function ov(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function bf(r,s,l,h,f){var g=un(l)?Vs:Bt.current;return g=ea(s,g),oa(s,f),l=Sf(r,s,l,h,g,f),h=Cf(),r!==null&&!cn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Gr(r,s,f)):(nt&&h&&af(s),s.flags|=1,Zt(r,s,l,f),s.child)}function av(r,s,l,h,f){if(un(l)){var g=!0;Sc(s)}else g=!1;if(oa(s,f),s.stateNode===null)Bc(r,s),Gy(s,l,h),Nf(s,l,h,f),h=!0;else if(r===null){var E=s.stateNode,C=s.memoizedProps;E.props=C;var O=E.context,q=l.contextType;typeof q=="object"&&q!==null?q=Vn(q):(q=un(l)?Vs:Bt.current,q=ea(s,q));var Z=l.getDerivedStateFromProps,ne=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function";ne||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==h||O!==q)&&Yy(s,E,h,q),Pi=!1;var X=s.memoizedState;E.state=X,Dc(s,h,E,f),O=s.memoizedState,C!==h||X!==O||ln.current||Pi?(typeof Z=="function"&&(xf(s,l,Z,h),O=s.memoizedState),(C=Pi||Qy(s,l,C,h,X,O,q))?(ne||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=O),E.props=h,E.state=O,E.context=q,h=C):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,Iy(r,s),C=s.memoizedProps,q=s.type===s.elementType?C:Zn(s.type,C),E.props=q,ne=s.pendingProps,X=E.context,O=l.contextType,typeof O=="object"&&O!==null?O=Vn(O):(O=un(l)?Vs:Bt.current,O=ea(s,O));var le=l.getDerivedStateFromProps;(Z=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==ne||X!==O)&&Yy(s,E,h,O),Pi=!1,X=s.memoizedState,E.state=X,Dc(s,h,E,f);var pe=s.memoizedState;C!==ne||X!==pe||ln.current||Pi?(typeof le=="function"&&(xf(s,l,le,h),pe=s.memoizedState),(q=Pi||Qy(s,l,q,h,X,pe,O)||!1)?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,pe,O),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,pe,O)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=pe),E.props=h,E.state=pe,E.context=O,h=q):(typeof E.componentDidUpdate!="function"||C===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),h=!1)}return Vf(r,s,l,h,g,f)}function Vf(r,s,l,h,f,g){ov(r,s);var E=(s.flags&128)!==0;if(!h&&!E)return f&&dy(s,l,!1),Gr(r,s,g);h=s.stateNode,vS.current=s;var C=E&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&E?(s.child=ia(s,r.child,null,g),s.child=ia(s,null,C,g)):Zt(r,s,C,g),s.memoizedState=h.state,f&&dy(s,l,!0),s.child}function lv(r){var s=r.stateNode;s.pendingContext?cy(r,s.pendingContext,s.pendingContext!==s.context):s.context&&cy(r,s.context,!1),vf(r,s.containerInfo)}function uv(r,s,l,h,f){return ra(),hf(f),s.flags|=256,Zt(r,s,l,h),s.child}var Mf={dehydrated:null,treeContext:null,retryLane:0};function Lf(r){return{baseLanes:r,cachePool:null,transitions:null}}function cv(r,s,l){var h=s.pendingProps,f=rt.current,g=!1,E=(s.flags&128)!==0,C;if((C=E)||(C=r!==null&&r.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Xe(rt,f&1),r===null)return cf(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=h.children,r=h.fallback,g?(h=s.mode,g=s.child,E={mode:"hidden",children:E},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=eh(E,h,0,null),r=Hs(r,h,l,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Lf(l),s.memoizedState=Mf,r):Ff(s,E));if(f=r.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return _S(r,s,E,h,C,f,l);if(g){g=h.fallback,E=s.mode,f=r.child,C=f.sibling;var O={mode:"hidden",children:h.children};return(E&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=O,s.deletions=null):(h=Vi(f,O),h.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=Vi(C,g):(g=Hs(g,E,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,E=r.child.memoizedState,E=E===null?Lf(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~l,s.memoizedState=Mf,h}return g=r.child,r=g.sibling,h=Vi(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Ff(r,s){return s=eh({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function zc(r,s,l,h){return h!==null&&hf(h),ia(s,r.child,null,l),r=Ff(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function _S(r,s,l,h,f,g,E){if(l)return s.flags&256?(s.flags&=-257,h=Of(Error(t(422))),zc(r,s,E,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=eh({mode:"visible",children:h.children},f,0,null),g=Hs(g,f,E,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&ia(s,r.child,null,E),s.child.memoizedState=Lf(E),s.memoizedState=Mf,g);if((s.mode&1)===0)return zc(r,s,E,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var C=h.dgst;return h=C,g=Error(t(419)),h=Of(g,h,void 0),zc(r,s,E,h)}if(C=(E&r.childLanes)!==0,cn||C){if(h=kt,h!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|E))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Kr(r,f),nr(h,r,f,-1))}return ep(),h=Of(Error(t(421))),zc(r,s,E,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=OS.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,In=Si(f.nextSibling),Tn=s,nt=!0,Jn=null,r!==null&&(Dn[bn++]=Hr,Dn[bn++]=Wr,Dn[bn++]=Ms,Hr=r.id,Wr=r.overflow,Ms=s),s=Ff(s,h.children),s.flags|=4096,s)}function hv(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),mf(r.return,s,l)}function Uf(r,s,l,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function dv(r,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Zt(r,s,h.children,l),h=rt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hv(r,l,s);else if(r.tag===19)hv(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Xe(rt,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&bc(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Uf(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&bc(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Uf(s,!0,l,null,g);break;case"together":Uf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Bc(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Gr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),zs|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Vi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Vi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function wS(r,s,l){switch(s.tag){case 3:lv(s),ra();break;case 5:Ay(s);break;case 1:un(s.type)&&Sc(s);break;case 4:vf(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Xe(xc,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Xe(rt,rt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?cv(r,s,l):(Xe(rt,rt.current&1),r=Gr(r,s,l),r!==null?r.sibling:null);Xe(rt,rt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return dv(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Xe(rt,rt.current),h)break;return null;case 22:case 23:return s.lanes=0,sv(r,s,l)}return Gr(r,s,l)}var fv,jf,pv,mv;fv=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},jf=function(){},pv=function(r,s,l,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,Us(wr.current);var g=null;switch(l){case"input":f=vs(r,f),h=vs(r,h),g=[];break;case"select":f=ce({},f,{value:void 0}),h=ce({},h,{value:void 0}),g=[];break;case"textarea":f=rl(r,f),h=rl(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Ec)}ul(l,h);var E;l=null;for(q in f)if(!h.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var C=f[q];for(E in C)C.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in h){var O=h[q];if(C=f!=null?f[q]:void 0,h.hasOwnProperty(q)&&O!==C&&(O!=null||C!=null))if(q==="style")if(C){for(E in C)!C.hasOwnProperty(E)||O&&O.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in O)O.hasOwnProperty(E)&&C[E]!==O[E]&&(l||(l={}),l[E]=O[E])}else l||(g||(g=[]),g.push(q,l)),l=O;else q==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,C=C?C.__html:void 0,O!=null&&C!==O&&(g=g||[]).push(q,O)):q==="children"?typeof O!="string"&&typeof O!="number"||(g=g||[]).push(q,""+O):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(O!=null&&q==="onScroll"&&Je("scroll",r),g||C===O||(g=[])):(g=g||[]).push(q,O))}l&&(g=g||[]).push("style",l);var q=g;(s.updateQueue=q)&&(s.flags|=4)}},mv=function(r,s,l,h){l!==h&&(s.flags|=4)};function $l(r,s){if(!nt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function qt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function ES(r,s,l){var h=s.pendingProps;switch(lf(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return un(s.type)&&Ic(),qt(s),null;case 3:return h=s.stateNode,aa(),Ze(ln),Ze(Bt),Ef(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Pc(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jn!==null&&(Xf(Jn),Jn=null))),jf(r,s),qt(s),null;case 5:_f(s);var f=Us(Fl.current);if(l=s.type,r!==null&&s.stateNode!=null)pv(r,s,l,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return qt(s),null}if(r=Us(wr.current),Pc(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[_r]=s,h[Dl]=g,r=(s.mode&1)!==0,l){case"dialog":Je("cancel",h),Je("close",h);break;case"iframe":case"object":case"embed":Je("load",h);break;case"video":case"audio":for(f=0;f<xl.length;f++)Je(xl[f],h);break;case"source":Je("error",h);break;case"img":case"image":case"link":Je("error",h),Je("load",h);break;case"details":Je("toggle",h);break;case"input":To(h,g),Je("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Je("invalid",h);break;case"textarea":So(h,g),Je("invalid",h)}ul(l,g),f=null;for(var E in g)if(g.hasOwnProperty(E)){var C=g[E];E==="children"?typeof C=="string"?h.textContent!==C&&(g.suppressHydrationWarning!==!0&&wc(h.textContent,C,r),f=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&wc(h.textContent,C,r),f=["children",""+C]):o.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&Je("scroll",h)}switch(l){case"input":Dr(h),Wu(h,g,!0);break;case"textarea":Dr(h),il(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Ec)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=yt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(l,{is:h.is}):(r=E.createElement(l),l==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,l),r[_r]=s,r[Dl]=h,fv(r,s,!1,!1),s.stateNode=r;e:{switch(E=cl(l,h),l){case"dialog":Je("cancel",r),Je("close",r),f=h;break;case"iframe":case"object":case"embed":Je("load",r),f=h;break;case"video":case"audio":for(f=0;f<xl.length;f++)Je(xl[f],r);f=h;break;case"source":Je("error",r),f=h;break;case"img":case"image":case"link":Je("error",r),Je("load",r),f=h;break;case"details":Je("toggle",r),f=h;break;case"input":To(r,h),f=vs(r,h),Je("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=ce({},h,{value:void 0}),Je("invalid",r);break;case"textarea":So(r,h),f=rl(r,h),Je("invalid",r);break;default:f=h}ul(l,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var O=C[g];g==="style"?al(r,O):g==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&sl(r,O)):g==="children"?typeof O=="string"?(l!=="textarea"||O!=="")&&fi(r,O):typeof O=="number"&&fi(r,""+O):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?O!=null&&g==="onScroll"&&Je("scroll",r):O!=null&&ee(r,g,O,E))}switch(l){case"input":Dr(r),Wu(r,h,!1);break;case"textarea":Dr(r),il(r);break;case"option":h.value!=null&&r.setAttribute("value",""+$e(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?Vr(r,!!h.multiple,g,!1):h.defaultValue!=null&&Vr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Ec)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qt(s),null;case 6:if(r&&s.stateNode!=null)mv(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=Us(Fl.current),Us(wr.current),Pc(s)){if(h=s.stateNode,l=s.memoizedProps,h[_r]=s,(g=h.nodeValue!==l)&&(r=Tn,r!==null))switch(r.tag){case 3:wc(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&wc(h.nodeValue,l,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[_r]=s,s.stateNode=h}return qt(s),null;case 13:if(Ze(rt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&In!==null&&(s.mode&1)!==0&&(s.flags&128)===0)vy(),ra(),s.flags|=98560,g=!1;else if(g=Pc(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[_r]=s}else ra(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),g=!1}else Jn!==null&&(Xf(Jn),Jn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?Et===0&&(Et=3):ep())),s.updateQueue!==null&&(s.flags|=4),qt(s),null);case 4:return aa(),jf(r,s),r===null&&Nl(s.stateNode.containerInfo),qt(s),null;case 10:return pf(s.type._context),qt(s),null;case 17:return un(s.type)&&Ic(),qt(s),null;case 19:if(Ze(rt),g=s.memoizedState,g===null)return qt(s),null;if(h=(s.flags&128)!==0,E=g.rendering,E===null)if(h)$l(g,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(E=bc(r),E!==null){for(s.flags|=128,$l(g,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,r=h,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Xe(rt,rt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ye()>ha&&(s.flags|=128,h=!0,$l(g,!1),s.lanes=4194304)}else{if(!h)if(r=bc(E),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),$l(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!nt)return qt(s),null}else 2*Ye()-g.renderingStartTime>ha&&l!==1073741824&&(s.flags|=128,h=!0,$l(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(l=g.last,l!==null?l.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ye(),s.sibling=null,l=rt.current,Xe(rt,h?l&1|2:l&1),s):(qt(s),null);case 22:case 23:return Zf(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Sn&1073741824)!==0&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function TS(r,s){switch(lf(s),s.tag){case 1:return un(s.type)&&Ic(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return aa(),Ze(ln),Ze(Bt),Ef(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return _f(s),null;case 13:if(Ze(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ra()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return aa(),null;case 10:return pf(s.type._context),null;case 22:case 23:return Zf(),null;case 24:return null;default:return null}}var $c=!1,Ht=!1,IS=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ua(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ot(r,s,h)}else l.current=null}function zf(r,s,l){try{l()}catch(h){ot(r,s,h)}}var gv=!1;function SS(r,s){if(Jd=Ei,r=Qg(),qd(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var E=0,C=-1,O=-1,q=0,Z=0,ne=r,X=null;t:for(;;){for(var le;ne!==l||f!==0&&ne.nodeType!==3||(C=E+f),ne!==g||h!==0&&ne.nodeType!==3||(O=E+h),ne.nodeType===3&&(E+=ne.nodeValue.length),(le=ne.firstChild)!==null;)X=ne,ne=le;for(;;){if(ne===r)break t;if(X===l&&++q===f&&(C=E),X===g&&++Z===h&&(O=E),(le=ne.nextSibling)!==null)break;ne=X,X=ne.parentNode}ne=le}l=C===-1||O===-1?null:{start:C,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zd={focusedElem:r,selectionRange:l},Ei=!1,fe=s;fe!==null;)if(s=fe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,fe=r;else for(;fe!==null;){s=fe;try{var pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,ct=pe.memoizedState,B=s.stateNode,M=B.getSnapshotBeforeUpdate(s.elementType===s.type?me:Zn(s.type,me),ct);B.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var $=s.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ot(s,s.return,re)}if(r=s.sibling,r!==null){r.return=s.return,fe=r;break}fe=s.return}return pe=gv,gv=!1,pe}function ql(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&zf(s,l,g)}f=f.next}while(f!==h)}}function qc(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function Bf(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function yv(r){var s=r.alternate;s!==null&&(r.alternate=null,yv(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[_r],delete s[Dl],delete s[rf],delete s[oS],delete s[aS])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function vv(r){return r.tag===5||r.tag===3||r.tag===4}function _v(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $f(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Ec));else if(h!==4&&(r=r.child,r!==null))for($f(r,s,l),r=r.sibling;r!==null;)$f(r,s,l),r=r.sibling}function qf(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(qf(r,s,l),r=r.sibling;r!==null;)qf(r,s,l),r=r.sibling}var bt=null,er=!1;function xi(r,s,l){for(l=l.child;l!==null;)wv(r,s,l),l=l.sibling}function wv(r,s,l){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Rs,l)}catch{}switch(l.tag){case 5:Ht||ua(l,s);case 6:var h=bt,f=er;bt=null,xi(r,s,l),bt=h,er=f,bt!==null&&(er?(r=bt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):bt.removeChild(l.stateNode));break;case 18:bt!==null&&(er?(r=bt,l=l.stateNode,r.nodeType===8?nf(r.parentNode,l):r.nodeType===1&&nf(r,l),Gn(r)):nf(bt,l.stateNode));break;case 4:h=bt,f=er,bt=l.stateNode.containerInfo,er=!0,xi(r,s,l),bt=h,er=f;break;case 0:case 11:case 14:case 15:if(!Ht&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&zf(l,s,E),f=f.next}while(f!==h)}xi(r,s,l);break;case 1:if(!Ht&&(ua(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(C){ot(l,s,C)}xi(r,s,l);break;case 21:xi(r,s,l);break;case 22:l.mode&1?(Ht=(h=Ht)||l.memoizedState!==null,xi(r,s,l),Ht=h):xi(r,s,l);break;default:xi(r,s,l)}}function Ev(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new IS),s.forEach(function(h){var f=DS.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function tr(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=r,E=s,C=E;e:for(;C!==null;){switch(C.tag){case 5:bt=C.stateNode,er=!1;break e;case 3:bt=C.stateNode.containerInfo,er=!0;break e;case 4:bt=C.stateNode.containerInfo,er=!0;break e}C=C.return}if(bt===null)throw Error(t(160));wv(g,E,f),bt=null,er=!1;var O=f.alternate;O!==null&&(O.return=null),f.return=null}catch(q){ot(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Tv(s,r),s=s.sibling}function Tv(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(tr(s,r),Tr(r),h&4){try{ql(3,r,r.return),qc(3,r)}catch(me){ot(r,r.return,me)}try{ql(5,r,r.return)}catch(me){ot(r,r.return,me)}}break;case 1:tr(s,r),Tr(r),h&512&&l!==null&&ua(l,l.return);break;case 5:if(tr(s,r),Tr(r),h&512&&l!==null&&ua(l,l.return),r.flags&32){var f=r.stateNode;try{fi(f,"")}catch(me){ot(r,r.return,me)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,E=l!==null?l.memoizedProps:g,C=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&tl(f,g),cl(C,E);var q=cl(C,g);for(E=0;E<O.length;E+=2){var Z=O[E],ne=O[E+1];Z==="style"?al(f,ne):Z==="dangerouslySetInnerHTML"?sl(f,ne):Z==="children"?fi(f,ne):ee(f,Z,ne,q)}switch(C){case"input":nl(f,g);break;case"textarea":Co(f,g);break;case"select":var X=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var le=g.value;le!=null?Vr(f,!!g.multiple,le,!1):X!==!!g.multiple&&(g.defaultValue!=null?Vr(f,!!g.multiple,g.defaultValue,!0):Vr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Dl]=g}catch(me){ot(r,r.return,me)}}break;case 6:if(tr(s,r),Tr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(me){ot(r,r.return,me)}}break;case 3:if(tr(s,r),Tr(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Gn(s.containerInfo)}catch(me){ot(r,r.return,me)}break;case 4:tr(s,r),Tr(r);break;case 13:tr(s,r),Tr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Kf=Ye())),h&4&&Ev(r);break;case 22:if(Z=l!==null&&l.memoizedState!==null,r.mode&1?(Ht=(q=Ht)||Z,tr(s,r),Ht=q):tr(s,r),Tr(r),h&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!Z&&(r.mode&1)!==0)for(fe=r,Z=r.child;Z!==null;){for(ne=fe=Z;fe!==null;){switch(X=fe,le=X.child,X.tag){case 0:case 11:case 14:case 15:ql(4,X,X.return);break;case 1:ua(X,X.return);var pe=X.stateNode;if(typeof pe.componentWillUnmount=="function"){h=X,l=X.return;try{s=h,pe.props=s.memoizedProps,pe.state=s.memoizedState,pe.componentWillUnmount()}catch(me){ot(h,l,me)}}break;case 5:ua(X,X.return);break;case 22:if(X.memoizedState!==null){Cv(ne);continue}}le!==null?(le.return=X,fe=le):Cv(ne)}Z=Z.sibling}e:for(Z=null,ne=r;;){if(ne.tag===5){if(Z===null){Z=ne;try{f=ne.stateNode,q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=ne.stateNode,O=ne.memoizedProps.style,E=O!=null&&O.hasOwnProperty("display")?O.display:null,C.style.display=ol("display",E))}catch(me){ot(r,r.return,me)}}}else if(ne.tag===6){if(Z===null)try{ne.stateNode.nodeValue=q?"":ne.memoizedProps}catch(me){ot(r,r.return,me)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===r)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===r)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===r)break e;Z===ne&&(Z=null),ne=ne.return}Z===ne&&(Z=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:tr(s,r),Tr(r),h&4&&Ev(r);break;case 21:break;default:tr(s,r),Tr(r)}}function Tr(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(vv(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(fi(f,""),h.flags&=-33);var g=_v(r);qf(r,g,f);break;case 3:case 4:var E=h.stateNode.containerInfo,C=_v(r);$f(r,C,E);break;default:throw Error(t(161))}}catch(O){ot(r,r.return,O)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function CS(r,s,l){fe=r,Iv(r)}function Iv(r,s,l){for(var h=(r.mode&1)!==0;fe!==null;){var f=fe,g=f.child;if(f.tag===22&&h){var E=f.memoizedState!==null||$c;if(!E){var C=f.alternate,O=C!==null&&C.memoizedState!==null||Ht;C=$c;var q=Ht;if($c=E,(Ht=O)&&!q)for(fe=f;fe!==null;)E=fe,O=E.child,E.tag===22&&E.memoizedState!==null?Av(f):O!==null?(O.return=E,fe=O):Av(f);for(;g!==null;)fe=g,Iv(g),g=g.sibling;fe=f,$c=C,Ht=q}Sv(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,fe=g):Sv(r)}}function Sv(r){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ht||qc(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Ht)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Zn(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Cy(s,g,h);break;case 3:var E=s.updateQueue;if(E!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Cy(s,E,l)}break;case 5:var C=s.stateNode;if(l===null&&s.flags&4){l=C;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&l.focus();break;case"img":O.src&&(l.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var Z=q.memoizedState;if(Z!==null){var ne=Z.dehydrated;ne!==null&&Gn(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||s.flags&512&&Bf(s)}catch(X){ot(s,s.return,X)}}if(s===r){fe=null;break}if(l=s.sibling,l!==null){l.return=s.return,fe=l;break}fe=s.return}}function Cv(r){for(;fe!==null;){var s=fe;if(s===r){fe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,fe=l;break}fe=s.return}}function Av(r){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{qc(4,s)}catch(O){ot(s,l,O)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(O){ot(s,f,O)}}var g=s.return;try{Bf(s)}catch(O){ot(s,g,O)}break;case 5:var E=s.return;try{Bf(s)}catch(O){ot(s,E,O)}}}catch(O){ot(s,s.return,O)}if(s===r){fe=null;break}var C=s.sibling;if(C!==null){C.return=s.return,fe=C;break}fe=s.return}}var AS=Math.ceil,Hc=te.ReactCurrentDispatcher,Hf=te.ReactCurrentOwner,Ln=te.ReactCurrentBatchConfig,je=0,kt=null,ft=null,Vt=0,Sn=0,ca=Ci(0),Et=0,Hl=null,zs=0,Wc=0,Wf=0,Wl=null,hn=null,Kf=0,ha=1/0,Yr=null,Kc=!1,Qf=null,Ni=null,Qc=!1,Oi=null,Gc=0,Kl=0,Gf=null,Yc=-1,Xc=0;function en(){return(je&6)!==0?Ye():Yc!==-1?Yc:Yc=Ye()}function Di(r){return(r.mode&1)===0?1:(je&2)!==0&&Vt!==0?Vt&-Vt:uS.transition!==null?(Xc===0&&(Xc=ks()),Xc):(r=Ve,r!==0||(r=window.event,r=r===void 0?16:El(r.type)),r)}function nr(r,s,l,h){if(50<Kl)throw Kl=0,Gf=null,Error(t(185));yi(r,l,h),((je&2)===0||r!==kt)&&(r===kt&&((je&2)===0&&(Wc|=l),Et===4&&bi(r,Vt)),dn(r,h),l===1&&je===0&&(s.mode&1)===0&&(ha=Ye()+500,Cc&&Ri()))}function dn(r,s){var l=r.callbackNode;Fr(r,s);var h=Ps(r,r===kt?Vt:0);if(h===0)l!==null&&gl(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&gl(l),s===1)r.tag===0?lS(Pv.bind(null,r)):fy(Pv.bind(null,r)),iS(function(){(je&6)===0&&Ri()}),l=null;else{switch(_i(h)){case 1:l=As;break;case 4:l=pi;break;case 16:l=xn;break;case 536870912:l=Xu;break;default:l=xn}l=Mv(l,Rv.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function Rv(r,s){if(Yc=-1,Xc=0,(je&6)!==0)throw Error(t(327));var l=r.callbackNode;if(da()&&r.callbackNode!==l)return null;var h=Ps(r,r===kt?Vt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=Jc(r,h);else{s=h;var f=je;je|=2;var g=xv();(kt!==r||Vt!==s)&&(Yr=null,ha=Ye()+500,$s(r,s));do try{kS();break}catch(C){kv(r,C)}while(!0);ff(),Hc.current=g,je=f,ft!==null?s=0:(kt=null,Vt=0,s=Et)}if(s!==0){if(s===2&&(f=_n(r),f!==0&&(h=f,s=Yf(r,f))),s===1)throw l=Hl,$s(r,0),bi(r,h),dn(r,Ye()),l;if(s===6)bi(r,h);else{if(f=r.current.alternate,(h&30)===0&&!RS(f)&&(s=Jc(r,h),s===2&&(g=_n(r),g!==0&&(h=g,s=Yf(r,g))),s===1))throw l=Hl,$s(r,0),bi(r,h),dn(r,Ye()),l;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:qs(r,hn,Yr);break;case 3:if(bi(r,h),(h&130023424)===h&&(s=Kf+500-Ye(),10<s)){if(Ps(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){en(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=tf(qs.bind(null,r,hn,Yr),s);break}qs(r,hn,Yr);break;case 4:if(bi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var E=31-Xt(h);g=1<<E,E=s[E],E>f&&(f=E),h&=~g}if(h=f,h=Ye()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*AS(h/1960))-h,10<h){r.timeoutHandle=tf(qs.bind(null,r,hn,Yr),h);break}qs(r,hn,Yr);break;case 5:qs(r,hn,Yr);break;default:throw Error(t(329))}}}return dn(r,Ye()),r.callbackNode===l?Rv.bind(null,r):null}function Yf(r,s){var l=Wl;return r.current.memoizedState.isDehydrated&&($s(r,s).flags|=256),r=Jc(r,s),r!==2&&(s=hn,hn=l,s!==null&&Xf(s)),r}function Xf(r){hn===null?hn=r:hn.push.apply(hn,r)}function RS(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!Xn(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bi(r,s){for(s&=~Wf,s&=~Wc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Xt(s),h=1<<l;r[l]=-1,s&=~h}}function Pv(r){if((je&6)!==0)throw Error(t(327));da();var s=Ps(r,0);if((s&1)===0)return dn(r,Ye()),null;var l=Jc(r,s);if(r.tag!==0&&l===2){var h=_n(r);h!==0&&(s=h,l=Yf(r,h))}if(l===1)throw l=Hl,$s(r,0),bi(r,s),dn(r,Ye()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,qs(r,hn,Yr),dn(r,Ye()),null}function Jf(r,s){var l=je;je|=1;try{return r(s)}finally{je=l,je===0&&(ha=Ye()+500,Cc&&Ri())}}function Bs(r){Oi!==null&&Oi.tag===0&&(je&6)===0&&da();var s=je;je|=1;var l=Ln.transition,h=Ve;try{if(Ln.transition=null,Ve=1,r)return r()}finally{Ve=h,Ln.transition=l,je=s,(je&6)===0&&Ri()}}function Zf(){Sn=ca.current,Ze(ca)}function $s(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,rS(l)),ft!==null)for(l=ft.return;l!==null;){var h=l;switch(lf(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ic();break;case 3:aa(),Ze(ln),Ze(Bt),Ef();break;case 5:_f(h);break;case 4:aa();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:pf(h.type._context);break;case 22:case 23:Zf()}l=l.return}if(kt=r,ft=r=Vi(r.current,null),Vt=Sn=s,Et=0,Hl=null,Wf=Wc=zs=0,hn=Wl=null,Fs!==null){for(s=0;s<Fs.length;s++)if(l=Fs[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var E=g.next;g.next=f,h.next=E}l.pending=h}Fs=null}return r}function kv(r,s){do{var l=ft;try{if(ff(),Vc.current=Uc,Mc){for(var h=it.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Mc=!1}if(js=0,Pt=wt=it=null,Ul=!1,jl=0,Hf.current=null,l===null||l.return===null){Et=1,Hl=s,ft=null;break}e:{var g=r,E=l.return,C=l,O=s;if(s=Vt,C.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var q=O,Z=C,ne=Z.tag;if((Z.mode&1)===0&&(ne===0||ne===11||ne===15)){var X=Z.alternate;X?(Z.updateQueue=X.updateQueue,Z.memoizedState=X.memoizedState,Z.lanes=X.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var le=ev(E);if(le!==null){le.flags&=-257,tv(le,E,C,g,s),le.mode&1&&Zy(g,q,s),s=le,O=q;var pe=s.updateQueue;if(pe===null){var me=new Set;me.add(O),s.updateQueue=me}else pe.add(O);break e}else{if((s&1)===0){Zy(g,q,s),ep();break e}O=Error(t(426))}}else if(nt&&C.mode&1){var ct=ev(E);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),tv(ct,E,C,g,s),hf(la(O,C));break e}}g=O=la(O,C),Et!==4&&(Et=2),Wl===null?Wl=[g]:Wl.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=Xy(g,O,s);Sy(g,B);break e;case 1:C=O;var M=g.type,$=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ni===null||!Ni.has($)))){g.flags|=65536,s&=-s,g.lanes|=s;var re=Jy(g,C,s);Sy(g,re);break e}}g=g.return}while(g!==null)}Ov(l)}catch(ge){s=ge,ft===l&&l!==null&&(ft=l=l.return);continue}break}while(!0)}function xv(){var r=Hc.current;return Hc.current=Uc,r===null?Uc:r}function ep(){(Et===0||Et===3||Et===2)&&(Et=4),kt===null||(zs&268435455)===0&&(Wc&268435455)===0||bi(kt,Vt)}function Jc(r,s){var l=je;je|=2;var h=xv();(kt!==r||Vt!==s)&&(Yr=null,$s(r,s));do try{PS();break}catch(f){kv(r,f)}while(!0);if(ff(),je=l,Hc.current=h,ft!==null)throw Error(t(261));return kt=null,Vt=0,Et}function PS(){for(;ft!==null;)Nv(ft)}function kS(){for(;ft!==null&&!Gu();)Nv(ft)}function Nv(r){var s=Vv(r.alternate,r,Sn);r.memoizedProps=r.pendingProps,s===null?Ov(r):ft=s,Hf.current=null}function Ov(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=ES(l,s,Sn),l!==null){ft=l;return}}else{if(l=TS(l,s),l!==null){l.flags&=32767,ft=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Et=6,ft=null;return}}if(s=s.sibling,s!==null){ft=s;return}ft=s=r}while(s!==null);Et===0&&(Et=5)}function qs(r,s,l){var h=Ve,f=Ln.transition;try{Ln.transition=null,Ve=1,xS(r,s,l,h)}finally{Ln.transition=f,Ve=h}return null}function xS(r,s,l,h){do da();while(Oi!==null);if((je&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=l.lanes|l.childLanes;if(Qe(r,g),r===kt&&(ft=kt=null,Vt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Qc||(Qc=!0,Mv(xn,function(){return da(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=Ln.transition,Ln.transition=null;var E=Ve;Ve=1;var C=je;je|=4,Hf.current=null,SS(r,l),Tv(l,r),YI(Zd),Ei=!!Jd,Zd=Jd=null,r.current=l,CS(l),Md(),je=C,Ve=E,Ln.transition=g}else r.current=l;if(Qc&&(Qc=!1,Oi=r,Gc=f),g=r.pendingLanes,g===0&&(Ni=null),Ju(l.stateNode),dn(r,Ye()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Kc)throw Kc=!1,r=Qf,Qf=null,r;return(Gc&1)!==0&&r.tag!==0&&da(),g=r.pendingLanes,(g&1)!==0?r===Gf?Kl++:(Kl=0,Gf=r):Kl=0,Ri(),null}function da(){if(Oi!==null){var r=_i(Gc),s=Ln.transition,l=Ve;try{if(Ln.transition=null,Ve=16>r?16:r,Oi===null)var h=!1;else{if(r=Oi,Oi=null,Gc=0,(je&6)!==0)throw Error(t(331));var f=je;for(je|=4,fe=r.current;fe!==null;){var g=fe,E=g.child;if((fe.flags&16)!==0){var C=g.deletions;if(C!==null){for(var O=0;O<C.length;O++){var q=C[O];for(fe=q;fe!==null;){var Z=fe;switch(Z.tag){case 0:case 11:case 15:ql(8,Z,g)}var ne=Z.child;if(ne!==null)ne.return=Z,fe=ne;else for(;fe!==null;){Z=fe;var X=Z.sibling,le=Z.return;if(yv(Z),Z===q){fe=null;break}if(X!==null){X.return=le,fe=X;break}fe=le}}}var pe=g.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var ct=me.sibling;me.sibling=null,me=ct}while(me!==null)}}fe=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,fe=E;else e:for(;fe!==null;){if(g=fe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ql(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,fe=B;break e}fe=g.return}}var M=r.current;for(fe=M;fe!==null;){E=fe;var $=E.child;if((E.subtreeFlags&2064)!==0&&$!==null)$.return=E,fe=$;else e:for(E=M;fe!==null;){if(C=fe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:qc(9,C)}}catch(ge){ot(C,C.return,ge)}if(C===E){fe=null;break e}var re=C.sibling;if(re!==null){re.return=C.return,fe=re;break e}fe=C.return}}if(je=f,Ri(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Rs,r)}catch{}h=!0}return h}finally{Ve=l,Ln.transition=s}}return!1}function Dv(r,s,l){s=la(l,s),s=Xy(r,s,1),r=ki(r,s,1),s=en(),r!==null&&(yi(r,1,s),dn(r,s))}function ot(r,s,l){if(r.tag===3)Dv(r,r,l);else for(;s!==null;){if(s.tag===3){Dv(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ni===null||!Ni.has(h))){r=la(l,r),r=Jy(s,r,1),s=ki(s,r,1),r=en(),s!==null&&(yi(s,1,r),dn(s,r));break}}s=s.return}}function NS(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=en(),r.pingedLanes|=r.suspendedLanes&l,kt===r&&(Vt&l)===l&&(Et===4||Et===3&&(Vt&130023424)===Vt&&500>Ye()-Kf?$s(r,0):Wf|=l),dn(r,s)}function bv(r,s){s===0&&((r.mode&1)===0?s=1:(s=Vo,Vo<<=1,(Vo&130023424)===0&&(Vo=4194304)));var l=en();r=Kr(r,s),r!==null&&(yi(r,s,l),dn(r,l))}function OS(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),bv(r,l)}function DS(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),bv(r,l)}var Vv;Vv=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||ln.current)cn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return cn=!1,wS(r,s,l);cn=(r.flags&131072)!==0}else cn=!1,nt&&(s.flags&1048576)!==0&&py(s,Rc,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Bc(r,s),r=s.pendingProps;var f=ea(s,Bt.current);oa(s,l),f=Sf(null,s,h,r,f,l);var g=Cf();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,un(h)?(g=!0,Sc(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,yf(s),f.updater=jc,s.stateNode=f,f._reactInternals=s,Nf(s,h,r,l),s=Vf(null,s,h,!0,g,l)):(s.tag=0,nt&&g&&af(s),Zt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Bc(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=VS(h),r=Zn(h,r),f){case 0:s=bf(null,s,h,r,l);break e;case 1:s=av(null,s,h,r,l);break e;case 11:s=nv(null,s,h,r,l);break e;case 14:s=rv(null,s,h,Zn(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Zn(h,f),bf(r,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Zn(h,f),av(r,s,h,f,l);case 3:e:{if(lv(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,Iy(r,s),Dc(s,h,null,l);var E=s.memoizedState;if(h=E.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=la(Error(t(423)),s),s=uv(r,s,h,l,f);break e}else if(h!==f){f=la(Error(t(424)),s),s=uv(r,s,h,l,f);break e}else for(In=Si(s.stateNode.containerInfo.firstChild),Tn=s,nt=!0,Jn=null,l=Ey(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ra(),h===f){s=Gr(r,s,l);break e}Zt(r,s,h,l)}s=s.child}return s;case 5:return Ay(s),r===null&&cf(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,E=f.children,ef(h,f)?E=null:g!==null&&ef(h,g)&&(s.flags|=32),ov(r,s),Zt(r,s,E,l),s.child;case 6:return r===null&&cf(s),null;case 13:return cv(r,s,l);case 4:return vf(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=ia(s,null,h,l):Zt(r,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Zn(h,f),nv(r,s,h,f,l);case 7:return Zt(r,s,s.pendingProps,l),s.child;case 8:return Zt(r,s,s.pendingProps.children,l),s.child;case 12:return Zt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,E=f.value,Xe(xc,h._currentValue),h._currentValue=E,g!==null)if(Xn(g.value,E)){if(g.children===f.children&&!ln.current){s=Gr(r,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){E=g.child;for(var O=C.firstContext;O!==null;){if(O.context===h){if(g.tag===1){O=Qr(-1,l&-l),O.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var Z=q.pending;Z===null?O.next=O:(O.next=Z.next,Z.next=O),q.pending=O}}g.lanes|=l,O=g.alternate,O!==null&&(O.lanes|=l),mf(g.return,l,s),C.lanes|=l;break}O=O.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=l,C=E.alternate,C!==null&&(C.lanes|=l),mf(E,l,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Zt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,oa(s,l),f=Vn(f),h=h(f),s.flags|=1,Zt(r,s,h,l),s.child;case 14:return h=s.type,f=Zn(h,s.pendingProps),f=Zn(h.type,f),rv(r,s,h,f,l);case 15:return iv(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Zn(h,f),Bc(r,s),s.tag=1,un(h)?(r=!0,Sc(s)):r=!1,oa(s,l),Gy(s,h,f),Nf(s,h,f,l),Vf(null,s,h,!0,r,l);case 19:return dv(r,s,l);case 22:return sv(r,s,l)}throw Error(t(156,s.tag))};function Mv(r,s){return Do(r,s)}function bS(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(r,s,l,h){return new bS(r,s,l,h)}function tp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function VS(r){if(typeof r=="function")return tp(r)?1:0;if(r!=null){if(r=r.$$typeof,r===L)return 11;if(r===jt)return 14}return 2}function Vi(r,s){var l=r.alternate;return l===null?(l=Fn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Zc(r,s,l,h,f,g){var E=2;if(h=r,typeof r=="function")tp(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case D:return Hs(l.children,f,g,s);case S:E=8,f|=8;break;case A:return r=Fn(12,l,s,f|2),r.elementType=A,r.lanes=g,r;case k:return r=Fn(13,l,s,f),r.elementType=k,r.lanes=g,r;case lt:return r=Fn(19,l,s,f),r.elementType=lt,r.lanes=g,r;case Ke:return eh(l,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:E=10;break e;case V:E=9;break e;case L:E=11;break e;case jt:E=14;break e;case zt:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Fn(E,l,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function Hs(r,s,l,h){return r=Fn(7,r,h,s),r.lanes=l,r}function eh(r,s,l,h){return r=Fn(22,r,h,s),r.elementType=Ke,r.lanes=l,r.stateNode={isHidden:!1},r}function np(r,s,l){return r=Fn(6,r,null,s),r.lanes=l,r}function rp(r,s,l){return s=Fn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function MS(r,s,l,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gi(0),this.expirationTimes=gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function ip(r,s,l,h,f,g,E,C,O){return r=new MS(r,s,l,C,O),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Fn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},yf(g),r}function LS(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function Lv(r){if(!r)return Ai;r=r._reactInternals;e:{if(qn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(un(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(un(l))return hy(r,l,s)}return s}function Fv(r,s,l,h,f,g,E,C,O){return r=ip(l,h,!0,r,f,g,E,C,O),r.context=Lv(null),l=r.current,h=en(),f=Di(l),g=Qr(h,f),g.callback=s??null,ki(l,g,f),r.current.lanes=f,yi(r,f,h),dn(r,h),r}function th(r,s,l,h){var f=s.current,g=en(),E=Di(f);return l=Lv(l),s.context===null?s.context=l:s.pendingContext=l,s=Qr(g,E),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=ki(f,s,E),r!==null&&(nr(r,f,E,g),Oc(r,f,E)),E}function nh(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Uv(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function sp(r,s){Uv(r,s),(r=r.alternate)&&Uv(r,s)}function FS(){return null}var jv=typeof reportError=="function"?reportError:function(r){console.error(r)};function op(r){this._internalRoot=r}rh.prototype.render=op.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));th(r,s,null,null)},rh.prototype.unmount=op.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Bs(function(){th(null,r,null,null)}),s[$r]=null}};function rh(r){this._internalRoot=r}rh.prototype.unstable_scheduleHydration=function(r){if(r){var s=rc();r={blockedOn:null,target:r,priority:s};for(var l=0;l<mr.length&&s!==0&&s<mr[l].priority;l++);mr.splice(l,0,r),l===0&&oc(r)}};function ap(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ih(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function zv(){}function US(r,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var q=nh(E);g.call(q)}}var E=Fv(s,h,r,0,null,!1,!1,"",zv);return r._reactRootContainer=E,r[$r]=E.current,Nl(r.nodeType===8?r.parentNode:r),Bs(),E}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var C=h;h=function(){var q=nh(O);C.call(q)}}var O=ip(r,0,!1,null,null,!1,!1,"",zv);return r._reactRootContainer=O,r[$r]=O.current,Nl(r.nodeType===8?r.parentNode:r),Bs(function(){th(s,O,l,h)}),O}function sh(r,s,l,h,f){var g=l._reactRootContainer;if(g){var E=g;if(typeof f=="function"){var C=f;f=function(){var O=nh(E);C.call(O)}}th(s,E,r,f)}else E=US(l,s,r,f,h);return nh(E)}tc=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=mi(s.pendingLanes);l!==0&&(vi(s,l|1),dn(s,Ye()),(je&6)===0&&(ha=Ye()+500,Ri()))}break;case 13:Bs(function(){var h=Kr(r,1);if(h!==null){var f=en();nr(h,r,1,f)}}),sp(r,1)}},Mo=function(r){if(r.tag===13){var s=Kr(r,134217728);if(s!==null){var l=en();nr(s,r,134217728,l)}sp(r,134217728)}},nc=function(r){if(r.tag===13){var s=Di(r),l=Kr(r,s);if(l!==null){var h=en();nr(l,r,s,h)}sp(r,s)}},rc=function(){return Ve},ic=function(r,s){var l=Ve;try{return Ve=r,s()}finally{Ve=l}},Ro=function(r,s,l){switch(s){case"input":if(nl(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var f=Tc(h);if(!f)throw Error(t(90));Eo(h),nl(h,f)}}}break;case"textarea":Co(r,l);break;case"select":s=l.value,s!=null&&Vr(r,!!l.multiple,s,!1)}},Ts=Jf,dl=Bs;var jS={usingClientEntryPoint:!1,Events:[bl,Jo,Tc,fr,hl,Jf]},Ql={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zS={bundleType:Ql.bundleType,version:Ql.version,rendererPackageName:Ql.rendererPackageName,rendererConfig:Ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ml(r),r===null?null:r.stateNode},findFiberByHostInstance:Ql.findFiberByHostInstance||FS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{Rs=oh.inject(zS),vn=oh}catch{}}return fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jS,fn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ap(s))throw Error(t(200));return LS(r,s,null,l)},fn.createRoot=function(r,s){if(!ap(r))throw Error(t(299));var l=!1,h="",f=jv;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=ip(r,1,!1,null,null,l,!1,h,f),r[$r]=s.current,Nl(r.nodeType===8?r.parentNode:r),new op(s)},fn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ml(s),r=r===null?null:r.stateNode,r},fn.flushSync=function(r){return Bs(r)},fn.hydrate=function(r,s,l){if(!ih(s))throw Error(t(200));return sh(null,r,s,!0,l)},fn.hydrateRoot=function(r,s,l){if(!ap(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",E=jv;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),s=Fv(s,null,r,1,l??null,f,!1,g,E),r[$r]=s.current,Nl(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new rh(s)},fn.render=function(r,s,l){if(!ih(s))throw Error(t(200));return sh(null,r,s,!1,l)},fn.unmountComponentAtNode=function(r){if(!ih(r))throw Error(t(40));return r._reactRootContainer?(Bs(function(){sh(null,null,r,!1,function(){r._reactRootContainer=null,r[$r]=null})}),!0):!1},fn.unstable_batchedUpdates=Jf,fn.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!ih(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return sh(r,s,l,!1,h)},fn.version="18.3.1-next-f1338f8080-20240426",fn}var Yv;function yE(){if(Yv)return hp.exports;Yv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hp.exports=YS(),hp.exports}var Xv;function XS(){if(Xv)return lh;Xv=1;var n=yE();return lh.createRoot=n.createRoot,lh.hydrateRoot=n.hydrateRoot,lh}var JS=XS();const ZS=mE(JS);var pp={exports:{}},mp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function eC(){if(Jv)return mp;Jv=1;var n=td();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,o=n.useRef,a=n.useEffect,c=n.useMemo,d=n.useDebugValue;return mp.useSyncExternalStoreWithSelector=function(p,y,_,w,T){var R=o(null);if(R.current===null){var j={hasValue:!1,value:null};R.current=j}else j=R.current;R=c(function(){function P(oe){if(!W){if(W=!0,J=oe,oe=w(oe),T!==void 0&&j.hasValue){var ae=j.value;if(T(ae,oe))return ee=ae}return ee=oe}if(ae=ee,t(J,oe))return ae;var D=w(oe);return T!==void 0&&T(ae,D)?(J=oe,ae):(J=oe,ee=D)}var W=!1,J,ee,te=_===void 0?null:_;return[function(){return P(y())},te===null?void 0:function(){return P(te())}]},[y,_,w,T]);var U=i(p,R[0],R[1]);return a(function(){j.hasValue=!0,j.value=U},[U]),d(U),U},mp}var Zv;function tC(){return Zv||(Zv=1,pp.exports=eC()),pp.exports}tC();function nC(n){n()}function rC(){let n=null,e=null;return{clear(){n=null,e=null},notify(){nC(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const o=e={callback:t,next:null,prev:e};return o.prev?o.prev.next=o:n=o,function(){!i||n===null||(i=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:n=o.next)}}}}var e_={notify(){},get:()=>[]};function iC(n,e){let t,i=e_,o=0,a=!1;function c(U){_();const P=i.subscribe(U);let W=!1;return()=>{W||(W=!0,P(),w())}}function d(){i.notify()}function p(){j.onStateChange&&j.onStateChange()}function y(){return a}function _(){o++,t||(t=n.subscribe(p),i=rC())}function w(){o--,t&&o===0&&(t(),t=void 0,i.clear(),i=e_)}function T(){a||(a=!0,_())}function R(){a&&(a=!1,w())}const j={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:y,trySubscribe:T,tryUnsubscribe:R,getListeners:()=>i};return j}var sC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oC=sC(),aC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",lC=aC(),uC=()=>oC||lC?Y.useLayoutEffect:Y.useEffect,cC=uC(),gp=Symbol.for("react-redux-context"),yp=typeof globalThis<"u"?globalThis:{};function hC(){if(!Y.createContext)return{};const n=yp[gp]??(yp[gp]=new Map);let e=n.get(Y.createContext);return e||(e=Y.createContext(null),n.set(Y.createContext,e)),e}var dC=hC();function fC(n){const{children:e,context:t,serverState:i,store:o}=n,a=Y.useMemo(()=>{const p=iC(o);return{store:o,subscription:p,getServerState:i?()=>i:void 0}},[o,i]),c=Y.useMemo(()=>o.getState(),[o]);cC(()=>{const{subscription:p}=a;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==o.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[a,c]);const d=t||dC;return Y.createElement(d.Provider,{value:a},e)}var pC=fC,Ha=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ro=typeof window>"u"||"Deno"in globalThis;function rn(){}function mC(n,e){return typeof n=="function"?n(e):n}function Vp(n){return typeof n=="number"&&n>=0&&n!==1/0}function vE(n,e){return Math.max(n+(e||0)-Date.now(),0)}function va(n,e){return typeof n=="function"?n(e):n}function sr(n,e){return typeof n=="function"?n(e):n}function t_(n,e){const{type:t="all",exact:i,fetchStatus:o,predicate:a,queryKey:c,stale:d}=n;if(c){if(i){if(e.queryHash!==Nm(c,e.options))return!1}else if(!fu(e.queryKey,c))return!1}if(t!=="all"){const p=e.isActive();if(t==="active"&&!p||t==="inactive"&&p)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||o&&o!==e.state.fetchStatus||a&&!a(e))}function n_(n,e){const{exact:t,status:i,predicate:o,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(io(e.options.mutationKey)!==io(a))return!1}else if(!fu(e.options.mutationKey,a))return!1}return!(i&&e.state.status!==i||o&&!o(e))}function Nm(n,e){return((e==null?void 0:e.queryKeyHashFn)||io)(n)}function io(n){return JSON.stringify(n,(e,t)=>Mp(t)?Object.keys(t).sort().reduce((i,o)=>(i[o]=t[o],i),{}):t)}function fu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>fu(n[t],e[t])):!1}function _E(n,e){if(n===e)return n;const t=r_(n)&&r_(e);if(t||Mp(n)&&Mp(e)){const i=t?n:Object.keys(n),o=i.length,a=t?e:Object.keys(e),c=a.length,d=t?[]:{};let p=0;for(let y=0;y<c;y++){const _=t?y:a[y];(!t&&i.includes(_)||t)&&n[_]===void 0&&e[_]===void 0?(d[_]=void 0,p++):(d[_]=_E(n[_],e[_]),d[_]===n[_]&&n[_]!==void 0&&p++)}return o===c&&p===o?n:d}return e}function kh(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function r_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Mp(n){if(!i_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!i_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function i_(n){return Object.prototype.toString.call(n)==="[object Object]"}function gC(n){return new Promise(e=>{setTimeout(e,n)})}function Lp(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?_E(n,e):e}function yC(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function vC(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var Om=Symbol();function wE(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Om?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function EE(n,e){return typeof n=="function"?n(...e):!!n}var Gs,qi,Ia,sE,_C=(sE=class extends Ha{constructor(){super();we(this,Gs);we(this,qi);we(this,Ia);ue(this,Ia,e=>{if(!ro&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){N(this,qi)||this.setEventListener(N(this,Ia))}onUnsubscribe(){var e;this.hasListeners()||((e=N(this,qi))==null||e.call(this),ue(this,qi,void 0))}setEventListener(e){var t;ue(this,Ia,e),(t=N(this,qi))==null||t.call(this),ue(this,qi,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){N(this,Gs)!==e&&(ue(this,Gs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof N(this,Gs)=="boolean"?N(this,Gs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Gs=new WeakMap,qi=new WeakMap,Ia=new WeakMap,sE),Dm=new _C,Sa,Hi,Ca,oE,wC=(oE=class extends Ha{constructor(){super();we(this,Sa,!0);we(this,Hi);we(this,Ca);ue(this,Ca,e=>{if(!ro&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){N(this,Hi)||this.setEventListener(N(this,Ca))}onUnsubscribe(){var e;this.hasListeners()||((e=N(this,Hi))==null||e.call(this),ue(this,Hi,void 0))}setEventListener(e){var t;ue(this,Ca,e),(t=N(this,Hi))==null||t.call(this),ue(this,Hi,e(this.setOnline.bind(this)))}setOnline(e){N(this,Sa)!==e&&(ue(this,Sa,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return N(this,Sa)}},Sa=new WeakMap,Hi=new WeakMap,Ca=new WeakMap,oE),xh=new wC;function Fp(){let n,e;const t=new Promise((o,a)=>{n=o,e=a});t.status="pending",t.catch(()=>{});function i(o){Object.assign(t,o),delete t.resolve,delete t.reject}return t.resolve=o=>{i({status:"fulfilled",value:o}),n(o)},t.reject=o=>{i({status:"rejected",reason:o}),e(o)},t}function EC(n){return Math.min(1e3*2**n,3e4)}function TE(n){return(n??"online")==="online"?xh.isOnline():!0}var IE=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function vp(n){return n instanceof IE}function SE(n){let e=!1,t=0,i=!1,o;const a=Fp(),c=U=>{var P;i||(T(new IE(U)),(P=n.abort)==null||P.call(n))},d=()=>{e=!0},p=()=>{e=!1},y=()=>Dm.isFocused()&&(n.networkMode==="always"||xh.isOnline())&&n.canRun(),_=()=>TE(n.networkMode)&&n.canRun(),w=U=>{var P;i||(i=!0,(P=n.onSuccess)==null||P.call(n,U),o==null||o(),a.resolve(U))},T=U=>{var P;i||(i=!0,(P=n.onError)==null||P.call(n,U),o==null||o(),a.reject(U))},R=()=>new Promise(U=>{var P;o=W=>{(i||y())&&U(W)},(P=n.onPause)==null||P.call(n)}).then(()=>{var U;o=void 0,i||(U=n.onContinue)==null||U.call(n)}),j=()=>{if(i)return;let U;const P=t===0?n.initialPromise:void 0;try{U=P??n.fn()}catch(W){U=Promise.reject(W)}Promise.resolve(U).then(w).catch(W=>{var ae;if(i)return;const J=n.retry??(ro?0:3),ee=n.retryDelay??EC,te=typeof ee=="function"?ee(t,W):ee,oe=J===!0||typeof J=="number"&&t<J||typeof J=="function"&&J(t,W);if(e||!oe){T(W);return}t++,(ae=n.onFail)==null||ae.call(n,t,W),gC(te).then(()=>y()?void 0:R()).then(()=>{e?T(W):j()})})};return{promise:a,cancel:c,continue:()=>(o==null||o(),a),cancelRetry:d,continueRetry:p,canStart:_,start:()=>(_()?j():R().then(j),a)}}var TC=n=>setTimeout(n,0);function IC(){let n=[],e=0,t=d=>{d()},i=d=>{d()},o=TC;const a=d=>{e?n.push(d):o(()=>{t(d)})},c=()=>{const d=n;n=[],d.length&&o(()=>{i(()=>{d.forEach(p=>{t(p)})})})};return{batch:d=>{let p;e++;try{p=d()}finally{e--,e||c()}return p},batchCalls:d=>(...p)=>{a(()=>{d(...p)})},schedule:a,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{i=d},setScheduler:d=>{o=d}}}var Tt=IC(),Ys,aE,CE=(aE=class{constructor(){we(this,Ys)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vp(this.gcTime)&&ue(this,Ys,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ro?1/0:5*60*1e3))}clearGcTimeout(){N(this,Ys)&&(clearTimeout(N(this,Ys)),ue(this,Ys,void 0))}},Ys=new WeakMap,aE),Aa,Ra,Un,Xs,Kt,ku,Js,rr,Xr,lE,SC=(lE=class extends CE{constructor(t){super();we(this,rr);we(this,Aa);we(this,Ra);we(this,Un);we(this,Xs);we(this,Kt);we(this,ku);we(this,Js);ue(this,Js,!1),ue(this,ku,t.defaultOptions),this.setOptions(t.options),this.observers=[],ue(this,Xs,t.client),ue(this,Un,N(this,Xs).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ue(this,Aa,CC(this.options)),this.state=t.state??N(this,Aa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=N(this,Kt))==null?void 0:t.promise}setOptions(t){this.options={...N(this,ku),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,Un).remove(this)}setData(t,i){const o=Lp(this.state.data,t,this.options);return Pe(this,rr,Xr).call(this,{data:o,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt,manual:i==null?void 0:i.manual}),o}setState(t,i){Pe(this,rr,Xr).call(this,{type:"setState",state:t,setStateOptions:i})}cancel(t){var o,a;const i=(o=N(this,Kt))==null?void 0:o.promise;return(a=N(this,Kt))==null||a.cancel(t),i?i.then(rn).catch(rn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,Aa))}isActive(){return this.observers.some(t=>sr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Om||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!vE(this.state.dataUpdatedAt,t)}onFocus(){var i;const t=this.observers.find(o=>o.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(i=N(this,Kt))==null||i.continue()}onOnline(){var i;const t=this.observers.find(o=>o.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(i=N(this,Kt))==null||i.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),N(this,Un).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(i=>i!==t),this.observers.length||(N(this,Kt)&&(N(this,Js)?N(this,Kt).cancel({revert:!0}):N(this,Kt).cancelRetry()),this.scheduleGc()),N(this,Un).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pe(this,rr,Xr).call(this,{type:"invalidate"})}fetch(t,i){var y,_,w;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(N(this,Kt))return N(this,Kt).continueRetry(),N(this,Kt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find(R=>R.options.queryFn);T&&this.setOptions(T.options)}const o=new AbortController,a=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(ue(this,Js,!0),o.signal)})},c=()=>{const T=wE(this.options,i),R={client:N(this,Xs),queryKey:this.queryKey,meta:this.meta};return a(R),ue(this,Js,!1),this.options.persister?this.options.persister(T,R,this):T(R)},d={fetchOptions:i,options:this.options,queryKey:this.queryKey,client:N(this,Xs),state:this.state,fetchFn:c};a(d),(y=this.options.behavior)==null||y.onFetch(d,this),ue(this,Ra,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((_=d.fetchOptions)==null?void 0:_.meta))&&Pe(this,rr,Xr).call(this,{type:"fetch",meta:(w=d.fetchOptions)==null?void 0:w.meta});const p=T=>{var R,j,U,P;vp(T)&&T.silent||Pe(this,rr,Xr).call(this,{type:"error",error:T}),vp(T)||((j=(R=N(this,Un).config).onError)==null||j.call(R,T,this),(P=(U=N(this,Un).config).onSettled)==null||P.call(U,this.state.data,T,this)),this.scheduleGc()};return ue(this,Kt,SE({initialPromise:i==null?void 0:i.initialPromise,fn:d.fetchFn,abort:o.abort.bind(o),onSuccess:T=>{var R,j,U,P;if(T===void 0){p(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(T)}catch(W){p(W);return}(j=(R=N(this,Un).config).onSuccess)==null||j.call(R,T,this),(P=(U=N(this,Un).config).onSettled)==null||P.call(U,T,this.state.error,this),this.scheduleGc()},onError:p,onFail:(T,R)=>{Pe(this,rr,Xr).call(this,{type:"failed",failureCount:T,error:R})},onPause:()=>{Pe(this,rr,Xr).call(this,{type:"pause"})},onContinue:()=>{Pe(this,rr,Xr).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0})),N(this,Kt).start()}},Aa=new WeakMap,Ra=new WeakMap,Un=new WeakMap,Xs=new WeakMap,Kt=new WeakMap,ku=new WeakMap,Js=new WeakMap,rr=new WeakSet,Xr=function(t){const i=o=>{switch(t.type){case"failed":return{...o,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...AE(o.data,this.options),fetchMeta:t.meta??null};case"success":return{...o,data:t.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return vp(a)&&a.revert&&N(this,Ra)?{...N(this,Ra),fetchStatus:"idle"}:{...o,error:a,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...t.state}}};this.state=i(this.state),Tt.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),N(this,Un).notify({query:this,type:"updated",action:t})})},lE);function AE(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TE(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function CC(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Cr,uE,AC=(uE=class extends Ha{constructor(e={}){super();we(this,Cr);this.config=e,ue(this,Cr,new Map)}build(e,t,i){const o=t.queryKey,a=t.queryHash??Nm(o,t);let c=this.get(a);return c||(c=new SC({client:e,queryKey:o,queryHash:a,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(o)}),this.add(c)),c}add(e){N(this,Cr).has(e.queryHash)||(N(this,Cr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=N(this,Cr).get(e.queryHash);t&&(e.destroy(),t===e&&N(this,Cr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Tt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return N(this,Cr).get(e)}getAll(){return[...N(this,Cr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(i=>t_(t,i))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(i=>t_(e,i)):t}notify(e){Tt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Tt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Tt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Cr=new WeakMap,uE),Ar,tn,Zs,Rr,Fi,cE,RC=(cE=class extends CE{constructor(t){super();we(this,Rr);we(this,Ar);we(this,tn);we(this,Zs);this.mutationId=t.mutationId,ue(this,tn,t.mutationCache),ue(this,Ar,[]),this.state=t.state||RE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){N(this,Ar).includes(t)||(N(this,Ar).push(t),this.clearGcTimeout(),N(this,tn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ue(this,Ar,N(this,Ar).filter(i=>i!==t)),this.scheduleGc(),N(this,tn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){N(this,Ar).length||(this.state.status==="pending"?this.scheduleGc():N(this,tn).remove(this))}continue(){var t;return((t=N(this,Zs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,d,p,y,_,w,T,R,j,U,P,W,J,ee,te,oe,ae,D,S,A;const i=()=>{Pe(this,Rr,Fi).call(this,{type:"continue"})};ue(this,Zs,SE({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(x,V)=>{Pe(this,Rr,Fi).call(this,{type:"failed",failureCount:x,error:V})},onPause:()=>{Pe(this,Rr,Fi).call(this,{type:"pause"})},onContinue:i,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,tn).canRun(this)}));const o=this.state.status==="pending",a=!N(this,Zs).canStart();try{if(o)i();else{Pe(this,Rr,Fi).call(this,{type:"pending",variables:t,isPaused:a}),await((d=(c=N(this,tn).config).onMutate)==null?void 0:d.call(c,t,this));const V=await((y=(p=this.options).onMutate)==null?void 0:y.call(p,t));V!==this.state.context&&Pe(this,Rr,Fi).call(this,{type:"pending",context:V,variables:t,isPaused:a})}const x=await N(this,Zs).start();return await((w=(_=N(this,tn).config).onSuccess)==null?void 0:w.call(_,x,t,this.state.context,this)),await((R=(T=this.options).onSuccess)==null?void 0:R.call(T,x,t,this.state.context)),await((U=(j=N(this,tn).config).onSettled)==null?void 0:U.call(j,x,null,this.state.variables,this.state.context,this)),await((W=(P=this.options).onSettled)==null?void 0:W.call(P,x,null,t,this.state.context)),Pe(this,Rr,Fi).call(this,{type:"success",data:x}),x}catch(x){try{throw await((ee=(J=N(this,tn).config).onError)==null?void 0:ee.call(J,x,t,this.state.context,this)),await((oe=(te=this.options).onError)==null?void 0:oe.call(te,x,t,this.state.context)),await((D=(ae=N(this,tn).config).onSettled)==null?void 0:D.call(ae,void 0,x,this.state.variables,this.state.context,this)),await((A=(S=this.options).onSettled)==null?void 0:A.call(S,void 0,x,t,this.state.context)),x}finally{Pe(this,Rr,Fi).call(this,{type:"error",error:x})}}finally{N(this,tn).runNext(this)}}},Ar=new WeakMap,tn=new WeakMap,Zs=new WeakMap,Rr=new WeakSet,Fi=function(t){const i=o=>{switch(t.type){case"failed":return{...o,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...o,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:t.error,failureCount:o.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=i(this.state),Tt.batch(()=>{N(this,Ar).forEach(o=>{o.onMutationUpdate(t)}),N(this,tn).notify({mutation:this,type:"updated",action:t})})},cE);function RE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Jr,ir,xu,hE,PC=(hE=class extends Ha{constructor(e={}){super();we(this,Jr);we(this,ir);we(this,xu);this.config=e,ue(this,Jr,new Set),ue(this,ir,new Map),ue(this,xu,0)}build(e,t,i){const o=new RC({mutationCache:this,mutationId:++ah(this,xu)._,options:e.defaultMutationOptions(t),state:i});return this.add(o),o}add(e){N(this,Jr).add(e);const t=uh(e);if(typeof t=="string"){const i=N(this,ir).get(t);i?i.push(e):N(this,ir).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(N(this,Jr).delete(e)){const t=uh(e);if(typeof t=="string"){const i=N(this,ir).get(t);if(i)if(i.length>1){const o=i.indexOf(e);o!==-1&&i.splice(o,1)}else i[0]===e&&N(this,ir).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=uh(e);if(typeof t=="string"){const i=N(this,ir).get(t),o=i==null?void 0:i.find(a=>a.state.status==="pending");return!o||o===e}else return!0}runNext(e){var i;const t=uh(e);if(typeof t=="string"){const o=(i=N(this,ir).get(t))==null?void 0:i.find(a=>a!==e&&a.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tt.batch(()=>{N(this,Jr).forEach(e=>{this.notify({type:"removed",mutation:e})}),N(this,Jr).clear(),N(this,ir).clear()})}getAll(){return Array.from(N(this,Jr))}find(e){const t={exact:!0,...e};return this.getAll().find(i=>n_(t,i))}findAll(e={}){return this.getAll().filter(t=>n_(e,t))}notify(e){Tt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Tt.batch(()=>Promise.all(e.map(t=>t.continue().catch(rn))))}},Jr=new WeakMap,ir=new WeakMap,xu=new WeakMap,hE);function uh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function s_(n){return{onFetch:(e,t)=>{var _,w,T,R,j;const i=e.options,o=(T=(w=(_=e.fetchOptions)==null?void 0:_.meta)==null?void 0:w.fetchMore)==null?void 0:T.direction,a=((R=e.state.data)==null?void 0:R.pages)||[],c=((j=e.state.data)==null?void 0:j.pageParams)||[];let d={pages:[],pageParams:[]},p=0;const y=async()=>{let U=!1;const P=ee=>{Object.defineProperty(ee,"signal",{enumerable:!0,get:()=>(e.signal.aborted?U=!0:e.signal.addEventListener("abort",()=>{U=!0}),e.signal)})},W=wE(e.options,e.fetchOptions),J=async(ee,te,oe)=>{if(U)return Promise.reject();if(te==null&&ee.pages.length)return Promise.resolve(ee);const ae={client:e.client,queryKey:e.queryKey,pageParam:te,direction:oe?"backward":"forward",meta:e.options.meta};P(ae);const D=await W(ae),{maxPages:S}=e.options,A=oe?vC:yC;return{pages:A(ee.pages,D,S),pageParams:A(ee.pageParams,te,S)}};if(o&&a.length){const ee=o==="backward",te=ee?kC:o_,oe={pages:a,pageParams:c},ae=te(i,oe);d=await J(oe,ae,ee)}else{const ee=n??a.length;do{const te=p===0?c[0]??i.initialPageParam:o_(i,d);if(p>0&&te==null)break;d=await J(d,te),p++}while(p<ee)}return d};e.options.persister?e.fetchFn=()=>{var U,P;return(P=(U=e.options).persister)==null?void 0:P.call(U,y,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=y}}}function o_(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function kC(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var at,Wi,Ki,Pa,ka,Qi,xa,Na,dE,PE=(dE=class{constructor(n={}){we(this,at);we(this,Wi);we(this,Ki);we(this,Pa);we(this,ka);we(this,Qi);we(this,xa);we(this,Na);ue(this,at,n.queryCache||new AC),ue(this,Wi,n.mutationCache||new PC),ue(this,Ki,n.defaultOptions||{}),ue(this,Pa,new Map),ue(this,ka,new Map),ue(this,Qi,0)}mount(){ah(this,Qi)._++,N(this,Qi)===1&&(ue(this,xa,Dm.subscribe(async n=>{n&&(await this.resumePausedMutations(),N(this,at).onFocus())})),ue(this,Na,xh.subscribe(async n=>{n&&(await this.resumePausedMutations(),N(this,at).onOnline())})))}unmount(){var n,e;ah(this,Qi)._--,N(this,Qi)===0&&((n=N(this,xa))==null||n.call(this),ue(this,xa,void 0),(e=N(this,Na))==null||e.call(this),ue(this,Na,void 0))}isFetching(n){return N(this,at).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return N(this,Wi).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=N(this,at).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=N(this,at).build(this,e),i=t.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(va(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return N(this,at).findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),o=N(this,at).get(i.queryHash),a=o==null?void 0:o.state.data,c=mC(e,a);if(c!==void 0)return N(this,at).build(this,i).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return Tt.batch(()=>N(this,at).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=N(this,at).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=N(this,at);Tt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=N(this,at);return Tt.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},i=Tt.batch(()=>N(this,at).findAll(n).map(o=>o.cancel(t)));return Promise.all(i).then(rn).catch(rn)}invalidateQueries(n,e={}){return Tt.batch(()=>(N(this,at).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},i=Tt.batch(()=>N(this,at).findAll(n).filter(o=>!o.isDisabled()).map(o=>{let a=o.fetch(void 0,t);return t.throwOnError||(a=a.catch(rn)),o.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(i).then(rn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=N(this,at).build(this,e);return t.isStaleByTime(va(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(rn).catch(rn)}fetchInfiniteQuery(n){return n.behavior=s_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(rn).catch(rn)}ensureInfiniteQueryData(n){return n.behavior=s_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return xh.isOnline()?N(this,Wi).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,at)}getMutationCache(){return N(this,Wi)}getDefaultOptions(){return N(this,Ki)}setDefaultOptions(n){ue(this,Ki,n)}setQueryDefaults(n,e){N(this,Pa).set(io(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...N(this,Pa).values()],t={};return e.forEach(i=>{fu(n,i.queryKey)&&Object.assign(t,i.defaultOptions)}),t}setMutationDefaults(n,e){N(this,ka).set(io(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...N(this,ka).values()],t={};return e.forEach(i=>{fu(n,i.mutationKey)&&Object.assign(t,i.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...N(this,Ki).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Nm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Om&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...N(this,Ki).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){N(this,at).clear(),N(this,Wi).clear()}},at=new WeakMap,Wi=new WeakMap,Ki=new WeakMap,Pa=new WeakMap,ka=new WeakMap,Qi=new WeakMap,xa=new WeakMap,Na=new WeakMap,dE),pn,Me,Nu,nn,eo,Oa,Gi,Yi,Ou,Da,ba,to,no,Xi,Va,qe,Yl,Up,jp,zp,Bp,$p,qp,Hp,kE,fE,xC=(fE=class extends Ha{constructor(e,t){super();we(this,qe);we(this,pn);we(this,Me);we(this,Nu);we(this,nn);we(this,eo);we(this,Oa);we(this,Gi);we(this,Yi);we(this,Ou);we(this,Da);we(this,ba);we(this,to);we(this,no);we(this,Xi);we(this,Va,new Set);this.options=t,ue(this,pn,e),ue(this,Yi,null),ue(this,Gi,Fp()),this.options.experimental_prefetchInRender||N(this,Gi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,Me).addObserver(this),a_(N(this,Me),this.options)?Pe(this,qe,Yl).call(this):this.updateResult(),Pe(this,qe,Bp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wp(N(this,Me),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wp(N(this,Me),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pe(this,qe,$p).call(this),Pe(this,qe,qp).call(this),N(this,Me).removeObserver(this)}setOptions(e){const t=this.options,i=N(this,Me);if(this.options=N(this,pn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof sr(this.options.enabled,N(this,Me))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pe(this,qe,Hp).call(this),N(this,Me).setOptions(this.options),t._defaulted&&!kh(this.options,t)&&N(this,pn).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,Me),observer:this});const o=this.hasListeners();o&&l_(N(this,Me),i,this.options,t)&&Pe(this,qe,Yl).call(this),this.updateResult(),o&&(N(this,Me)!==i||sr(this.options.enabled,N(this,Me))!==sr(t.enabled,N(this,Me))||va(this.options.staleTime,N(this,Me))!==va(t.staleTime,N(this,Me)))&&Pe(this,qe,Up).call(this);const a=Pe(this,qe,jp).call(this);o&&(N(this,Me)!==i||sr(this.options.enabled,N(this,Me))!==sr(t.enabled,N(this,Me))||a!==N(this,Xi))&&Pe(this,qe,zp).call(this,a)}getOptimisticResult(e){const t=N(this,pn).getQueryCache().build(N(this,pn),e),i=this.createResult(t,e);return OC(this,i)&&(ue(this,nn,i),ue(this,Oa,this.options),ue(this,eo,N(this,Me).state)),i}getCurrentResult(){return N(this,nn)}trackResult(e,t){return new Proxy(e,{get:(i,o)=>(this.trackProp(o),t==null||t(o),Reflect.get(i,o))})}trackProp(e){N(this,Va).add(e)}getCurrentQuery(){return N(this,Me)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=N(this,pn).defaultQueryOptions(e),i=N(this,pn).getQueryCache().build(N(this,pn),t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return Pe(this,qe,Yl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,nn)))}createResult(e,t){var A;const i=N(this,Me),o=this.options,a=N(this,nn),c=N(this,eo),d=N(this,Oa),y=e!==i?e.state:N(this,Nu),{state:_}=e;let w={..._},T=!1,R;if(t._optimisticResults){const x=this.hasListeners(),V=!x&&a_(e,t),L=x&&l_(e,i,t,o);(V||L)&&(w={...w,...AE(_.data,e.options)}),t._optimisticResults==="isRestoring"&&(w.fetchStatus="idle")}let{error:j,errorUpdatedAt:U,status:P}=w;R=w.data;let W=!1;if(t.placeholderData!==void 0&&R===void 0&&P==="pending"){let x;a!=null&&a.isPlaceholderData&&t.placeholderData===(d==null?void 0:d.placeholderData)?(x=a.data,W=!0):x=typeof t.placeholderData=="function"?t.placeholderData((A=N(this,ba))==null?void 0:A.state.data,N(this,ba)):t.placeholderData,x!==void 0&&(P="success",R=Lp(a==null?void 0:a.data,x,t),T=!0)}if(t.select&&R!==void 0&&!W)if(a&&R===(c==null?void 0:c.data)&&t.select===N(this,Ou))R=N(this,Da);else try{ue(this,Ou,t.select),R=t.select(R),R=Lp(a==null?void 0:a.data,R,t),ue(this,Da,R),ue(this,Yi,null)}catch(x){ue(this,Yi,x)}N(this,Yi)&&(j=N(this,Yi),R=N(this,Da),U=Date.now(),P="error");const J=w.fetchStatus==="fetching",ee=P==="pending",te=P==="error",oe=ee&&J,ae=R!==void 0,S={status:P,fetchStatus:w.fetchStatus,isPending:ee,isSuccess:P==="success",isError:te,isInitialLoading:oe,isLoading:oe,data:R,dataUpdatedAt:w.dataUpdatedAt,error:j,errorUpdatedAt:U,failureCount:w.fetchFailureCount,failureReason:w.fetchFailureReason,errorUpdateCount:w.errorUpdateCount,isFetched:w.dataUpdateCount>0||w.errorUpdateCount>0,isFetchedAfterMount:w.dataUpdateCount>y.dataUpdateCount||w.errorUpdateCount>y.errorUpdateCount,isFetching:J,isRefetching:J&&!ee,isLoadingError:te&&!ae,isPaused:w.fetchStatus==="paused",isPlaceholderData:T,isRefetchError:te&&ae,isStale:bm(e,t),refetch:this.refetch,promise:N(this,Gi)};if(this.options.experimental_prefetchInRender){const x=k=>{S.status==="error"?k.reject(S.error):S.data!==void 0&&k.resolve(S.data)},V=()=>{const k=ue(this,Gi,S.promise=Fp());x(k)},L=N(this,Gi);switch(L.status){case"pending":e.queryHash===i.queryHash&&x(L);break;case"fulfilled":(S.status==="error"||S.data!==L.value)&&V();break;case"rejected":(S.status!=="error"||S.error!==L.reason)&&V();break}}return S}updateResult(){const e=N(this,nn),t=this.createResult(N(this,Me),this.options);if(ue(this,eo,N(this,Me).state),ue(this,Oa,this.options),N(this,eo).data!==void 0&&ue(this,ba,N(this,Me)),kh(t,e))return;ue(this,nn,t);const i=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!N(this,Va).size)return!0;const c=new Set(a??N(this,Va));return this.options.throwOnError&&c.add("error"),Object.keys(N(this,nn)).some(d=>{const p=d;return N(this,nn)[p]!==e[p]&&c.has(p)})};Pe(this,qe,kE).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pe(this,qe,Bp).call(this)}},pn=new WeakMap,Me=new WeakMap,Nu=new WeakMap,nn=new WeakMap,eo=new WeakMap,Oa=new WeakMap,Gi=new WeakMap,Yi=new WeakMap,Ou=new WeakMap,Da=new WeakMap,ba=new WeakMap,to=new WeakMap,no=new WeakMap,Xi=new WeakMap,Va=new WeakMap,qe=new WeakSet,Yl=function(e){Pe(this,qe,Hp).call(this);let t=N(this,Me).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(rn)),t},Up=function(){Pe(this,qe,$p).call(this);const e=va(this.options.staleTime,N(this,Me));if(ro||N(this,nn).isStale||!Vp(e))return;const i=vE(N(this,nn).dataUpdatedAt,e)+1;ue(this,to,setTimeout(()=>{N(this,nn).isStale||this.updateResult()},i))},jp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,Me)):this.options.refetchInterval)??!1},zp=function(e){Pe(this,qe,qp).call(this),ue(this,Xi,e),!(ro||sr(this.options.enabled,N(this,Me))===!1||!Vp(N(this,Xi))||N(this,Xi)===0)&&ue(this,no,setInterval(()=>{(this.options.refetchIntervalInBackground||Dm.isFocused())&&Pe(this,qe,Yl).call(this)},N(this,Xi)))},Bp=function(){Pe(this,qe,Up).call(this),Pe(this,qe,zp).call(this,Pe(this,qe,jp).call(this))},$p=function(){N(this,to)&&(clearTimeout(N(this,to)),ue(this,to,void 0))},qp=function(){N(this,no)&&(clearInterval(N(this,no)),ue(this,no,void 0))},Hp=function(){const e=N(this,pn).getQueryCache().build(N(this,pn),this.options);if(e===N(this,Me))return;const t=N(this,Me);ue(this,Me,e),ue(this,Nu,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},kE=function(e){Tt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(N(this,nn))}),N(this,pn).getQueryCache().notify({query:N(this,Me),type:"observerResultsUpdated"})})},fE);function NC(n,e){return sr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function a_(n,e){return NC(n,e)||n.state.data!==void 0&&Wp(n,e,e.refetchOnMount)}function Wp(n,e,t){if(sr(e.enabled,n)!==!1){const i=typeof t=="function"?t(n):t;return i==="always"||i!==!1&&bm(n,e)}return!1}function l_(n,e,t,i){return(n!==e||sr(i.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&bm(n,t)}function bm(n,e){return sr(e.enabled,n)!==!1&&n.isStaleByTime(va(e.staleTime,n))}function OC(n,e){return!kh(n.getCurrentResult(),e)}var Ji,Zi,mn,Zr,oi,vh,Kp,pE,DC=(pE=class extends Ha{constructor(t,i){super();we(this,oi);we(this,Ji);we(this,Zi);we(this,mn);we(this,Zr);ue(this,Ji,t),this.setOptions(i),this.bindMethods(),Pe(this,oi,vh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var o;const i=this.options;this.options=N(this,Ji).defaultMutationOptions(t),kh(this.options,i)||N(this,Ji).getMutationCache().notify({type:"observerOptionsUpdated",mutation:N(this,mn),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&io(i.mutationKey)!==io(this.options.mutationKey)?this.reset():((o=N(this,mn))==null?void 0:o.state.status)==="pending"&&N(this,mn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=N(this,mn))==null||t.removeObserver(this)}onMutationUpdate(t){Pe(this,oi,vh).call(this),Pe(this,oi,Kp).call(this,t)}getCurrentResult(){return N(this,Zi)}reset(){var t;(t=N(this,mn))==null||t.removeObserver(this),ue(this,mn,void 0),Pe(this,oi,vh).call(this),Pe(this,oi,Kp).call(this)}mutate(t,i){var o;return ue(this,Zr,i),(o=N(this,mn))==null||o.removeObserver(this),ue(this,mn,N(this,Ji).getMutationCache().build(N(this,Ji),this.options)),N(this,mn).addObserver(this),N(this,mn).execute(t)}},Ji=new WeakMap,Zi=new WeakMap,mn=new WeakMap,Zr=new WeakMap,oi=new WeakSet,vh=function(){var i;const t=((i=N(this,mn))==null?void 0:i.state)??RE();ue(this,Zi,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Kp=function(t){Tt.batch(()=>{var i,o,a,c,d,p,y,_;if(N(this,Zr)&&this.hasListeners()){const w=N(this,Zi).variables,T=N(this,Zi).context;(t==null?void 0:t.type)==="success"?((o=(i=N(this,Zr)).onSuccess)==null||o.call(i,t.data,w,T),(c=(a=N(this,Zr)).onSettled)==null||c.call(a,t.data,null,w,T)):(t==null?void 0:t.type)==="error"&&((p=(d=N(this,Zr)).onError)==null||p.call(d,t.error,w,T),(_=(y=N(this,Zr)).onSettled)==null||_.call(y,void 0,t.error,w,T))}this.listeners.forEach(w=>{w(N(this,Zi))})})},pE),xE=Y.createContext(void 0),nd=n=>{const e=Y.useContext(xE);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},NE=({client:n,children:e})=>(Y.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),b.jsx(xE.Provider,{value:n,children:e})),OE=Y.createContext(!1),bC=()=>Y.useContext(OE);OE.Provider;function VC(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var MC=Y.createContext(VC()),LC=()=>Y.useContext(MC),FC=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},UC=n=>{Y.useEffect(()=>{n.clearReset()},[n])},jC=({result:n,errorResetBoundary:e,throwOnError:t,query:i,suspense:o})=>n.isError&&!e.isReset()&&!n.isFetching&&i&&(o&&n.data===void 0||EE(t,[n.error,i])),zC=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},BC=(n,e)=>n.isLoading&&n.isFetching&&!e,$C=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,u_=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function qC(n,e,t){var w,T,R,j,U;const i=nd(),o=bC(),a=LC(),c=i.defaultQueryOptions(n);(T=(w=i.getDefaultOptions().queries)==null?void 0:w._experimental_beforeQuery)==null||T.call(w,c),c._optimisticResults=o?"isRestoring":"optimistic",zC(c),FC(c,a),UC(a);const d=!i.getQueryCache().get(c.queryHash),[p]=Y.useState(()=>new e(i,c)),y=p.getOptimisticResult(c),_=!o&&n.subscribed!==!1;if(Y.useSyncExternalStore(Y.useCallback(P=>{const W=_?p.subscribe(Tt.batchCalls(P)):rn;return p.updateResult(),W},[p,_]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),Y.useEffect(()=>{p.setOptions(c)},[c,p]),$C(c,y))throw u_(c,p,a);if(jC({result:y,errorResetBoundary:a,throwOnError:c.throwOnError,query:i.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw y.error;if((j=(R=i.getDefaultOptions().queries)==null?void 0:R._experimental_afterQuery)==null||j.call(R,c,y),c.experimental_prefetchInRender&&!ro&&BC(y,o)){const P=d?u_(c,p,a):(U=i.getQueryCache().get(c.queryHash))==null?void 0:U.promise;P==null||P.catch(rn).finally(()=>{p.updateResult()})}return c.notifyOnChangeProps?y:p.trackResult(y)}function rd(n,e){return qC(n,xC)}function su(n,e){const t=nd(),[i]=Y.useState(()=>new DC(t,n));Y.useEffect(()=>{i.setOptions(n)},[i,n]);const o=Y.useSyncExternalStore(Y.useCallback(c=>i.subscribe(Tt.batchCalls(c)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=Y.useCallback((c,d)=>{i.mutate(c,d).catch(rn)},[i]);if(o.error&&EE(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:a,mutateAsync:o.mutate}}function Mt(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var HC=typeof Symbol=="function"&&Symbol.observable||"@@observable",c_=HC,_p=()=>Math.random().toString(36).substring(7).split("").join("."),WC={INIT:`@@redux/INIT${_p()}`,REPLACE:`@@redux/REPLACE${_p()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_p()}`},Nh=WC;function Vm(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function DE(n,e,t){if(typeof n!="function")throw new Error(Mt(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Mt(1));return t(DE)(n,e)}let i=n,o=e,a=new Map,c=a,d=0,p=!1;function y(){c===a&&(c=new Map,a.forEach((P,W)=>{c.set(W,P)}))}function _(){if(p)throw new Error(Mt(3));return o}function w(P){if(typeof P!="function")throw new Error(Mt(4));if(p)throw new Error(Mt(5));let W=!0;y();const J=d++;return c.set(J,P),function(){if(W){if(p)throw new Error(Mt(6));W=!1,y(),c.delete(J),a=null}}}function T(P){if(!Vm(P))throw new Error(Mt(7));if(typeof P.type>"u")throw new Error(Mt(8));if(typeof P.type!="string")throw new Error(Mt(17));if(p)throw new Error(Mt(9));try{p=!0,o=i(o,P)}finally{p=!1}return(a=c).forEach(J=>{J()}),P}function R(P){if(typeof P!="function")throw new Error(Mt(10));i=P,T({type:Nh.REPLACE})}function j(){const P=w;return{subscribe(W){if(typeof W!="object"||W===null)throw new Error(Mt(11));function J(){const te=W;te.next&&te.next(_())}return J(),{unsubscribe:P(J)}},[c_](){return this}}}return T({type:Nh.INIT}),{dispatch:T,subscribe:w,getState:_,replaceReducer:R,[c_]:j}}function KC(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Nh.INIT})>"u")throw new Error(Mt(12));if(typeof t(void 0,{type:Nh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function QC(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const c=e[a];typeof n[c]=="function"&&(t[c]=n[c])}const i=Object.keys(t);let o;try{KC(t)}catch(a){o=a}return function(c={},d){if(o)throw o;let p=!1;const y={};for(let _=0;_<i.length;_++){const w=i[_],T=t[w],R=c[w],j=T(R,d);if(typeof j>"u")throw d&&d.type,new Error(Mt(14));y[w]=j,p=p||j!==R}return p=p||i.length!==Object.keys(c).length,p?y:c}}function Oh(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function GC(...n){return e=>(t,i)=>{const o=e(t,i);let a=()=>{throw new Error(Mt(15))};const c={getState:o.getState,dispatch:(p,...y)=>a(p,...y)},d=n.map(p=>p(c));return a=Oh(...d)(o.dispatch),{...o,dispatch:a}}}function YC(n){return Vm(n)&&"type"in n&&typeof n.type=="string"}var bE=Symbol.for("immer-nothing"),h_=Symbol.for("immer-draftable"),Rn=Symbol.for("immer-state");function or(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Ma=Object.getPrototypeOf;function so(n){return!!n&&!!n[Rn]}function ai(n){var e;return n?VE(n)||Array.isArray(n)||!!n[h_]||!!((e=n.constructor)!=null&&e[h_])||sd(n)||od(n):!1}var XC=Object.prototype.constructor.toString();function VE(n){if(!n||typeof n!="object")return!1;const e=Ma(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===XC}function Dh(n,e){id(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function id(n){const e=n[Rn];return e?e.type_:Array.isArray(n)?1:sd(n)?2:od(n)?3:0}function Qp(n,e){return id(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function ME(n,e,t){const i=id(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function JC(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function sd(n){return n instanceof Map}function od(n){return n instanceof Set}function Ws(n){return n.copy_||n.base_}function Gp(n,e){if(sd(n))return new Map(n);if(od(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=VE(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[Rn];let o=Reflect.ownKeys(i);for(let a=0;a<o.length;a++){const c=o[a],d=i[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:n[c]})}return Object.create(Ma(n),i)}else{const i=Ma(n);if(i!==null&&t)return{...n};const o=Object.create(i);return Object.assign(o,n)}}function Mm(n,e=!1){return ad(n)||so(n)||!ai(n)||(id(n)>1&&(n.set=n.add=n.clear=n.delete=ZC),Object.freeze(n),e&&Object.entries(n).forEach(([t,i])=>Mm(i,!0))),n}function ZC(){or(2)}function ad(n){return Object.isFrozen(n)}var eA={};function oo(n){const e=eA[n];return e||or(0,n),e}var pu;function LE(){return pu}function tA(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function d_(n,e){e&&(oo("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Yp(n){Xp(n),n.drafts_.forEach(nA),n.drafts_=null}function Xp(n){n===pu&&(pu=n.parent_)}function f_(n){return pu=tA(pu,n)}function nA(n){const e=n[Rn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function p_(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Rn].modified_&&(Yp(e),or(4)),ai(n)&&(n=bh(e,n),e.parent_||Vh(e,n)),e.patches_&&oo("Patches").generateReplacementPatches_(t[Rn].base_,n,e.patches_,e.inversePatches_)):n=bh(e,t,[]),Yp(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==bE?n:void 0}function bh(n,e,t){if(ad(e))return e;const i=e[Rn];if(!i)return Dh(e,(o,a)=>m_(n,i,e,o,a,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return Vh(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let a=o,c=!1;i.type_===3&&(a=new Set(o),o.clear(),c=!0),Dh(a,(d,p)=>m_(n,i,o,d,p,t,c)),Vh(n,o,!1),t&&n.patches_&&oo("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function m_(n,e,t,i,o,a,c){if(so(o)){const d=a&&e&&e.type_!==3&&!Qp(e.assigned_,i)?a.concat(i):void 0,p=bh(n,o,d);if(ME(t,i,p),so(p))n.canAutoFreeze_=!1;else return}else c&&t.add(o);if(ai(o)&&!ad(o)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;bh(n,o),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&Vh(n,o)}}function Vh(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&Mm(e,t)}function rA(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:LE(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=i,a=Lm;t&&(o=[i],a=mu);const{revoke:c,proxy:d}=Proxy.revocable(o,a);return i.draft_=d,i.revoke_=c,d}var Lm={get(n,e){if(e===Rn)return n;const t=Ws(n);if(!Qp(t,e))return iA(n,t,e);const i=t[e];return n.finalized_||!ai(i)?i:i===wp(n.base_,e)?(Ep(n),n.copy_[e]=Zp(i,n)):i},has(n,e){return e in Ws(n)},ownKeys(n){return Reflect.ownKeys(Ws(n))},set(n,e,t){const i=FE(Ws(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const o=wp(Ws(n),e),a=o==null?void 0:o[Rn];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(JC(t,o)&&(t!==void 0||Qp(n.base_,e)))return!0;Ep(n),Jp(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return wp(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Ep(n),Jp(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Ws(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){or(11)},getPrototypeOf(n){return Ma(n.base_)},setPrototypeOf(){or(12)}},mu={};Dh(Lm,(n,e)=>{mu[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});mu.deleteProperty=function(n,e){return mu.set.call(this,n,e,void 0)};mu.set=function(n,e,t){return Lm.set.call(this,n[0],e,t,n[0])};function wp(n,e){const t=n[Rn];return(t?Ws(t):n)[e]}function iA(n,e,t){var o;const i=FE(e,t);return i?"value"in i?i.value:(o=i.get)==null?void 0:o.call(n.draft_):void 0}function FE(n,e){if(!(e in n))return;let t=Ma(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Ma(t)}}function Jp(n){n.modified_||(n.modified_=!0,n.parent_&&Jp(n.parent_))}function Ep(n){n.copy_||(n.copy_=Gp(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var sA=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const c=this;return function(p=a,...y){return c.produce(p,_=>t.call(this,_,...y))}}typeof t!="function"&&or(6),i!==void 0&&typeof i!="function"&&or(7);let o;if(ai(e)){const a=f_(this),c=Zp(e,void 0);let d=!0;try{o=t(c),d=!1}finally{d?Yp(a):Xp(a)}return d_(a,i),p_(o,a)}else if(!e||typeof e!="object"){if(o=t(e),o===void 0&&(o=e),o===bE&&(o=void 0),this.autoFreeze_&&Mm(o,!0),i){const a=[],c=[];oo("Patches").generateReplacementPatches_(e,o,a,c),i(a,c)}return o}else or(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let i,o;return[this.produce(e,t,(c,d)=>{i=c,o=d}),i,o]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){ai(n)||or(8),so(n)&&(n=oA(n));const e=f_(this),t=Zp(n,void 0);return t[Rn].isManual_=!0,Xp(e),t}finishDraft(n,e){const t=n&&n[Rn];(!t||!t.isManual_)&&or(9);const{scope_:i}=t;return d_(i,e),p_(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const o=e[t];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}t>-1&&(e=e.slice(t+1));const i=oo("Patches").applyPatches_;return so(n)?i(n,e):this.produce(n,o=>i(o,e))}};function Zp(n,e){const t=sd(n)?oo("MapSet").proxyMap_(n,e):od(n)?oo("MapSet").proxySet_(n,e):rA(n,e);return(e?e.scope_:LE()).drafts_.push(t),t}function oA(n){return so(n)||or(10,n),UE(n)}function UE(n){if(!ai(n)||ad(n))return n;const e=n[Rn];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Gp(n,e.scope_.immer_.useStrictShallowCopy_)}else t=Gp(n,!0);return Dh(t,(i,o)=>{ME(t,i,UE(o))}),e&&(e.finalized_=!1),t}var Pn=new sA,jE=Pn.produce;Pn.produceWithPatches.bind(Pn);Pn.setAutoFreeze.bind(Pn);Pn.setUseStrictShallowCopy.bind(Pn);Pn.applyPatches.bind(Pn);Pn.createDraft.bind(Pn);Pn.finishDraft.bind(Pn);function zE(n){return({dispatch:t,getState:i})=>o=>a=>typeof a=="function"?a(t,i,n):o(a)}var aA=zE(),lA=zE,uA=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Oh:Oh.apply(null,arguments)};function g_(n,e){function t(...i){if(e){let o=e(...i);if(!o)throw new Error(ni(0));return{type:n,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>YC(i)&&i.type===n,t}var BE=class Xl extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Xl.prototype)}static get[Symbol.species](){return Xl}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Xl(...e[0].concat(this)):new Xl(...e.concat(this))}};function y_(n){return ai(n)?jE(n,()=>{}):n}function ch(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function cA(n){return typeof n=="boolean"}var hA=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=e??{};let c=new BE;return t&&(cA(t)?c.push(aA):c.push(lA(t.extraArgument))),c},dA="RTK_autoBatch",v_=n=>e=>{setTimeout(e,n)},fA=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let o=!0,a=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:v_(10):n.type==="callback"?n.queueNotification:v_(n.timeout),y=()=>{c=!1,a&&(a=!1,d.forEach(_=>_()))};return Object.assign({},i,{subscribe(_){const w=()=>o&&_(),T=i.subscribe(w);return d.add(_),()=>{T(),d.delete(_)}},dispatch(_){var w;try{return o=!((w=_==null?void 0:_.meta)!=null&&w[dA]),a=!o,a&&(c||(c=!0,p(y))),i.dispatch(_)}finally{o=!0}}})},pA=n=>function(t){const{autoBatch:i=!0}=t??{};let o=new BE(n);return i&&o.push(fA(typeof i=="object"?i:void 0)),o};function mA(n){const e=hA(),{reducer:t=void 0,middleware:i,devTools:o=!0,preloadedState:a=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(Vm(t))d=QC(t);else throw new Error(ni(1));let p;typeof i=="function"?p=i(e):p=e();let y=Oh;o&&(y=uA({trace:!1,...typeof o=="object"&&o}));const _=GC(...p),w=pA(_);let T=typeof c=="function"?c(w):w();const R=y(...T);return DE(d,a,R)}function $E(n){const e={},t=[];let i;const o={addCase(a,c){const d=typeof a=="string"?a:a.type;if(!d)throw new Error(ni(28));if(d in e)throw new Error(ni(29));return e[d]=c,o},addMatcher(a,c){return t.push({matcher:a,reducer:c}),o},addDefaultCase(a){return i=a,o}};return n(o),[e,t,i]}function gA(n){return typeof n=="function"}function yA(n,e){let[t,i,o]=$E(e),a;if(gA(n))a=()=>y_(n());else{const d=y_(n);a=()=>d}function c(d=a(),p){let y=[t[p.type],...i.filter(({matcher:_})=>_(p)).map(({reducer:_})=>_)];return y.filter(_=>!!_).length===0&&(y=[o]),y.reduce((_,w)=>{if(w)if(so(_)){const R=w(_,p);return R===void 0?_:R}else{if(ai(_))return jE(_,T=>w(T,p));{const T=w(_,p);if(T===void 0){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return _},d)}return c.getInitialState=a,c}var vA=Symbol.for("rtk-slice-createasyncthunk");function _A(n,e){return`${n}/${e}`}function wA({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[vA];return function(o){const{name:a,reducerPath:c=a}=o;if(!a)throw new Error(ni(11));const d=(typeof o.reducers=="function"?o.reducers(IA()):o.reducers)||{},p=Object.keys(d),y={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(te,oe){const ae=typeof te=="string"?te:te.type;if(!ae)throw new Error(ni(12));if(ae in y.sliceCaseReducersByType)throw new Error(ni(13));return y.sliceCaseReducersByType[ae]=oe,_},addMatcher(te,oe){return y.sliceMatchers.push({matcher:te,reducer:oe}),_},exposeAction(te,oe){return y.actionCreators[te]=oe,_},exposeCaseReducer(te,oe){return y.sliceCaseReducersByName[te]=oe,_}};p.forEach(te=>{const oe=d[te],ae={reducerName:te,type:_A(a,te),createNotation:typeof o.reducers=="function"};CA(oe)?RA(ae,oe,_,e):SA(ae,oe,_)});function w(){const[te={},oe=[],ae=void 0]=typeof o.extraReducers=="function"?$E(o.extraReducers):[o.extraReducers],D={...te,...y.sliceCaseReducersByType};return yA(o.initialState,S=>{for(let A in D)S.addCase(A,D[A]);for(let A of y.sliceMatchers)S.addMatcher(A.matcher,A.reducer);for(let A of oe)S.addMatcher(A.matcher,A.reducer);ae&&S.addDefaultCase(ae)})}const T=te=>te,R=new Map,j=new WeakMap;let U;function P(te,oe){return U||(U=w()),U(te,oe)}function W(){return U||(U=w()),U.getInitialState()}function J(te,oe=!1){function ae(S){let A=S[te];return typeof A>"u"&&oe&&(A=ch(j,ae,W)),A}function D(S=T){const A=ch(R,oe,()=>new WeakMap);return ch(A,S,()=>{const x={};for(const[V,L]of Object.entries(o.selectors??{}))x[V]=EA(L,S,()=>ch(j,S,W),oe);return x})}return{reducerPath:te,getSelectors:D,get selectors(){return D(ae)},selectSlice:ae}}const ee={name:a,reducer:P,actions:y.actionCreators,caseReducers:y.sliceCaseReducersByName,getInitialState:W,...J(c),injectInto(te,{reducerPath:oe,...ae}={}){const D=oe??c;return te.inject({reducerPath:D,reducer:P},ae),{...ee,...J(D,!0)}}};return ee}}function EA(n,e,t,i){function o(a,...c){let d=e(a);return typeof d>"u"&&i&&(d=t()),n(d,...c)}return o.unwrapped=n,o}var TA=wA();function IA(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function SA({type:n,reducerName:e,createNotation:t},i,o){let a,c;if("reducer"in i){if(t&&!AA(i))throw new Error(ni(17));a=i.reducer,c=i.prepare}else a=i;o.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,c?g_(n,c):g_(n))}function CA(n){return n._reducerDefinitionType==="asyncThunk"}function AA(n){return n._reducerDefinitionType==="reducerWithPrepare"}function RA({type:n,reducerName:e},t,i,o){if(!o)throw new Error(ni(18));const{payloadCreator:a,fulfilled:c,pending:d,rejected:p,settled:y,options:_}=t,w=o(n,a,_);i.exposeAction(e,w),c&&i.addCase(w.fulfilled,c),d&&i.addCase(w.pending,d),p&&i.addCase(w.rejected,p),y&&i.addMatcher(w.settled,y),i.exposeCaseReducer(e,{fulfilled:c||hh,pending:d||hh,rejected:p||hh,settled:y||hh})}function hh(){}function ni(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const PA={items:[]},qE=TA({name:"cart",initialState:PA,reducers:{addToCart:(n,e)=>{const t=n.items.find(i=>i.id===e.payload.id);t?t.quantity+=1:n.items.push({...e.payload,quantity:1}),sessionStorage.setItem("cart",JSON.stringify(n.items))},removeFromCart:(n,e)=>{n.items=n.items.filter(t=>t.id!==e.payload),sessionStorage.setItem("cart",JSON.stringify(n.items))},updateQuantity:(n,e)=>{const t=n.items.find(i=>i.id===e.payload.id);t&&(t.quantity=e.payload.quantity),sessionStorage.setItem("cart",JSON.stringify(n.items))},clearCart:n=>{n.items=[],sessionStorage.removeItem("cart")},loadCartFromStorage:n=>{const e=sessionStorage.getItem("cart");e&&(n.items=JSON.parse(e))}}}),{addToCart:ub,removeFromCart:cb,updateQuantity:hb,clearCart:db,loadCartFromStorage:fb}=qE.actions,kA=qE.reducer,xA=mA({reducer:{cart:kA}});yE();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gu(){return gu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},gu.apply(this,arguments)}var es;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(es||(es={}));const __="popstate";function NA(n){n===void 0&&(n={});function e(i,o){let{pathname:a,search:c,hash:d}=i.location;return em("",{pathname:a,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Mh(o)}return DA(e,t,null,n)}function gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function HE(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OA(){return Math.random().toString(36).substr(2,8)}function w_(n,e){return{usr:n.state,key:n.key,idx:e}}function em(n,e,t,i){return t===void 0&&(t=null),gu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Wa(e):e,{state:t,key:e&&e.key||i||OA()})}function Mh(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Wa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function DA(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,c=o.history,d=es.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(gu({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function w(){d=es.Pop;let P=_(),W=P==null?null:P-y;y=P,p&&p({action:d,location:U.location,delta:W})}function T(P,W){d=es.Push;let J=em(U.location,P,W);y=_()+1;let ee=w_(J,y),te=U.createHref(J);try{c.pushState(ee,"",te)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;o.location.assign(te)}a&&p&&p({action:d,location:U.location,delta:1})}function R(P,W){d=es.Replace;let J=em(U.location,P,W);y=_();let ee=w_(J,y),te=U.createHref(J);c.replaceState(ee,"",te),a&&p&&p({action:d,location:U.location,delta:0})}function j(P){let W=o.location.origin!=="null"?o.location.origin:o.location.href,J=typeof P=="string"?P:Mh(P);return J=J.replace(/ $/,"%20"),gt(W,"No window.location.(origin|href) available to create URL for href: "+J),new URL(J,W)}let U={get action(){return d},get location(){return n(o,c)},listen(P){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(__,w),p=P,()=>{o.removeEventListener(__,w),p=null}},createHref(P){return e(o,P)},createURL:j,encodeLocation(P){let W=j(P);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:T,replace:R,go(P){return c.go(P)}};return U}var E_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(E_||(E_={}));function bA(n,e,t){return t===void 0&&(t="/"),VA(n,e,t)}function VA(n,e,t,i){let o=typeof e=="string"?Wa(e):e,a=Fm(o.pathname||"/",t);if(a==null)return null;let c=WE(n);MA(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let y=QA(a);d=HA(c[p],y)}return d}function WE(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(a,c,d)=>{let p={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=ns([i,p.relativePath]),_=t.concat(p);a.children&&a.children.length>0&&(gt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),WE(a.children,e,_,y)),!(a.path==null&&!a.index)&&e.push({path:y,score:$A(y,a.index),routesMeta:_})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,c);else for(let p of KE(a.path))o(a,c,p)}),e}function KE(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let c=KE(i.join("/")),d=[];return d.push(...c.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function MA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:qA(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const LA=/^:[\w-]+$/,FA=3,UA=2,jA=1,zA=10,BA=-2,T_=n=>n==="*";function $A(n,e){let t=n.split("/"),i=t.length;return t.some(T_)&&(i+=BA),e&&(i+=UA),t.filter(o=>!T_(o)).reduce((o,a)=>o+(LA.test(a)?FA:a===""?jA:zA),i)}function qA(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function HA(n,e,t){let{routesMeta:i}=n,o={},a="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=WA({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),T=p.route;if(!w)return null;Object.assign(o,w.params),c.push({params:o,pathname:ns([a,w.pathname]),pathnameBase:JA(ns([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=ns([a,w.pathnameBase]))}return c}function WA(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=KA(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,_,w)=>{let{paramName:T,isOptional:R}=_;if(T==="*"){let U=d[w]||"";c=a.slice(0,a.length-U.length).replace(/(.)\/+$/,"$1")}const j=d[w];return R&&!j?y[T]=void 0:y[T]=(j||"").replace(/%2F/g,"/"),y},{}),pathname:a,pathnameBase:c,pattern:n}}function KA(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),HE(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function QA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return HE(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Fm(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function GA(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Wa(n):n;return{pathname:t?t.startsWith("/")?t:YA(t,e):e,search:ZA(i),hash:e1(o)}}function YA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Tp(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function QE(n,e){let t=XA(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function GE(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Wa(n):(o=gu({},n),gt(!o.pathname||!o.pathname.includes("?"),Tp("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Tp("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Tp("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,d;if(c==null)d=t;else{let w=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),w-=1;o.pathname=T.join("/")}d=w>=0?e[w]:"/"}let p=GA(o,d),y=c&&c!=="/"&&c.endsWith("/"),_=(a||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const ns=n=>n.join("/").replace(/\/\/+/g,"/"),JA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,e1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function t1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const YE=["post","put","patch","delete"];new Set(YE);const n1=["get",...YE];new Set(n1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yu(){return yu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yu.apply(this,arguments)}const Um=Y.createContext(null),r1=Y.createContext(null),po=Y.createContext(null),ld=Y.createContext(null),mo=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),XE=Y.createContext(null);function i1(n,e){let{relative:t}=e===void 0?{}:e;Du()||gt(!1);let{basename:i,navigator:o}=Y.useContext(po),{hash:a,pathname:c,search:d}=ZE(n,{relative:t}),p=c;return i!=="/"&&(p=c==="/"?i:ns([i,c])),o.createHref({pathname:p,search:d,hash:a})}function Du(){return Y.useContext(ld)!=null}function ud(){return Du()||gt(!1),Y.useContext(ld).location}function JE(n){Y.useContext(po).static||Y.useLayoutEffect(n)}function cd(){let{isDataRoute:n}=Y.useContext(mo);return n?y1():s1()}function s1(){Du()||gt(!1);let n=Y.useContext(Um),{basename:e,future:t,navigator:i}=Y.useContext(po),{matches:o}=Y.useContext(mo),{pathname:a}=ud(),c=JSON.stringify(QE(o,t.v7_relativeSplatPath)),d=Y.useRef(!1);return JE(()=>{d.current=!0}),Y.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let w=GE(y,JSON.parse(c),a,_.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ns([e,w.pathname])),(_.replace?i.replace:i.push)(w,_.state,_)},[e,i,c,a,n])}function ZE(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Y.useContext(po),{matches:o}=Y.useContext(mo),{pathname:a}=ud(),c=JSON.stringify(QE(o,i.v7_relativeSplatPath));return Y.useMemo(()=>GE(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function o1(n,e){return a1(n,e)}function a1(n,e,t,i){Du()||gt(!1);let{navigator:o}=Y.useContext(po),{matches:a}=Y.useContext(mo),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=ud(),_;if(e){var w;let P=typeof e=="string"?Wa(e):e;p==="/"||(w=P.pathname)!=null&&w.startsWith(p)||gt(!1),_=P}else _=y;let T=_.pathname||"/",R=T;if(p!=="/"){let P=p.replace(/^\//,"").split("/");R="/"+T.replace(/^\//,"").split("/").slice(P.length).join("/")}let j=bA(n,{pathname:R}),U=d1(j&&j.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:ns([p,o.encodeLocation?o.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?p:ns([p,o.encodeLocation?o.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),a,t,i);return e&&U?Y.createElement(ld.Provider,{value:{location:yu({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:es.Pop}},U):U}function l1(){let n=g1(),e=t1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:o},t):null,null)}const u1=Y.createElement(l1,null);class c1 extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(mo.Provider,{value:this.props.routeContext},Y.createElement(XE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h1(n){let{routeContext:e,match:t,children:i}=n,o=Y.useContext(Um);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(mo.Provider,{value:e},i)}function d1(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=i)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=c.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);_>=0||gt(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<c.length;_++){let w=c[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=_),w.route.id){let{loaderData:T,errors:R}=t,j=w.route.loader&&T[w.route.id]===void 0&&(!R||R[w.route.id]===void 0);if(w.route.lazy||j){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,w,T)=>{let R,j=!1,U=null,P=null;t&&(R=d&&w.route.id?d[w.route.id]:void 0,U=w.route.errorElement||u1,p&&(y<0&&T===0?(v1("route-fallback"),j=!0,P=null):y===T&&(j=!0,P=w.route.hydrateFallbackElement||null)));let W=e.concat(c.slice(0,T+1)),J=()=>{let ee;return R?ee=U:j?ee=P:w.route.Component?ee=Y.createElement(w.route.Component,null):w.route.element?ee=w.route.element:ee=_,Y.createElement(h1,{match:w,routeContext:{outlet:_,matches:W,isDataRoute:t!=null},children:ee})};return t&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?Y.createElement(c1,{location:t.location,revalidation:t.revalidation,component:U,error:R,children:J(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):J()},null)}var e0=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(e0||{}),t0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(t0||{});function f1(n){let e=Y.useContext(Um);return e||gt(!1),e}function p1(n){let e=Y.useContext(r1);return e||gt(!1),e}function m1(n){let e=Y.useContext(mo);return e||gt(!1),e}function n0(n){let e=m1(),t=e.matches[e.matches.length-1];return t.route.id||gt(!1),t.route.id}function g1(){var n;let e=Y.useContext(XE),t=p1(),i=n0();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function y1(){let{router:n}=f1(e0.UseNavigateStable),e=n0(t0.UseNavigateStable),t=Y.useRef(!1);return JE(()=>{t.current=!0}),Y.useCallback(function(o,a){a===void 0&&(a={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,yu({fromRouteId:e},a)))},[n,e])}const I_={};function v1(n,e,t){I_[n]||(I_[n]=!0)}function _1(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Ui(n){gt(!1)}function w1(n){let{basename:e="/",children:t=null,location:i,navigationType:o=es.Pop,navigator:a,static:c=!1,future:d}=n;Du()&&gt(!1);let p=e.replace(/^\/*/,"/"),y=Y.useMemo(()=>({basename:p,navigator:a,static:c,future:yu({v7_relativeSplatPath:!1},d)}),[p,d,a,c]);typeof i=="string"&&(i=Wa(i));let{pathname:_="/",search:w="",hash:T="",state:R=null,key:j="default"}=i,U=Y.useMemo(()=>{let P=Fm(_,p);return P==null?null:{location:{pathname:P,search:w,hash:T,state:R,key:j},navigationType:o}},[p,_,w,T,R,j,o]);return U==null?null:Y.createElement(po.Provider,{value:y},Y.createElement(ld.Provider,{children:t,value:U}))}function E1(n){let{children:e,location:t}=n;return o1(tm(e),t)}new Promise(()=>{});function tm(n,e){e===void 0&&(e=[]);let t=[];return Y.Children.forEach(n,(i,o)=>{if(!Y.isValidElement(i))return;let a=[...e,o];if(i.type===Y.Fragment){t.push.apply(t,tm(i.props.children,a));return}i.type!==Ui&&gt(!1),!i.props.index||!i.props.children||gt(!1);let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=tm(i.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nm(){return nm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nm.apply(this,arguments)}function T1(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function I1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function S1(n,e){return n.button===0&&(!e||e==="_self")&&!I1(n)}const C1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],A1="6";try{window.__reactRouterVersion=A1}catch{}const R1="startTransition",S_=KS[R1];function P1(n){let{basename:e,children:t,future:i,window:o}=n,a=Y.useRef();a.current==null&&(a.current=NA({window:o,v5Compat:!0}));let c=a.current,[d,p]=Y.useState({action:c.action,location:c.location}),{v7_startTransition:y}=i||{},_=Y.useCallback(w=>{y&&S_?S_(()=>p(w)):p(w)},[p,y]);return Y.useLayoutEffect(()=>c.listen(_),[c,_]),Y.useEffect(()=>_1(i),[i]),Y.createElement(w1,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:i})}const k1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ir=Y.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:a,replace:c,state:d,target:p,to:y,preventScrollReset:_,viewTransition:w}=e,T=T1(e,C1),{basename:R}=Y.useContext(po),j,U=!1;if(typeof y=="string"&&x1.test(y)&&(j=y,k1))try{let ee=new URL(window.location.href),te=y.startsWith("//")?new URL(ee.protocol+y):new URL(y),oe=Fm(te.pathname,R);te.origin===ee.origin&&oe!=null?y=oe+te.search+te.hash:U=!0}catch{}let P=i1(y,{relative:o}),W=N1(y,{replace:c,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:w});function J(ee){i&&i(ee),ee.defaultPrevented||W(ee)}return Y.createElement("a",nm({},T,{href:j||P,onClick:U||a?i:J,ref:t,target:p}))});var C_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(C_||(C_={}));var A_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(A_||(A_={}));function N1(n,e){let{target:t,replace:i,state:o,preventScrollReset:a,relative:c,viewTransition:d}=e===void 0?{}:e,p=cd(),y=ud(),_=ZE(n,{relative:c});return Y.useCallback(w=>{if(S1(w,t)){w.preventDefault();let T=i!==void 0?i:Mh(y)===Mh(_);p(n,{replace:T,state:o,preventScrollReset:a,relative:c,viewTransition:d})}},[y,p,_,i,o,t,n,a,c,d])}const O1=()=>{};var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},D1=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},i0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=a>>2,w=(a&3)<<4|d>>4;let T=(d&15)<<2|y>>6,R=y&63;p||(R=64,c||(T=64)),i.push(t[_],t[w],t[T],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(r0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):D1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||y==null||w==null)throw new b1;const T=a<<2|d>>4;if(i.push(T),y!==64){const R=d<<4&240|y>>2;if(i.push(R),w!==64){const j=y<<6&192|w;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class b1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V1=function(n){const e=r0(n);return i0.encodeByteArray(e,!0)},Lh=function(n){return V1(n).replace(/\./g,"")},s0=function(n){try{return i0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=()=>M1().__FIREBASE_DEFAULTS__,F1=()=>{if(typeof process>"u"||typeof R_>"u")return;const n=R_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},U1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&s0(n[1]);return e&&JSON.parse(e)},hd=()=>{try{return O1()||L1()||F1()||U1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},o0=n=>{var e,t;return(t=(e=hd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},j1=n=>{const e=o0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},a0=()=>{var n;return(n=hd())===null||n===void 0?void 0:n.config},l0=n=>{var e;return(e=hd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(n){return n.endsWith(".cloudworkstations.dev")}async function u0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Lh(JSON.stringify(t)),Lh(JSON.stringify(c)),""].join(".")}const ou={};function $1(){const n={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function q1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let P_=!1;function c0(n,e){if(typeof window>"u"||typeof document>"u"||!bu(window.location.host)||ou[n]===e||ou[n]||P_)return;ou[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=$1().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{P_=!0,c()},T}function _(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=q1(i),R=t("text"),j=document.getElementById(R)||document.createElement("span"),U=t("learnmore"),P=document.getElementById(U)||document.createElement("a"),W=t("preprendIcon"),J=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ee=T.element;d(ee),_(P,U);const te=y();p(J,W),ee.append(J,j,P,te),document.body.appendChild(ee)}a?(j.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function W1(){var n;const e=(n=hd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function G1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Y1(){const n=Yt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function X1(){return!W1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J1(){try{return typeof indexedDB=="object"}catch{return!1}}function Z1(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="FirebaseError";class lr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=eR,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vu.prototype.create)}}class Vu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?tR(a,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new lr(o,d,i)}}function tR(n,e){return n.replace(nR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const nR=/\{\$([^}]+)}/g;function rR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ao(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],c=e[o];if(k_(a)&&k_(c)){if(!ao(a,c))return!1}else if(a!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function k_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Jl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Zl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function iR(n,e){const t=new sR(n,e);return t.subscribe.bind(t)}class sR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");oR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ip),o.error===void 0&&(o.error=Ip),o.complete===void 0&&(o.complete=Ip);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ip(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n){return n&&n._delegate?n._delegate:n}class lo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new z1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uR(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lR(n){return n===Ks?void 0:n}function uR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(De||(De={}));const hR={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},dR=De.INFO,fR={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},pR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=fR[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jm{constructor(e){this.name=e,this._logLevel=dR,this._logHandler=pR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const mR=(n,e)=>e.some(t=>n instanceof t);let x_,N_;function gR(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yR(){return N_||(N_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h0=new WeakMap,rm=new WeakMap,d0=new WeakMap,Sp=new WeakMap,zm=new WeakMap;function vR(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(rs(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&h0.set(t,n)}).catch(()=>{}),zm.set(e,n),e}function _R(n){if(rm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});rm.set(n,e)}let im={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||d0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wR(n){im=n(im)}function ER(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Cp(this),e,...t);return d0.set(i,e.sort?e.sort():[e]),rs(i)}:yR().includes(n)?function(...e){return n.apply(Cp(this),e),rs(h0.get(this))}:function(...e){return rs(n.apply(Cp(this),e))}}function TR(n){return typeof n=="function"?ER(n):(n instanceof IDBTransaction&&_R(n),mR(n,gR())?new Proxy(n,im):n)}function rs(n){if(n instanceof IDBRequest)return vR(n);if(Sp.has(n))return Sp.get(n);const e=TR(n);return e!==n&&(Sp.set(n,e),zm.set(e,n)),e}const Cp=n=>zm.get(n);function IR(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),d=rs(c);return i&&c.addEventListener("upgradeneeded",p=>{i(rs(c.result),p.oldVersion,p.newVersion,rs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const SR=["get","getKey","getAll","getAllKeys","count"],CR=["put","add","delete","clear"],Ap=new Map;function O_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ap.get(e))return Ap.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=CR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||SR.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return Ap.set(e,a),a}wR(n=>({...n,get:(e,t,i)=>O_(e,t)||n.get(e,t,i),has:(e,t)=>!!O_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function RR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sm="@firebase/app",D_="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new jm("@firebase/app"),PR="@firebase/app-compat",kR="@firebase/analytics-compat",xR="@firebase/analytics",NR="@firebase/app-check-compat",OR="@firebase/app-check",DR="@firebase/auth",bR="@firebase/auth-compat",VR="@firebase/database",MR="@firebase/data-connect",LR="@firebase/database-compat",FR="@firebase/functions",UR="@firebase/functions-compat",jR="@firebase/installations",zR="@firebase/installations-compat",BR="@firebase/messaging",$R="@firebase/messaging-compat",qR="@firebase/performance",HR="@firebase/performance-compat",WR="@firebase/remote-config",KR="@firebase/remote-config-compat",QR="@firebase/storage",GR="@firebase/storage-compat",YR="@firebase/firestore",XR="@firebase/ai",JR="@firebase/firestore-compat",ZR="firebase",eP="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="[DEFAULT]",tP={[sm]:"fire-core",[PR]:"fire-core-compat",[xR]:"fire-analytics",[kR]:"fire-analytics-compat",[OR]:"fire-app-check",[NR]:"fire-app-check-compat",[DR]:"fire-auth",[bR]:"fire-auth-compat",[VR]:"fire-rtdb",[MR]:"fire-data-connect",[LR]:"fire-rtdb-compat",[FR]:"fire-fn",[UR]:"fire-fn-compat",[jR]:"fire-iid",[zR]:"fire-iid-compat",[BR]:"fire-fcm",[$R]:"fire-fcm-compat",[qR]:"fire-perf",[HR]:"fire-perf-compat",[WR]:"fire-rc",[KR]:"fire-rc-compat",[QR]:"fire-gcs",[GR]:"fire-gcs-compat",[YR]:"fire-fst",[JR]:"fire-fst-compat",[XR]:"fire-vertex","fire-js":"fire-js",[ZR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Map,nP=new Map,am=new Map;function b_(n,e){try{n.container.addComponent(e)}catch(t){li.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function La(n){const e=n.name;if(am.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;am.set(e,n);for(const t of Fh.values())b_(t,n);for(const t of nP.values())b_(t,n);return!0}function Bm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new Vu("app","Firebase",rP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=eP;function f0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:om,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw is.create("bad-app-name",{appName:String(o)});if(t||(t=a0()),!t)throw is.create("no-options");const a=Fh.get(o);if(a){if(ao(t,a.options)&&ao(i,a.config))return a;throw is.create("duplicate-app",{appName:o})}const c=new cR(o);for(const p of am.values())c.addComponent(p);const d=new iP(t,i,c);return Fh.set(o,d),d}function p0(n=om){const e=Fh.get(n);if(!e&&n===om&&a0())return f0();if(!e)throw is.create("no-app",{appName:n});return e}function ss(n,e,t){var i;let o=(i=tP[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(d.join(" "));return}La(new lo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="firebase-heartbeat-database",oP=1,vu="firebase-heartbeat-store";let Rp=null;function m0(){return Rp||(Rp=IR(sP,oP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(n=>{throw is.create("idb-open",{originalErrorMessage:n.message})})),Rp}async function aP(n){try{const t=(await m0()).transaction(vu),i=await t.objectStore(vu).get(g0(n));return await t.done,i}catch(e){if(e instanceof lr)li.warn(e.message);else{const t=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(t.message)}}}async function V_(n,e){try{const i=(await m0()).transaction(vu,"readwrite");await i.objectStore(vu).put(e,g0(n)),await i.done}catch(t){if(t instanceof lr)li.warn(t.message);else{const i=is.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});li.warn(i.message)}}}function g0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=1024,uP=30;class cP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=M_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>uP){const c=fP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){li.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=M_(),{heartbeatsToSend:i,unsentEntries:o}=hP(this._heartbeatsCache.heartbeats),a=Lh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return li.warn(t),""}}}function M_(){return new Date().toISOString().substring(0,10)}function hP(n,e=lP){const t=[];let i=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),L_(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),L_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class dP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J1()?Z1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return V_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return V_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function L_(n){return Lh(JSON.stringify({version:2,heartbeats:n})).length}function fP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n){La(new lo("platform-logger",e=>new AR(e),"PRIVATE")),La(new lo("heartbeat",e=>new cP(e),"PRIVATE")),ss(sm,D_,n),ss(sm,D_,"esm2017"),ss("fire-js","")}pP("");function $m(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function y0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mP=y0,v0=new Vu("auth","Firebase",y0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new jm("@firebase/auth");function gP(n,...e){Uh.logLevel<=De.WARN&&Uh.warn(`Auth (${Ka}): ${n}`,...e)}function _h(n,...e){Uh.logLevel<=De.ERROR&&Uh.error(`Auth (${Ka}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(n,...e){throw qm(n,...e)}function Pr(n,...e){return qm(n,...e)}function _0(n,e,t){const i=Object.assign(Object.assign({},mP()),{[e]:t});return new Vu("auth","Firebase",i).create(e,{appName:n.name})}function ri(n){return _0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return v0.create(n,...e)}function Ie(n,e,...t){if(!n)throw qm(e,...t)}function ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _h(e),new Error(e)}function ui(n,e){n||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function yP(){return F_()==="http:"||F_()==="https:"}function F_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yP()||Q1()||"connection"in navigator)?navigator.onLine:!0}function _P(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ui(t>e,"Short delay should be less than long delay!"),this.isMobile=H1()||G1()}get(){return vP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n,e){ui(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TP=new Lu(3e4,6e4);function ps(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ms(n,e,t,i,o={}){return E0(n,o,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const d=Mu(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},a);return K1()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&bu(n.emulatorConfig.host)&&(y.credentials="include"),w0.fetch()(await T0(n,n.config.apiHost,t,d),y)})}async function E0(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},wP),e);try{const o=new SP(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw dh(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw dh(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw dh(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw _0(n,_,y);ur(n,_)}}catch(o){if(o instanceof lr)throw o;ur(n,"network-request-failed",{message:String(o)})}}async function Fu(n,e,t,i,o={}){const a=await ms(n,e,t,i,o);return"mfaPendingCredential"in a&&ur(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function T0(n,e,t,i){const o=`${e}${t}?${i}`,a=n,c=a.config.emulator?Hm(n.config,o):`${n.config.apiScheme}://${o}`;return EP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function IP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Pr(this.auth,"network-request-failed")),TP.get())})}}function dh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Pr(n,e,i);return o.customData._tokenResponse=t,o}function U_(n){return n!==void 0&&n.enterprise!==void 0}class CP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return IP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AP(n,e){return ms(n,"GET","/v2/recaptchaConfig",ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(n,e){return ms(n,"POST","/v1/accounts:delete",e)}async function jh(n,e){return ms(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PP(n,e=!1){const t=Ct(n),i=await t.getIdToken(e),o=Wm(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:au(Pp(o.auth_time)),issuedAtTime:au(Pp(o.iat)),expirationTime:au(Pp(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Pp(n){return Number(n)*1e3}function Wm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const o=s0(t);return o?JSON.parse(o):(_h("Failed to decode base64 JWT payload"),null)}catch(o){return _h("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function j_(n){const e=Wm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof lr&&kP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function kP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(n){var e;const t=n.auth,i=await n.getIdToken(),o=await _u(n,jh(t,{idToken:i}));Ie(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?I0(a.providerUserInfo):[],d=OP(n.providerData,c),p=n.isAnonymous,y=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=p?y:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new um(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function NP(n){const e=Ct(n);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OP(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function I0(n){return n.map(e=>{var{providerId:t}=e,i=$m(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e){const t=await E0(n,{},async()=>{const i=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=await T0(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",w0.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bP(n,e){return ms(n,"POST","/v2/accounts:revokeToken",ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=j_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await DP(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,c=new _a;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _a,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=$m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new um(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _u(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PP(this,e)}reload(){return NP(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await zh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(ri(this.auth));const e=await this.getIdToken();return await _u(this,RP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,c,d,p,y,_;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,j=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(d=t.tenantId)!==null&&d!==void 0?d:void 0,P=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,W=(y=t.createdAt)!==null&&y!==void 0?y:void 0,J=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ee,emailVerified:te,isAnonymous:oe,providerData:ae,stsTokenManager:D}=t;Ie(ee&&D,e,"internal-error");const S=_a.fromJSON(this.name,D);Ie(typeof ee=="string",e,"internal-error"),Li(w,e.name),Li(T,e.name),Ie(typeof te=="boolean",e,"internal-error"),Ie(typeof oe=="boolean",e,"internal-error"),Li(R,e.name),Li(j,e.name),Li(U,e.name),Li(P,e.name),Li(W,e.name),Li(J,e.name);const A=new ar({uid:ee,auth:e,email:T,emailVerified:te,displayName:w,isAnonymous:oe,photoURL:j,phoneNumber:R,tenantId:U,stsTokenManager:S,createdAt:W,lastLoginAt:J});return ae&&Array.isArray(ae)&&(A.providerData=ae.map(x=>Object.assign({},x))),P&&(A._redirectEventId=P),A}static async _fromIdTokenResponse(e,t,i=!1){const o=new _a;o.updateFromServerResponse(t);const a=new ar({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await zh(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?I0(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new _a;d.updateFromIdToken(i);const p=new ar({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new um(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;function ti(n){ui(n instanceof Function,"Expected a class definition");let e=z_.get(n);return e?(ui(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,z_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}S0.type="NONE";const B_=S0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n,e,t){return`firebase:${n}:${e}:${t}`}class wa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=wh(this.userKey,o.apiKey,a),this.fullPersistenceKey=wh("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await jh(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new wa(ti(B_),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||ti(B_);const c=wh(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(c);if(_){let w;if(typeof _=="string"){const T=await jh(e,{idToken:_}).catch(()=>{});if(!T)break;w=await ar._fromGetAccountInfoResponse(e,T,_)}else w=ar._fromJSON(e,_);y!==a&&(d=w),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new wa(a,e,i):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(c)}catch{}})),new wa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x0(e))return"Blackberry";if(N0(e))return"Webos";if(A0(e))return"Safari";if((e.includes("chrome/")||R0(e))&&!e.includes("edge/"))return"Chrome";if(k0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function C0(n=Yt()){return/firefox\//i.test(n)}function A0(n=Yt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R0(n=Yt()){return/crios\//i.test(n)}function P0(n=Yt()){return/iemobile/i.test(n)}function k0(n=Yt()){return/android/i.test(n)}function x0(n=Yt()){return/blackberry/i.test(n)}function N0(n=Yt()){return/webos/i.test(n)}function Km(n=Yt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VP(n=Yt()){var e;return Km(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MP(){return Y1()&&document.documentMode===10}function O0(n=Yt()){return Km(n)||k0(n)||N0(n)||x0(n)||/windows phone/i.test(n)||P0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(n,e=[]){let t;switch(n){case"Browser":t=$_(Yt());break;case"Worker":t=`${$_(Yt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ka}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(n,e={}){return ms(n,"GET","/v2/passwordPolicy",ps(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=6;class jP{constructor(e){var t,i,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:UP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q_(this),this.idTokenSubscription=new q_(this),this.beforeStateQueue=new LP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ti(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await jh(this,{idToken:e}),i=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_P()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(ri(this));const t=e?Ct(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FP(this),t=new jP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await bP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ti(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=D0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&gP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function go(n){return Ct(n)}class q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=iR(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BP(n){dd=n}function b0(n){return dd.loadJS(n)}function $P(){return dd.recaptchaEnterpriseScript}function qP(){return dd.gapiScript}function HP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class WP{constructor(){this.enterprise=new KP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const QP="recaptcha-enterprise",V0="NO_RECAPTCHA";class GP{constructor(e){this.type=QP,this.auth=go(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{AP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new CP(p);return a.tenantId==null?a._agentRecaptchaConfig=y:a._tenantRecaptchaConfigs[a.tenantId]=y,c(y.siteKey)}}).catch(p=>{d(p)})})}function o(a,c,d){const p=window.grecaptcha;U_(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(y=>{c(y)}).catch(()=>{c(V0)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WP().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{i(this.auth).then(d=>{if(!t&&U_(window.grecaptcha))o(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=$P();p.length!==0&&(p+=d),b0(p).then(()=>{o(d,a,c)}).catch(y=>{c(y)})}}).catch(d=>{c(d)})})}}async function H_(n,e,t,i=!1,o=!1){const a=new GP(n);let c;if(o)c=V0;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function cm(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await H_(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await H_(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(n,e){const t=Bm(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(ao(a,e??{}))return o;ur(o,"already-initialized")}return t.initialize({options:e})}function XP(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ti);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function JP(n,e,t){const i=go(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=M0(e),{host:c,port:d}=ZP(e),p=d===null?"":`:${d}`,y={url:`${a}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(ao(y,i.config.emulator)&&ao(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,bu(c)?(u0(`${a}//${c}${p}`),c0("Auth",!0)):ek()}function M0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ZP(n){const e=M0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:W_(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:W_(c)}}}function W_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ek(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,t){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function tk(n,e){return ms(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(n,e){return Fu(n,"POST","/v1/accounts:signInWithPassword",ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(n,e){return Fu(n,"POST","/v1/accounts:signInWithEmailLink",ps(n,e))}async function ik(n,e){return Fu(n,"POST","/v1/accounts:signInWithEmailLink",ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Qm{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new wu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new wu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(e,t,"signInWithPassword",nk);case"emailLink":return rk(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(e,i,"signUpPassword",tk);case"emailLink":return ik(e,{idToken:t,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(n,e){return Fu(n,"POST","/v1/accounts:signInWithIdp",ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="http://localhost";class uo extends Qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=$m(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new uo(i,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ea(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ea(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ea(e,t)}buildRequest(){const e={requestUri:sk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ak(n){const e=Jl(Zl(n)).link,t=e?Jl(Zl(e)).deep_link_id:null,i=Jl(Zl(n)).deep_link_id;return(i?Jl(Zl(i)).link:null)||i||t||e||n}class Gm{constructor(e){var t,i,o,a,c,d;const p=Jl(Zl(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,w=ok((o=p.mode)!==null&&o!==void 0?o:null);Ie(y&&_&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=_,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=ak(e);try{return new Gm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.providerId=Qa.PROVIDER_ID}static credential(e,t){return wu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Gm.parseLink(t);return Ie(i,"argument-error"),wu._fromEmailAndCode(e,i.code,i.tenantId)}}Qa.PROVIDER_ID="password";Qa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends L0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Uu{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return zi.credential(t,i)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Uu{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.GITHUB_SIGN_IN_METHOD="github.com";Bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Uu{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return $i.credential(t,i)}catch{return null}}}$i.TWITTER_SIGN_IN_METHOD="twitter.com";$i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(n,e){return Fu(n,"POST","/v1/accounts:signUp",ps(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await ar._fromIdTokenResponse(e,i,o),c=K_(i);return new co({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=K_(i);return new co({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function K_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends lr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Bh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Bh(e,t,i,o)}}function F0(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(n,a,e,i):a})}async function uk(n,e,t=!1){const i=await _u(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return co._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(n,e,t=!1){const{auth:i}=n;if(jn(i.app))return Promise.reject(ri(i));const o="reauthenticate";try{const a=await _u(n,F0(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const c=Wm(a.idToken);Ie(c,i,"internal-error");const{sub:d}=c;return Ie(n.uid===d,i,"user-mismatch"),co._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ur(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U0(n,e,t=!1){if(jn(n.app))return Promise.reject(ri(n));const i="signIn",o=await F0(n,i,e),a=await co._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function hk(n,e){return U0(go(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0(n){const e=go(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dk(n,e,t){if(jn(n.app))return Promise.reject(ri(n));const i=go(n),c=await cm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lk).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&j0(n),p}),d=await co._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function fk(n,e,t){return jn(n.app)?Promise.reject(ri(n)):hk(Ct(n),Qa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&j0(n),i})}function pk(n,e,t,i){return Ct(n).onIdTokenChanged(e,t,i)}function mk(n,e,t){return Ct(n).beforeAuthStateChanged(e,t)}function gk(n,e,t,i){return Ct(n).onAuthStateChanged(e,t,i)}function yk(n){return Ct(n).signOut()}async function vk(n){return Ct(n).delete()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=1e3,wk=10;class B0 extends z0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);MP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wk):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_k)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}B0.type="LOCAL";const Ek=B0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends z0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$0.type="SESSION";const q0=$0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new fd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async y=>y(t.origin,a)),p=await Tk(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const y=Ym("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function Sk(n){kr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function Ck(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ak(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Rk(){return H0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="firebaseLocalStorageDb",Pk=1,qh="firebaseLocalStorage",K0="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pd(n,e){return n.transaction([qh],e?"readwrite":"readonly").objectStore(qh)}function kk(){const n=indexedDB.deleteDatabase(W0);return new ju(n).toPromise()}function hm(){const n=indexedDB.open(W0,Pk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(qh,{keyPath:K0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(qh)?e(i):(i.close(),await kk(),e(await hm()))})})}async function Q_(n,e,t){const i=pd(n,!0).put({[K0]:e,value:t});return new ju(i).toPromise()}async function xk(n,e){const t=pd(n,!1).get(e),i=await new ju(t).toPromise();return i===void 0?null:i.value}function G_(n,e){const t=pd(n,!0).delete(e);return new ju(t).toPromise()}const Nk=800,Ok=3;class Q0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Ok)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return H0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fd._getInstance(Rk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Ck(),!this.activeServiceWorker)return;this.sender=new Ik(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ak()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hm();return await Q_(e,$h,"1"),await G_(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Q_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>xk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>G_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=pd(o,!1).getAll();return new ju(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q0.type="LOCAL";const Dk=Q0;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n,e){return e?ti(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ea(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vk(n){return U0(n.auth,new Xm(n),n.bypassAuthState)}function Mk(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),ck(t,new Xm(n),n.bypassAuthState)}async function Lk(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),uk(t,new Xm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vk;case"linkViaPopup":case"linkViaRedirect":return Lk;case"reauthViaPopup":case"reauthViaRedirect":return Mk;default:ur(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new Lu(2e3,1e4);class ya extends G0{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,ya.currentPopupAction&&ya.currentPopupAction.cancel(),ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fk.get())};e()}}ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="pendingRedirect",Eh=new Map;class jk extends G0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Eh.get(this.auth._key());if(!e){try{const i=await zk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Eh.set(this.auth._key(),e)}return this.bypassAuthState||Eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zk(n,e){const t=qk(e),i=$k(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Bk(n,e){Eh.set(n._key(),e)}function $k(n){return ti(n._redirectPersistence)}function qk(n){return wh(Uk,n.config.apiKey,n.name)}async function Hk(n,e,t=!1){if(jn(n.app))return Promise.reject(ri(n));const i=go(n),o=bk(i,e),c=await new jk(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=10*60*1e3;class Kk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Qk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Y0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Pr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y_(e))}saveEventToCache(e){this.cachedEventUids.add(Y_(e)),this.lastProcessedEventTime=Date.now()}}function Y_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Y0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Qk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Y0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(n,e={}){return ms(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xk=/^https?/;async function Jk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Gk(n);for(const t of e)try{if(Zk(t))return}catch{}ur(n,"unauthorized-domain")}function Zk(n){const e=lm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!Xk.test(t))return!1;if(Yk.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new Lu(3e4,6e4);function X_(){const n=kr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tx(n){return new Promise((e,t)=>{var i,o,a;function c(){X_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X_(),t(Pr(n,"network-request-failed"))},timeout:ex.get()})}if(!((o=(i=kr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=kr().gapi)===null||a===void 0)&&a.load)c();else{const d=HP("iframefcb");return kr()[d]=()=>{gapi.load?c():t(Pr(n,"network-request-failed"))},b0(`${qP()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Th=null,e})}let Th=null;function nx(n){return Th=Th||tx(n),Th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Lu(5e3,15e3),ix="__/auth/iframe",sx="emulator/auth/iframe",ox={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ax=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lx(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Hm(e,sx):`https://${n.config.authDomain}/${ix}`,i={apiKey:e.apiKey,appName:n.name,v:Ka},o=ax.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Mu(i).slice(1)}`}async function ux(n){const e=await nx(n),t=kr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:lx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ox,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const c=Pr(n,"network-request-failed"),d=kr().setTimeout(()=>{a(c)},rx.get());function p(){kr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hx=500,dx=600,fx="_blank",px="http://localhost";class J_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mx(n,e,t,i=hx,o=dx){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},cx),{width:i.toString(),height:o.toString(),top:a,left:c}),y=Yt().toLowerCase();t&&(d=R0(y)?fx:t),C0(y)&&(e=e||px,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[R,j])=>`${T}${R}=${j},`,"");if(VP(y)&&d!=="_self")return gx(e||"",d),new J_(null);const w=window.open(e||"",d,_);Ie(w,n,"popup-blocked");try{w.focus()}catch{}return new J_(w)}function gx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="__/auth/handler",vx="emulator/auth/handler",_x=encodeURIComponent("fac");async function Z_(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ka,eventId:o};if(e instanceof L0){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",rR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))c[_]=w}if(e instanceof Uu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),y=p?`#${_x}=${encodeURIComponent(p)}`:"";return`${wx(n)}?${Mu(d).slice(1)}${y}`}function wx({config:n}){return n.emulator?Hm(n,vx):`https://${n.authDomain}/${yx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class Ex{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q0,this._completeRedirectFn=Hk,this._overrideRedirectResult=Bk}async _openPopup(e,t,i,o){var a;ui((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Z_(e,t,i,lm(),o);return mx(e,c,Ym())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await Z_(e,t,i,lm(),o);return Sk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ui(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await ux(e),i=new Kk(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kp,{type:kp},o=>{var a;const c=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[kp];c!==void 0&&t(!!c),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Jk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O0()||A0()||Km()}}const Tx=Ex;var ew="@firebase/auth",tw="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cx(n){La(new lo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:D0(n)},y=new zP(i,o,a,p);return XP(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),La(new lo("auth-internal",e=>{const t=go(e.getProvider("auth").getImmediate());return(i=>new Ix(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ss(ew,tw,Sx(n)),ss(ew,tw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=5*60,Rx=l0("authIdTokenMaxAge")||Ax;let nw=null;const Px=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Rx)return;const o=t==null?void 0:t.token;nw!==o&&(nw=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function X0(n=p0()){const e=Bm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=YP(n,{popupRedirectResolver:Tx,persistence:[Dk,Ek,q0]}),i=l0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=Px(a.toString());mk(t,c,()=>c(t.currentUser)),pk(t,d=>c(d))}}const o=o0("auth");return o&&JP(t,`http://${o}`),t}function kx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}BP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Pr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",kx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cx("Browser");var xx="firebase",Nx="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(xx,Nx,"app");var rw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,J0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function A(){}A.prototype=S.prototype,D.D=S.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(x,V,L){for(var k=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)k[lt-2]=arguments[lt];return S.prototype[V].apply(x,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,A){A||(A=0);var x=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)x[V]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(V=0;16>V;++V)x[V]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=D.g[0],A=D.g[1],V=D.g[2];var L=D.g[3],k=S+(L^A&(V^L))+x[0]+3614090360&4294967295;S=A+(k<<7&4294967295|k>>>25),k=L+(V^S&(A^V))+x[1]+3905402710&4294967295,L=S+(k<<12&4294967295|k>>>20),k=V+(A^L&(S^A))+x[2]+606105819&4294967295,V=L+(k<<17&4294967295|k>>>15),k=A+(S^V&(L^S))+x[3]+3250441966&4294967295,A=V+(k<<22&4294967295|k>>>10),k=S+(L^A&(V^L))+x[4]+4118548399&4294967295,S=A+(k<<7&4294967295|k>>>25),k=L+(V^S&(A^V))+x[5]+1200080426&4294967295,L=S+(k<<12&4294967295|k>>>20),k=V+(A^L&(S^A))+x[6]+2821735955&4294967295,V=L+(k<<17&4294967295|k>>>15),k=A+(S^V&(L^S))+x[7]+4249261313&4294967295,A=V+(k<<22&4294967295|k>>>10),k=S+(L^A&(V^L))+x[8]+1770035416&4294967295,S=A+(k<<7&4294967295|k>>>25),k=L+(V^S&(A^V))+x[9]+2336552879&4294967295,L=S+(k<<12&4294967295|k>>>20),k=V+(A^L&(S^A))+x[10]+4294925233&4294967295,V=L+(k<<17&4294967295|k>>>15),k=A+(S^V&(L^S))+x[11]+2304563134&4294967295,A=V+(k<<22&4294967295|k>>>10),k=S+(L^A&(V^L))+x[12]+1804603682&4294967295,S=A+(k<<7&4294967295|k>>>25),k=L+(V^S&(A^V))+x[13]+4254626195&4294967295,L=S+(k<<12&4294967295|k>>>20),k=V+(A^L&(S^A))+x[14]+2792965006&4294967295,V=L+(k<<17&4294967295|k>>>15),k=A+(S^V&(L^S))+x[15]+1236535329&4294967295,A=V+(k<<22&4294967295|k>>>10),k=S+(V^L&(A^V))+x[1]+4129170786&4294967295,S=A+(k<<5&4294967295|k>>>27),k=L+(A^V&(S^A))+x[6]+3225465664&4294967295,L=S+(k<<9&4294967295|k>>>23),k=V+(S^A&(L^S))+x[11]+643717713&4294967295,V=L+(k<<14&4294967295|k>>>18),k=A+(L^S&(V^L))+x[0]+3921069994&4294967295,A=V+(k<<20&4294967295|k>>>12),k=S+(V^L&(A^V))+x[5]+3593408605&4294967295,S=A+(k<<5&4294967295|k>>>27),k=L+(A^V&(S^A))+x[10]+38016083&4294967295,L=S+(k<<9&4294967295|k>>>23),k=V+(S^A&(L^S))+x[15]+3634488961&4294967295,V=L+(k<<14&4294967295|k>>>18),k=A+(L^S&(V^L))+x[4]+3889429448&4294967295,A=V+(k<<20&4294967295|k>>>12),k=S+(V^L&(A^V))+x[9]+568446438&4294967295,S=A+(k<<5&4294967295|k>>>27),k=L+(A^V&(S^A))+x[14]+3275163606&4294967295,L=S+(k<<9&4294967295|k>>>23),k=V+(S^A&(L^S))+x[3]+4107603335&4294967295,V=L+(k<<14&4294967295|k>>>18),k=A+(L^S&(V^L))+x[8]+1163531501&4294967295,A=V+(k<<20&4294967295|k>>>12),k=S+(V^L&(A^V))+x[13]+2850285829&4294967295,S=A+(k<<5&4294967295|k>>>27),k=L+(A^V&(S^A))+x[2]+4243563512&4294967295,L=S+(k<<9&4294967295|k>>>23),k=V+(S^A&(L^S))+x[7]+1735328473&4294967295,V=L+(k<<14&4294967295|k>>>18),k=A+(L^S&(V^L))+x[12]+2368359562&4294967295,A=V+(k<<20&4294967295|k>>>12),k=S+(A^V^L)+x[5]+4294588738&4294967295,S=A+(k<<4&4294967295|k>>>28),k=L+(S^A^V)+x[8]+2272392833&4294967295,L=S+(k<<11&4294967295|k>>>21),k=V+(L^S^A)+x[11]+1839030562&4294967295,V=L+(k<<16&4294967295|k>>>16),k=A+(V^L^S)+x[14]+4259657740&4294967295,A=V+(k<<23&4294967295|k>>>9),k=S+(A^V^L)+x[1]+2763975236&4294967295,S=A+(k<<4&4294967295|k>>>28),k=L+(S^A^V)+x[4]+1272893353&4294967295,L=S+(k<<11&4294967295|k>>>21),k=V+(L^S^A)+x[7]+4139469664&4294967295,V=L+(k<<16&4294967295|k>>>16),k=A+(V^L^S)+x[10]+3200236656&4294967295,A=V+(k<<23&4294967295|k>>>9),k=S+(A^V^L)+x[13]+681279174&4294967295,S=A+(k<<4&4294967295|k>>>28),k=L+(S^A^V)+x[0]+3936430074&4294967295,L=S+(k<<11&4294967295|k>>>21),k=V+(L^S^A)+x[3]+3572445317&4294967295,V=L+(k<<16&4294967295|k>>>16),k=A+(V^L^S)+x[6]+76029189&4294967295,A=V+(k<<23&4294967295|k>>>9),k=S+(A^V^L)+x[9]+3654602809&4294967295,S=A+(k<<4&4294967295|k>>>28),k=L+(S^A^V)+x[12]+3873151461&4294967295,L=S+(k<<11&4294967295|k>>>21),k=V+(L^S^A)+x[15]+530742520&4294967295,V=L+(k<<16&4294967295|k>>>16),k=A+(V^L^S)+x[2]+3299628645&4294967295,A=V+(k<<23&4294967295|k>>>9),k=S+(V^(A|~L))+x[0]+4096336452&4294967295,S=A+(k<<6&4294967295|k>>>26),k=L+(A^(S|~V))+x[7]+1126891415&4294967295,L=S+(k<<10&4294967295|k>>>22),k=V+(S^(L|~A))+x[14]+2878612391&4294967295,V=L+(k<<15&4294967295|k>>>17),k=A+(L^(V|~S))+x[5]+4237533241&4294967295,A=V+(k<<21&4294967295|k>>>11),k=S+(V^(A|~L))+x[12]+1700485571&4294967295,S=A+(k<<6&4294967295|k>>>26),k=L+(A^(S|~V))+x[3]+2399980690&4294967295,L=S+(k<<10&4294967295|k>>>22),k=V+(S^(L|~A))+x[10]+4293915773&4294967295,V=L+(k<<15&4294967295|k>>>17),k=A+(L^(V|~S))+x[1]+2240044497&4294967295,A=V+(k<<21&4294967295|k>>>11),k=S+(V^(A|~L))+x[8]+1873313359&4294967295,S=A+(k<<6&4294967295|k>>>26),k=L+(A^(S|~V))+x[15]+4264355552&4294967295,L=S+(k<<10&4294967295|k>>>22),k=V+(S^(L|~A))+x[6]+2734768916&4294967295,V=L+(k<<15&4294967295|k>>>17),k=A+(L^(V|~S))+x[13]+1309151649&4294967295,A=V+(k<<21&4294967295|k>>>11),k=S+(V^(A|~L))+x[4]+4149444226&4294967295,S=A+(k<<6&4294967295|k>>>26),k=L+(A^(S|~V))+x[11]+3174756917&4294967295,L=S+(k<<10&4294967295|k>>>22),k=V+(S^(L|~A))+x[2]+718787259&4294967295,V=L+(k<<15&4294967295|k>>>17),k=A+(L^(V|~S))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(V+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+L&4294967295}i.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var A=S-this.blockSize,x=this.B,V=this.h,L=0;L<S;){if(V==0)for(;L<=A;)o(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<S;)if(x[V++]=D.charCodeAt(L++),V==this.blockSize){o(this,x),V=0;break}}else for(;L<S;)if(x[V++]=D[L++],V==this.blockSize){o(this,x),V=0;break}}this.h=V,this.o+=S},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var A=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=A&255,A/=256;for(this.u(D),D=Array(16),S=A=0;4>S;++S)for(var x=0;32>x;x+=8)D[A++]=this.g[S]>>>x&255;return D};function a(D,S){var A=d;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=S(D)}function c(D,S){this.h=S;for(var A=[],x=!0,V=D.length-1;0<=V;V--){var L=D[V]|0;x&&L==S||(A[V]=L,x=!1)}this.g=A}var d={};function p(D){return-128<=D&&128>D?a(D,function(S){return new c([S|0],0>S?-1:0)}):new c([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return w;if(0>D)return P(y(-D));for(var S=[],A=1,x=0;D>=A;x++)S[x]=D/A|0,A*=4294967296;return new c(S,0)}function _(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return P(_(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(S,8)),x=w,V=0;V<D.length;V+=8){var L=Math.min(8,D.length-V),k=parseInt(D.substring(V,V+L),S);8>L?(L=y(Math.pow(S,L)),x=x.j(L).add(y(k))):(x=x.j(A),x=x.add(y(k)))}return x}var w=p(0),T=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(U(this))return-P(this).m();for(var D=0,S=1,A=0;A<this.g.length;A++){var x=this.i(A);D+=(0<=x?x:4294967296+x)*S,S*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(j(this))return"0";if(U(this))return"-"+P(this).toString(D);for(var S=y(Math.pow(D,6)),A=this,x="";;){var V=te(A,S).g;A=W(A,V.j(S));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=V,j(A))return L+x;for(;6>L.length;)L="0"+L;x=L+x}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function j(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function U(D){return D.h==-1}n.l=function(D){return D=W(this,D),U(D)?-1:j(D)?0:1};function P(D){for(var S=D.g.length,A=[],x=0;x<S;x++)A[x]=~D.g[x];return new c(A,~D.h).add(T)}n.abs=function(){return U(this)?P(this):this},n.add=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],x=0,V=0;V<=S;V++){var L=x+(this.i(V)&65535)+(D.i(V)&65535),k=(L>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);x=k>>>16,L&=65535,k&=65535,A[V]=k<<16|L}return new c(A,A[A.length-1]&-2147483648?-1:0)};function W(D,S){return D.add(P(S))}n.j=function(D){if(j(this)||j(D))return w;if(U(this))return U(D)?P(this).j(P(D)):P(P(this).j(D));if(U(D))return P(this.j(P(D)));if(0>this.l(R)&&0>D.l(R))return y(this.m()*D.m());for(var S=this.g.length+D.g.length,A=[],x=0;x<2*S;x++)A[x]=0;for(x=0;x<this.g.length;x++)for(var V=0;V<D.g.length;V++){var L=this.i(x)>>>16,k=this.i(x)&65535,lt=D.i(V)>>>16,jt=D.i(V)&65535;A[2*x+2*V]+=k*jt,J(A,2*x+2*V),A[2*x+2*V+1]+=L*jt,J(A,2*x+2*V+1),A[2*x+2*V+1]+=k*lt,J(A,2*x+2*V+1),A[2*x+2*V+2]+=L*lt,J(A,2*x+2*V+2)}for(x=0;x<S;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=S;x<2*S;x++)A[x]=0;return new c(A,0)};function J(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function ee(D,S){this.g=D,this.h=S}function te(D,S){if(j(S))throw Error("division by zero");if(j(D))return new ee(w,w);if(U(D))return S=te(P(D),S),new ee(P(S.g),P(S.h));if(U(S))return S=te(D,P(S)),new ee(P(S.g),S.h);if(30<D.g.length){if(U(D)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var A=T,x=S;0>=x.l(D);)A=oe(A),x=oe(x);var V=ae(A,1),L=ae(x,1);for(x=ae(x,2),A=ae(A,2);!j(x);){var k=L.add(x);0>=k.l(D)&&(V=V.add(A),L=k),x=ae(x,1),A=ae(A,1)}return S=W(D,V.j(S)),new ee(V,S)}for(V=w;0<=D.l(S);){for(A=Math.max(1,Math.floor(D.m()/S.m())),x=Math.ceil(Math.log(A)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),L=y(A),k=L.j(S);U(k)||0<k.l(D);)A-=x,L=y(A),k=L.j(S);j(L)&&(L=T),V=V.add(L),D=W(D,k)}return new ee(V,D)}n.A=function(D){return te(this,D).h},n.and=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)&D.i(x);return new c(A,this.h&D.h)},n.or=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)|D.i(x);return new c(A,this.h|D.h)},n.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],x=0;x<S;x++)A[x]=this.i(x)^D.i(x);return new c(A,this.h^D.h)};function oe(D){for(var S=D.g.length+1,A=[],x=0;x<S;x++)A[x]=D.i(x)<<1|D.i(x-1)>>>31;return new c(A,D.h)}function ae(D,S){var A=S>>5;S%=32;for(var x=D.g.length-A,V=[],L=0;L<x;L++)V[L]=0<S?D.i(L+A)>>>S|D.i(L+A+1)<<32-S:D.i(L+A);return new c(V,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,J0=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,os=c}).apply(typeof rw<"u"?rw:typeof self<"u"?self:typeof window<"u"?window:{});var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Z0,eu,eT,Ih,dm,tT,nT,rT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var z=u[I];if(!(z in v))break e;v=v[z]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function a(u,m){u instanceof String&&(u+="");var v=0,I=!1,z={next:function(){if(!I&&v<u.length){var H=v++;return{value:m(H,u[H]),done:!1}}return I=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(u){return u||function(){return a(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function w(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,I),u.apply(m,z)}}return function(){return u.apply(m,arguments)}}function T(u,m,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,T.apply(null,arguments)}function R(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function j(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,z,H){for(var ie=Array(arguments.length-2),We=2;We<arguments.length;We++)ie[We-2]=arguments[We];return m.prototype[z].apply(I,ie)}}function U(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function P(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const z=u.length||0,H=I.length||0;u.length=z+H;for(let ie=0;ie<H;ie++)u[z+ie]=I[ie]}else u.push(I)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function J(u){return/^[\s\xa0]*$/.test(u)}function ee(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var oe=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function ae(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function D(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function S(u){const m={};for(const v in u)m[v]=u[v];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,m){let v,I;for(let z=1;z<arguments.length;z++){I=arguments[z];for(v in I)u[v]=I[v];for(let H=0;H<A.length;H++)v=A[H],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function V(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function L(u){d.setTimeout(()=>{throw u},0)}function k(){var u=_e;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class lt{constructor(){this.h=this.g=null}add(m,v){const I=jt.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var jt=new W(()=>new zt,u=>u.reset());class zt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,se=!1,_e=new lt,ce=()=>{const u=d.Promise.resolve(void 0);Ke=()=>{u.then(F)}};var F=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(v){L(v)}var m=jt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}se=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u}();function Ne(u,m){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(oe){e:{try{te(m.nodeName);var z=!0;break e}catch{}z=!1}z||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Le[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ne.aa.h.call(this)}}j(Ne,ye);var Le={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ge(u,m,v,I,z){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=z,this.key=++$e,this.da=this.fa=!1}function At(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Dr(u){this.src=u,this.g={},this.h=0}Dr.prototype.add=function(u,m,v,I,z){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var ie=di(u,m,I,z);return-1<ie?(m=u[ie],v||(m.fa=!1)):(m=new Ge(m,this.src,H,!!I,z),m.fa=v,u.push(m)),m};function Eo(u,m){var v=m.type;if(v in u.g){var I=u.g[v],z=Array.prototype.indexOf.call(I,m,void 0),H;(H=0<=z)&&Array.prototype.splice.call(I,z,1),H&&(At(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function di(u,m,v,I){for(var z=0;z<u.length;++z){var H=u[z];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==I)return z}return-1}var vs="closure_lm_"+(1e6*Math.random()|0),To={};function tl(u,m,v,I,z){if(Array.isArray(m)){for(var H=0;H<m.length;H++)tl(u,m[H],v,I,z);return null}return v=il(v),u&&u[Be]?u.K(m,v,y(I)?!!I.capture:!1,z):nl(u,m,v,!1,I,z)}function nl(u,m,v,I,z,H){if(!m)throw Error("Invalid event type");var ie=y(z)?!!z.capture:!!z,We=So(u);if(We||(u[vs]=We=new Dr(u)),v=We.add(m,v,I,ie,H),v.proxy)return v;if(I=Wu(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)ke||(z=ie),z===void 0&&(z=!1),u.addEventListener(m.toString(),I,z);else if(u.attachEvent)u.attachEvent(Vr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Wu(){function u(v){return m.call(u.src,u.listener,v)}const m=rl;return u}function Io(u,m,v,I,z){if(Array.isArray(m))for(var H=0;H<m.length;H++)Io(u,m[H],v,I,z);else I=y(I)?!!I.capture:!!I,v=il(v),u&&u[Be]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],v=di(H,v,I,z),-1<v&&(At(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=So(u))&&(m=u.g[m.toString()],u=-1,m&&(u=di(m,v,I,z)),(v=-1<u?m[u]:null)&&br(v))}function br(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Be])Eo(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(Vr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=So(m))?(Eo(v,u),v.h==0&&(v.src=null,m[vs]=null)):At(u)}}}function Vr(u){return u in To?To[u]:To[u]="on"+u}function rl(u,m){if(u.da)u=!0;else{m=new Ne(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&br(u),u=v.call(I,m)}return u}function So(u){return u=u[vs],u instanceof Dr?u:null}var Co="__closure_events_fn_"+(1e9*Math.random()>>>0);function il(u){return typeof u=="function"?u:(u[Co]||(u[Co]=function(m){return u.handleEvent(m)}),u[Co])}function yt(){G.call(this),this.i=new Dr(this),this.M=this,this.F=null}j(yt,G),yt.prototype[Be]=!0,yt.prototype.removeEventListener=function(u,m,v,I){Io(this,u,m,v,I)};function vt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new ye(m,u);else if(m instanceof ye)m.target=m.target||u;else{var z=m;m=new ye(I,u),x(m,z)}if(z=!0,v)for(var H=v.length-1;0<=H;H--){var ie=m.g=v[H];z=Mr(ie,I,!0,m)&&z}if(ie=m.g=u,z=Mr(ie,I,!0,m)&&z,z=Mr(ie,I,!1,m)&&z,v)for(H=0;H<v.length;H++)ie=m.g=v[H],z=Mr(ie,I,!1,m)&&z}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)At(v[I]);delete u.g[m],u.h--}}this.F=null},yt.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},yt.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function Mr(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var z=!0,H=0;H<m.length;++H){var ie=m[H];if(ie&&!ie.da&&ie.capture==v){var We=ie.listener,_t=ie.ha||ie.src;ie.fa&&Eo(u.i,ie),z=We.call(_t,I)!==!1&&z}}return z&&!I.defaultPrevented}function sl(u,m,v){if(typeof u=="function")v&&(u=T(u,v));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function fi(u){u.g=sl(()=>{u.g=null,u.i&&(u.i=!1,fi(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class _s extends G{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:fi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ws(u){G.call(this),this.h=u,this.g={}}j(ws,G);var ol=[];function al(u){ae(u.g,function(m,v){this.g.hasOwnProperty(v)&&br(m)},u),u.g={}}ws.prototype.N=function(){ws.aa.N.call(this),al(this)},ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ll=d.JSON.stringify,ul=d.JSON.parse,cl=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Es(){}Es.prototype.h=null;function Ao(u){return u.h||(u.h=u.i())}function Ro(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){ye.call(this,"d")}j(dr,ye);function Po(){ye.call(this,"c")}j(Po,ye);var fr={},hl=null;function Ts(){return hl=hl||new yt}fr.La="serverreachability";function dl(u){ye.call(this,fr.La,u)}j(dl,ye);function Lr(u){const m=Ts();vt(m,new dl(m))}fr.STAT_EVENT="statevent";function fl(u,m){ye.call(this,fr.STAT_EVENT,u),this.stat=m}j(fl,ye);function ut(u){const m=Ts();vt(m,new fl(m,u))}fr.Ma="timingevent";function ko(u,m){ye.call(this,fr.Ma,u),this.size=m}j(ko,ye);function Bn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Is(){this.g=!0}Is.prototype.xa=function(){this.g=!1};function Ss(u,m,v,I,z,H){u.info(function(){if(u.g)if(H)for(var ie="",We=H.split("&"),_t=0;_t<We.length;_t++){var Fe=We[_t].split("=");if(1<Fe.length){var Rt=Fe[0];Fe=Fe[1];var dt=Rt.split("_");ie=2<=dt.length&&dt[1]=="type"?ie+(Rt+"="+Fe+"&"):ie+(Rt+"=redacted&")}}else ie=null;else ie=H;return"XMLHTTP REQ ("+I+") [attempt "+z+"]: "+m+`
`+v+`
`+ie})}function xo(u,m,v,I,z,H,ie){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+z+"]: "+m+`
`+v+`
`+H+" "+ie})}function $n(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vd(u,v)+(I?" "+I:"")})}function pl(u,m){u.info(function(){return"TIMEOUT: "+m})}Is.prototype.info=function(){};function Vd(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var z=I[1];if(Array.isArray(z)&&!(1>z.length)){var H=z[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ie=1;ie<z.length;ie++)z[ie]=""}}}}return ll(v)}catch{return m}}var No={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ku={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qn;function Cs(){}j(Cs,Es),Cs.prototype.g=function(){return new XMLHttpRequest},Cs.prototype.i=function(){return{}},qn=new Cs;function Hn(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qu}function Qu(){this.i=null,this.g="",this.h=!1}var ml={},Oo={};function Do(u,m,v){u.L=1,u.v=vi(_n(m)),u.m=v,u.P=!0,gl(u,null)}function gl(u,m){u.F=Date.now(),Ye(u),u.A=_n(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),wi(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Qu,u.g=dc(u.j,v?m:null,!u.m),0<u.O&&(u.M=new _s(T(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(ol[0]=z.toString()),z=ol);for(var H=0;H<z.length;H++){var ie=tl(v,z[H],I||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Lr(),Ss(u.i,u.u,u.A,u.l,u.R,u.m)}Hn.prototype.ca=function(u){u=u.target;const m=this.M;m&&an(u)==3?m.j():this.Y(u)},Hn.prototype.Y=function(u){try{if(u==this.g)e:{const dt=an(this.g);var m=this.g.Ba();const On=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Tl(this.g)))){this.J||dt!=4||m==7||(m==8||0>=On?Lr(3):Lr(2)),As(this);var v=this.g.Z();this.X=v;t:if(Gu(this)){var I=Tl(this.g);u="";var z=I.length,H=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xn(this),pi(this);var ie="";break t}this.h.i=new d.TextDecoder}for(m=0;m<z;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(H&&m==z-1)});I.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=v==200,xo(this.i,this.u,this.A,this.l,this.R,dt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var We,_t=this.g;if((We=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(We)){var Fe=We;break t}}Fe=null}if(v=Fe)$n(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yl(this,v);else{this.o=!1,this.s=3,ut(12),xn(this),pi(this);break e}}if(this.P){v=!0;let En;for(;!this.J&&this.C<ie.length;)if(En=Md(this,ie),En==Oo){dt==4&&(this.s=4,ut(14),v=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(En==ml){this.s=4,ut(15),$n(this.i,this.l,ie,"[Invalid Chunk]"),v=!1;break}else $n(this.i,this.l,En,null),yl(this,En);if(Gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||ie.length!=0||this.h.h||(this.s=1,ut(16),v=!1),this.o=this.o&&v,!v)$n(this.i,this.l,ie,"[Invalid Chunked Response]"),xn(this),pi(this);else if(0<ie.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Sl(Rt),Rt.M=!0,ut(11))}}else $n(this.i,this.l,ie,null),yl(this,ie);dt==4&&xn(this),this.o&&!this.J&&(dt==4?qo(this.j,this):(this.o=!1,Ye(this)))}else Uo(this.g),v==400&&0<ie.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),xn(this),pi(this)}}}catch{}finally{}};function Gu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Md(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Oo:(v=Number(m.substring(v,I)),isNaN(v)?ml:(I+=1,I+v>m.length?Oo:(m=m.slice(I,I+v),u.C=I+v,m)))}Hn.prototype.cancel=function(){this.J=!0,xn(this)};function Ye(u){u.S=Date.now()+u.I,Yu(u,u.I)}function Yu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Bn(T(u.ba,u),m)}function As(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Hn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(pl(this.i,this.A),this.L!=2&&(Lr(),ut(17)),xn(this),this.s=2,pi(this)):Yu(this,this.S-u)};function pi(u){u.j.G==0||u.J||qo(u.j,u)}function xn(u){As(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,al(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function yl(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Xt(v.h,u))){if(!u.K&&Xt(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var z=I;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)$o(v),Yn(v);else break e;Bo(v),ut(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=Bn(T(v.Za,v),6e3));if(1>=Ju(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Br(v,11)}else if((u.K||v.g==u)&&$o(v),!J(m))for(z=v.Da.g.parse(m),m=0;m<z.length;m++){let Fe=z[m];if(v.T=Fe[0],Fe=Fe[1],v.G==2)if(Fe[0]=="c"){v.K=Fe[1],v.ia=Fe[2];const Rt=Fe[3];Rt!=null&&(v.la=Rt,v.j.info("VER="+v.la));const dt=Fe[4];dt!=null&&(v.Aa=dt,v.j.info("SVER="+v.Aa));const On=Fe[5];On!=null&&typeof On=="number"&&0<On&&(I=1.5*On,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const En=u.g;if(En){const Ds=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var H=I.h;H.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(vl(H,H.h),H.h=null))}if(I.D){const Wo=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(I.ya=Wo,Qe(I.I,I.D,Wo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ie=u;if(I.qa=hc(I,I.J?I.ia:null,I.W),ie.K){Zu(I.h,ie);var We=ie,_t=I.L;_t&&(We.I=_t),We.B&&(As(We),Ye(We)),I.g=ie}else Os(I);0<v.i.length&&yr(v)}else Fe[0]!="stop"&&Fe[0]!="close"||Br(v,7);else v.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Br(v,7):Dt(v):Fe[0]!="noop"&&v.l&&v.l.ta(Fe),v.v=0)}}Lr(4)}catch{}}var Xu=class{constructor(u,m){this.g=u,this.map=m}};function Rs(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ju(u){return u.h?1:u.g?u.g.size:0}function Xt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function vl(u,m){u.g?u.g.add(m):u.h=m}function Zu(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Rs.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ec(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return U(u.i)}function bo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function Vo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function mi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Vo(u),I=bo(u),z=I.length,H=0;H<z;H++)m.call(void 0,I[H],v&&v[H],u)}var Ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ld(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),z=null;if(0<=I){var H=u[v].substring(0,I);z=u[v].substring(I+1)}else H=u[v];m(H,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Fr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Fr){this.h=u.h,ks(this,u.j),this.o=u.o,this.g=u.g,gi(this,u.s),this.l=u.l;var m=u.i,v=new pr;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),yi(this,v),this.m=u.m}else u&&(m=String(u).match(Ps))?(this.h=!1,ks(this,m[1]||"",!0),this.o=Ve(m[2]||""),this.g=Ve(m[3]||"",!0),gi(this,m[4]),this.l=Ve(m[5]||"",!0),yi(this,m[6]||"",!0),this.m=Ve(m[7]||"")):(this.h=!1,this.i=new pr(null,this.h))}Fr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(_i(m,Mo,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(_i(m,Mo,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(_i(v,v.charAt(0)=="/"?rc:nc,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",_i(v,_l)),u.join("")};function _n(u){return new Fr(u)}function ks(u,m,v){u.j=v?Ve(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function gi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function yi(u,m,v){m instanceof pr?(u.i=m,mr(u.i,u.h)):(v||(m=_i(m,ic)),u.i=new pr(m,u.h))}function Qe(u,m,v){u.i.set(m,v)}function vi(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ve(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _i(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,tc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Mo=/[#\/\?@]/g,nc=/[#\?:]/g,rc=/[#\?]/g,ic=/[#\?@]/g,_l=/#/g;function pr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ot(u){u.g||(u.g=new Map,u.h=0,u.i&&Ld(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=pr.prototype,n.add=function(u,m){Ot(this),this.i=null,u=Nn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Wn(u,m){Ot(u),m=Nn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Kn(u,m){return Ot(u),m=Nn(u,m),u.g.has(m)}n.forEach=function(u,m){Ot(this),this.g.forEach(function(v,I){v.forEach(function(z){u.call(m,z,I,this)},this)},this)},n.na=function(){Ot(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const z=u[I];for(let H=0;H<z.length;H++)v.push(m[I])}return v},n.V=function(u){Ot(this);let m=[];if(typeof u=="string")Kn(this,u)&&(m=m.concat(this.g.get(Nn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return Ot(this),this.i=null,u=Nn(this,u),Kn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function wi(u,m,v){Wn(u,m),0<v.length&&(u.i=null,u.g.set(Nn(u,m),U(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const H=encodeURIComponent(String(I)),ie=this.V(I);for(I=0;I<ie.length;I++){var z=H;ie[I]!==""&&(z+="="+encodeURIComponent(String(ie[I]))),u.push(z)}}return this.i=u.join("&")};function Nn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function mr(u,m){m&&!u.j&&(Ot(u),u.i=null,u.g.forEach(function(v,I){var z=I.toLowerCase();I!=z&&(Wn(this,I),wi(this,z,v))},u)),u.j=m}function Fd(u,m){const v=new Is;if(d.Image){const I=new Image;I.onload=R(on,v,"TestLoadImage: loaded",!0,m,I),I.onerror=R(on,v,"TestLoadImage: error",!1,m,I),I.onabort=R(on,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=R(on,v,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function sc(u,m){const v=new Is,I=new AbortController,z=setTimeout(()=>{I.abort(),on(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(z),H.ok?on(v,"TestPingServer: ok",!0,m):on(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),on(v,"TestPingServer: error",!1,m)})}function on(u,m,v,I,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),I(v)}catch{}}function Ud(){this.g=new cl}function oc(u,m,v){const I=v||"";try{mi(u,function(z,H){let ie=z;y(z)&&(ie=ll(z)),m.push(I+H+"="+encodeURIComponent(ie))})}catch(z){throw m.push(I+"type="+encodeURIComponent("_badmap")),z}}function Ur(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Ur,Es),Ur.prototype.g=function(){return new xs(this.l,this.j)},Ur.prototype.i=function(u){return function(){return u}}({});function xs(u,m){yt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(xs,yt),n=xs.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Gn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ac(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ac(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Qn(this):Gn(this),this.readyState==3&&ac(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Qn(this))},n.Qa=function(u){this.g&&(this.response=u,Qn(this))},n.ga=function(){this.g&&Qn(this)};function Qn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Gn(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Gn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function jr(u){let m="";return ae(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Ei(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=jr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Qe(u,m,v))}function tt(u){yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(tt,yt);var jd=/^https?$/i,wl=["POST","PUT"];n=tt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qn.g(),this.v=this.o?Ao(this.o):Ao(qn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Ns(this,H);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var z in I)v.set(z,I[z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())v.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),z=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(wl,m,void 0))||I||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of v)this.g.setRequestHeader(H,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fo(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){Ns(this,H)}};function Ns(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Lo(u),wn(u)}function Lo(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,vt(this,"complete"),vt(this,"abort"),wn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?El(this):this.bb())},n.bb=function(){El(this)};function El(u){if(u.h&&typeof c<"u"&&(!u.v[1]||an(u)!=4||u.Z()!=2)){if(u.u&&an(u)==4)sl(u.Ea,0,u);else if(vt(u,"readystatechange"),an(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ie===0){var z=String(u.D).match(Ps)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),I=!jd.test(z?z.toLowerCase():"")}v=I}if(v)vt(u,"complete"),vt(u,"success");else{u.m=6;try{var H=2<an(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",Lo(u)}}finally{wn(u)}}}}function wn(u,m){if(u.g){Fo(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||vt(u,"ready");try{v.onreadystatechange=I}catch{}}}function Fo(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function an(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ul(m)}};function Tl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Uo(u){const m={};u=(u.g&&2<=an(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(J(u[I]))continue;var v=V(u[I]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[z]||[];m[z]=H,H.push(v)}D(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Il(u){this.Aa=0,this.i=[],this.j=new Is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gr("baseRetryDelayMs",5e3,u),this.cb=gr("retryDelaySeedMs",1e4,u),this.Wa=gr("forwardChannelMaxRetries",2,u),this.wa=gr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Rs(u&&u.concurrentRequestLimit),this.Da=new Ud,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Il.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,I){ut(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=hc(this,null,this.W),yr(this)};function Dt(u){if(jo(u),u.G==3){var m=u.U++,v=_n(u.I);if(Qe(v,"SID",u.K),Qe(v,"RID",m),Qe(v,"TYPE","terminate"),zr(u,v),m=new Hn(u,u.j,m),m.L=2,m.v=vi(_n(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=dc(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ye(m)}cc(u)}function Yn(u){u.g&&(Sl(u),u.g.cancel(),u.g=null)}function jo(u){Yn(u),u.u&&(d.clearTimeout(u.u),u.u=null),$o(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function yr(u){if(!vn(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ke||ce(),se||(Ke(),se=!0),_e.add(m,u),u.B=0}}function zd(u,m){return Ju(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Bn(T(u.Ga,u,m),uc(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new Hn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=S(H),x(H,this.S)):H=this.S),this.m!==null||this.O||(z.H=H,H=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ti(this,z,m),v=_n(this.I),Qe(v,"RID",u),Qe(v,"CVER",22),this.D&&Qe(v,"X-HTTP-Session-Id",this.D),zr(this,v),H&&(this.O?m="headers="+encodeURIComponent(String(jr(H)))+"&"+m:this.m&&Ei(v,this.m,H)),vl(this.h,z),this.Ua&&Qe(v,"TYPE","init"),this.P?(Qe(v,"$req",m),Qe(v,"SID","null"),z.T=!0,Do(z,v,null)):Do(z,v,m),this.G=2}}else this.G==3&&(u?zo(this,u):this.i.length==0||vn(this.h)||zo(this))};function zo(u,m){var v;m?v=m.l:v=u.U++;const I=_n(u.I);Qe(I,"SID",u.K),Qe(I,"RID",v),Qe(I,"AID",u.T),zr(u,I),u.m&&u.o&&Ei(I,u.m,u.o),v=new Hn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ti(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),vl(u.h,v),Do(v,I,m)}function zr(u,m){u.H&&ae(u.H,function(v,I){Qe(m,I,v)}),u.l&&mi({},function(v,I){Qe(m,I,v)})}function Ti(u,m,v){v=Math.min(u.i.length,v);var I=u.l?T(u.l.Na,u.l,u):null;e:{var z=u.i;let H=-1;for(;;){const ie=["count="+v];H==-1?0<v?(H=z[0].g,ie.push("ofs="+H)):H=0:ie.push("ofs="+H);let We=!0;for(let _t=0;_t<v;_t++){let Fe=z[_t].g;const Rt=z[_t].map;if(Fe-=H,0>Fe)H=Math.max(0,z[_t].g-100),We=!1;else try{oc(Rt,ie,"req"+Fe+"_")}catch{I&&I(Rt)}}if(We){I=ie.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Os(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ke||ce(),se||(Ke(),se=!0),_e.add(m,u),u.v=0}}function Bo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Bn(T(u.Fa,u),uc(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,lc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Bn(T(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Yn(this),lc(this))};function Sl(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function lc(u){u.g=new Hn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=_n(u.qa);Qe(m,"RID","rpc"),Qe(m,"SID",u.K),Qe(m,"AID",u.T),Qe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(m,"TO",u.ja),Qe(m,"TYPE","xmlhttp"),zr(u,m),u.m&&u.o&&Ei(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=vi(_n(m)),v.m=null,v.P=!0,gl(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Yn(this),Bo(this),ut(19))};function $o(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function qo(u,m){var v=null;if(u.g==m){$o(u),Sl(u),u.g=null;var I=2}else if(Xt(u.h,m))v=m.D,Zu(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var z=u.B;I=Ts(),vt(I,new ko(I,v)),yr(u)}else Os(u);else if(z=m.s,z==3||z==0&&0<m.X||!(I==1&&zd(u,m)||I==2&&Bo(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),z){case 1:Br(u,5);break;case 4:Br(u,10);break;case 3:Br(u,6);break;default:Br(u,2)}}}function uc(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Br(u,m){if(u.j.info("Error code "+m),m==2){var v=T(u.fb,u),I=u.Xa;const z=!I;I=new Fr(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ks(I,"https"),vi(I),z?Fd(I.toString(),v):sc(I.toString(),v)}else ut(2);u.G=0,u.l&&u.l.sa(m),cc(u),jo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function cc(u){if(u.G=0,u.ka=[],u.l){const m=ec(u.h);(m.length!=0||u.i.length!=0)&&(P(u.ka,m),P(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function hc(u,m,v){var I=v instanceof Fr?_n(v):new Fr(v);if(I.g!="")m&&(I.g=m+"."+I.g),gi(I,I.s);else{var z=d.location;I=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;var H=new Fr(null);I&&ks(H,I),m&&(H.g=m),z&&gi(H,z),v&&(H.l=v),I=H}return v=u.D,m=u.ya,v&&m&&Qe(I,v,m),Qe(I,"VER",u.la),zr(u,I),I}function dc(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new tt(new Ur({eb:v})):new tt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cl(){}n=Cl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ho(){}Ho.prototype.g=function(u,m){return new Jt(u,m)};function Jt(u,m){yt.call(this),this.g=new Il(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!J(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!J(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new vr(this)}j(Jt,yt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Dt(this.g)},Jt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ll(u),u=v);m.i.push(new Xu(m.Ya++,u)),m.G==3&&yr(m)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Dt(this.g),delete this.g,Jt.aa.N.call(this)};function fc(u){dr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}j(fc,dr);function pc(){Po.call(this),this.status=1}j(pc,Po);function vr(u){this.g=u}j(vr,Cl),vr.prototype.ua=function(){vt(this.g,"a")},vr.prototype.ta=function(u){vt(this.g,new fc(u))},vr.prototype.sa=function(u){vt(this.g,new pc)},vr.prototype.ra=function(){vt(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,rT=function(){return new Ho},nT=function(){return Ts()},tT=fr,dm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,Ih=No,Ku.COMPLETE="complete",eT=Ku,Ro.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",yt.prototype.listen=yt.prototype.K,eu=Ro,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,Z0=tt}).apply(typeof fh<"u"?fh:typeof self<"u"?self:typeof window<"u"?window:{});const iw="@firebase/firestore",sw="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new jm("@firebase/firestore");function fa(){return ho.logLevel}function he(n,...e){if(ho.logLevel<=De.DEBUG){const t=e.map(Jm);ho.debug(`Firestore (${Ga}): ${n}`,...t)}}function ci(n,...e){if(ho.logLevel<=De.ERROR){const t=e.map(Jm);ho.error(`Firestore (${Ga}): ${n}`,...t)}}function Fa(n,...e){if(ho.logLevel<=De.WARN){const t=e.map(Jm);ho.warn(`Firestore (${Ga}): ${n}`,...t)}}function Jm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,iT(n,i,t)}function iT(n,e,t){let i=`FIRESTORE (${Ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ci(i),new Error(i)}function He(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||iT(e,o,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ox{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class Dx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bx{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ii,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ii)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new sT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class Vx{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Mx{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Vx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ow{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ow(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ow(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=Fx(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function xe(n,e){return n<e?-1:n>e?1:0}function fm(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return xe(i,o);{const a=oT(),c=Ux(a.encode(aw(n,t)),a.encode(aw(e,t)));return c!==0?c:xe(i,o)}}t+=i>65535?2:1}return xe(n.length,e.length)}function aw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Ux(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return xe(n[t],e[t]);return xe(n.length,e.length)}function Ua(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=-62135596800,uw=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*uw);return new It(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lw)throw new de(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uw}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new It(0,0))}static max(){return new Ae(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="__name__";class Sr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Sr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return xe(e.length,t.length)}static compareSegments(e,t){const i=Sr.isNumericId(e),o=Sr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Sr.extractNumericId(e).compare(Sr.extractNumericId(t)):fm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class et extends Sr{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new et(t)}static emptyPath(){return new et([])}}const jx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Sr{construct(e,t,i){return new Ft(e,t,i)}static isValidIdentifier(e){return jx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cw}static keyField(){return new Ft([cw])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new de(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new de(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(a(),o++)}if(a(),c)throw new de(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=-1;function zx(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new It(t+1,0):new It(t,i));return new ls(o,ve.empty(),e)}function Bx(n){return new ls(n.readTime,n.key,Eu)}class ls{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ls(Ae.min(),ve.empty(),Eu)}static max(){return new ls(Ae.max(),ve.empty(),Eu)}}function $x(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==qx)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,i)=>{t(e)})}static reject(e){return new Q((t,i)=>{i(e)})}static waitFor(e){return new Q((t,i)=>{let o=0,a=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++a,c&&a===o&&t()},p=>i(p))}),c=!0,a===o&&t()})}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next(o=>o?Q.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,a)=>{i.push(t.call(this,o,a))}),this.waitFor(i)}static mapArray(e,t){return new Q((i,o)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next(_=>{c[y]=_,++d,d===a&&i(c)},_=>o(_))}})}static doWhile(e,t){return new Q((i,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):i()};a()})}}function Wx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}md.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=-1;function gd(n){return n==null}function Hh(n){return n===0&&1/n==-1/0}function Kx(n){return typeof n=="number"&&Number.isInteger(n)&&!Hh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="";function Qx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hw(e)),e=Gx(n.get(t),e);return hw(e)}function Gx(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case lT:t+="";break;default:t+=a}}return t}function hw(n){return n+lT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ph(this.root,e,this.comparator,!0)}}class ph{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Lt.RED,this.left=o??Lt.EMPTY,this.right=a??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Lt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fw(this.data.getIterator())}getIteratorFrom(e){return new fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new An([])}unionWith(e){let t=new St(Ft.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new cT("Invalid base64 string: "+a):a}}(e);return new Ut(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const Yx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(n){if(He(!!n,39018),typeof n=="string"){let e=0;const t=Yx.exec(n);if(He(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cs(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="server_timestamp",dT="__type__",fT="__previous_value__",pT="__local_write_time__";function eg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[dT])===null||t===void 0?void 0:t.stringValue)===hT}function yd(n){const e=n.mapValue.fields[fT];return eg(e)?yd(e):e}function Tu(n){const e=us(n.mapValue.fields[pT].timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,t,i,o,a,c,d,p,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const Wh="(default)";class Iu{constructor(e,t){this.projectId=e,this.database=t||Wh}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===Wh}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="__type__",Jx="__max__",mh={mapValue:{}},gT="__vector__",Kh="value";function hs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eg(n)?4:eN(n)?9007199254740991:Zx(n)?10:11:Se(28295,{value:n})}function Or(n,e){if(n===e)return!0;const t=hs(n);if(t!==hs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tu(n).isEqual(Tu(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=us(o.timestampValue),d=us(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return cs(o.bytesValue).isEqual(cs(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return ht(o.geoPointValue.latitude)===ht(a.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ht(o.integerValue)===ht(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=ht(o.doubleValue),d=ht(a.doubleValue);return c===d?Hh(c)===Hh(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Ua(n.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(dw(c)!==dw(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Or(c[p],d[p])))return!1;return!0}(n,e);default:return Se(52216,{left:n})}}function Su(n,e){return(n.values||[]).find(t=>Or(t,e))!==void 0}function ja(n,e){if(n===e)return 0;const t=hs(n),i=hs(e);if(t!==i)return xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=ht(a.integerValue||a.doubleValue),p=ht(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return pw(n.timestampValue,e.timestampValue);case 4:return pw(Tu(n),Tu(e));case 5:return fm(n.stringValue,e.stringValue);case 6:return function(a,c){const d=cs(a),p=cs(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),p=c.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=xe(d[y],p[y]);if(_!==0)return _}return xe(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=xe(ht(a.latitude),ht(c.latitude));return d!==0?d:xe(ht(a.longitude),ht(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mw(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,p,y,_;const w=a.fields||{},T=c.fields||{},R=(d=w[Kh])===null||d===void 0?void 0:d.arrayValue,j=(p=T[Kh])===null||p===void 0?void 0:p.arrayValue,U=xe(((y=R==null?void 0:R.values)===null||y===void 0?void 0:y.length)||0,((_=j==null?void 0:j.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:mw(R,j)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===mh.mapValue&&c===mh.mapValue)return 0;if(a===mh.mapValue)return 1;if(c===mh.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const T=fm(p[w],_[w]);if(T!==0)return T;const R=ja(d[p[w]],y[_[w]]);if(R!==0)return R}return xe(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Se(23264,{Pe:t})}}function pw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xe(n,e);const t=us(n),i=us(e),o=xe(t.seconds,i.seconds);return o!==0?o:xe(t.nanos,i.nanos)}function mw(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=ja(t[o],i[o]);if(a)return a}return xe(t.length,i.length)}function za(n){return pm(n)}function pm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=us(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return cs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ve.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=pm(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of i)a?a=!1:o+=",",o+=`${c}:${pm(t.fields[c])}`;return o+"}"}(n.mapValue):Se(61005,{value:n})}function Sh(n){switch(hs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yd(n);return e?16+Sh(e):16;case 5:return 2*n.stringValue.length;case 6:return cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,a)=>o+Sh(a),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return gs(i.fields,(a,c)=>{o+=a.length+Sh(c)}),o}(n.mapValue);default:throw Se(13486,{value:n})}}function gw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mm(n){return!!n&&"integerValue"in n}function tg(n){return!!n&&"arrayValue"in n}function yw(n){return!!n&&"nullValue"in n}function vw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ch(n){return!!n&&"mapValue"in n}function Zx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[mT])===null||t===void 0?void 0:t.stringValue)===gT}function lu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gs(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=lu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function eN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Jx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=Ft.emptyPath(),i={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=lu(c):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ch(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){gs(t,(o,a)=>e[o]=a);for(const o of i)delete e[o]}clone(){return new yn(lu(this.value))}}function yT(n){const e=[];return gs(n.fields,(t,i)=>{const o=new Ft([t]);if(Ch(i)){const a=yT(i.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,i,o,a,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Gt(e,0,Ae.min(),Ae.min(),Ae.min(),yn.empty(),0)}static newFoundDocument(e,t,i,o){return new Gt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Gt(e,2,t,Ae.min(),Ae.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Ae.min(),Ae.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.position=e,this.inclusive=t}}function _w(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?i=ve.comparator(ve.fromName(c.referenceValue),t.key):i=ja(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function ww(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Or(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t="asc"){this.field=e,this.dir=t}}function tN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{}class mt extends vT{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new rN(e,t,i):t==="array-contains"?new oN(e,i):t==="in"?new aN(e,i):t==="not-in"?new lN(e,i):t==="array-contains-any"?new uN(e,i):new mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new iN(e,i):new sN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ja(t,this.value)):t!==null&&hs(this.value)===hs(t)&&this.matchesComparison(ja(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends vT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new cr(e,t)}matches(e){return _T(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function _T(n){return n.op==="and"}function wT(n){return nN(n)&&_T(n)}function nN(n){for(const e of n.filters)if(e instanceof cr)return!1;return!0}function gm(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+za(n.value);if(wT(n))return n.filters.map(e=>gm(e)).join(",");{const e=n.filters.map(t=>gm(t)).join(",");return`${n.op}(${e})`}}function ET(n,e){return n instanceof mt?function(i,o){return o instanceof mt&&i.op===o.op&&i.field.isEqual(o.field)&&Or(i.value,o.value)}(n,e):n instanceof cr?function(i,o){return o instanceof cr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((a,c,d)=>a&&ET(c,o.filters[d]),!0):!1}(n,e):void Se(19439)}function TT(n){return n instanceof mt?function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`}(n):n instanceof cr?function(t){return t.op.toString()+" {"+t.getFilters().map(TT).join(" ,")+"}"}(n):"Filter"}class rN extends mt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class iN extends mt{constructor(e,t){super(e,"in",t),this.keys=IT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sN extends mt{constructor(e,t){super(e,"not-in",t),this.keys=IT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ve.fromName(i.referenceValue))}class oN extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tg(t)&&Su(t.arrayValue,this.value)}}class aN extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Su(this.value.arrayValue,t)}}class lN extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Su(this.value.arrayValue,t)}}class uN extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Su(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t=null,i=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.Ie=null}}function Ew(n,e=null,t=[],i=[],o=null,a=null,c=null){return new cN(n,e,t,i,o,a,c)}function ng(n){const e=Re(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>gm(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),gd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>za(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>za(i)).join(",")),e.Ie=t}return e.Ie}function rg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!tN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ET(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ww(n.startAt,e.startAt)&&ww(n.endAt,e.endAt)}function ym(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,t=null,i=[],o=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function hN(n,e,t,i,o,a,c,d){return new Ja(n,e,t,i,o,a,c,d)}function ig(n){return new Ja(n)}function Tw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ST(n){return n.collectionGroup!==null}function uu(n){const e=Re(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new St(Ft.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Cu(a,i))}),t.has(Ft.keyField().canonicalString())||e.Ee.push(new Cu(Ft.keyField(),i))}return e.Ee}function xr(n){const e=Re(n);return e.de||(e.de=dN(e,uu(n))),e.de}function dN(n,e){if(n.limitType==="F")return Ew(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Cu(o.field,a)});const t=n.endAt?new Qh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Qh(n.startAt.position,n.startAt.inclusive):null;return Ew(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function vm(n,e){const t=n.filters.concat([e]);return new Ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _m(n,e,t){return new Ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vd(n,e){return rg(xr(n),xr(e))&&n.limitType===e.limitType}function CT(n){return`${ng(xr(n))}|lt:${n.limitType}`}function pa(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>TT(o)).join(", ")}]`),gd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>za(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>za(o)).join(",")),`Target(${i})`}(xr(n))}; limitType=${n.limitType})`}function _d(n,e){return e.isFoundDocument()&&function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ve.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,o){for(const a of uu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,d,p){const y=_w(c,d,p);return c.inclusive?y<=0:y<0}(i.startAt,uu(i),o)||i.endAt&&!function(c,d,p){const y=_w(c,d,p);return c.inclusive?y>=0:y>0}(i.endAt,uu(i),o))}(n,e)}function fN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AT(n){return(e,t)=>{let i=!1;for(const o of uu(n)){const a=pN(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function pN(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):function(a,c,d){const p=c.data.field(a),y=d.data.field(a);return p!==null&&y!==null?ja(p,y):Se(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,(t,i)=>{for(const[o,a]of i)e(o,a)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new st(ve.comparator);function hi(){return mN}const RT=new st(ve.comparator);function tu(...n){let e=RT;for(const t of n)e=e.insert(t.key,t);return e}function PT(n){let e=RT;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Qs(){return cu()}function kT(){return cu()}function cu(){return new yo(n=>n.toString(),(n,e)=>n.isEqual(e))}const gN=new st(ve.comparator),yN=new St(ve.comparator);function be(...n){let e=yN;for(const t of n)e=e.add(t);return e}const vN=new St(xe);function _N(){return vN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function xT(n){return{integerValue:""+n}}function wN(n,e){return Kx(e)?xT(e):sg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function EN(n,e,t){return n instanceof Au?function(o,a){const c={fields:{[dT]:{stringValue:hT},[pT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&eg(a)&&(a=yd(a)),a&&(c.fields[fT]=a),{mapValue:c}}(t,e):n instanceof Ru?OT(n,e):n instanceof Pu?DT(n,e):function(o,a){const c=NT(o,a),d=Iw(c)+Iw(o.Re);return mm(c)&&mm(o.Re)?xT(d):sg(o.serializer,d)}(n,e)}function TN(n,e,t){return n instanceof Ru?OT(n,e):n instanceof Pu?DT(n,e):t}function NT(n,e){return n instanceof Gh?function(i){return mm(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Au extends wd{}class Ru extends wd{constructor(e){super(),this.elements=e}}function OT(n,e){const t=bT(e);for(const i of n.elements)t.some(o=>Or(o,i))||t.push(i);return{arrayValue:{values:t}}}class Pu extends wd{constructor(e){super(),this.elements=e}}function DT(n,e){let t=bT(e);for(const i of n.elements)t=t.filter(o=>!Or(o,i));return{arrayValue:{values:t}}}class Gh extends wd{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Iw(n){return ht(n.integerValue||n.doubleValue)}function bT(n){return tg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this.field=e,this.transform=t}}function SN(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof Ru&&o instanceof Ru||i instanceof Pu&&o instanceof Pu?Ua(i.elements,o.elements,Or):i instanceof Gh&&o instanceof Gh?Or(i.Re,o.Re):i instanceof Au&&o instanceof Au}(n.transform,e.transform)}class CN{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ed{}function VT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new og(n.key,zn.none()):new zu(n.key,n.data,zn.none());{const t=n.data,i=yn.empty();let o=new St(Ft.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),o=o.add(a)}return new ys(n.key,i,new An(o.toArray()),zn.none())}}function AN(n,e,t){n instanceof zu?function(o,a,c){const d=o.value.clone(),p=Cw(o.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ys?function(o,a,c){if(!Ah(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=Cw(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(MT(o)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function hu(n,e,t,i){return n instanceof zu?function(a,c,d,p){if(!Ah(a.precondition,c))return d;const y=a.value.clone(),_=Aw(a.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof ys?function(a,c,d,p){if(!Ah(a.precondition,c))return d;const y=Aw(a.fieldTransforms,p,c),_=c.data;return _.setAll(MT(a)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,i):function(a,c,d){return Ah(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function RN(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=NT(i.transform,o||null);a!=null&&(t===null&&(t=yn.empty()),t.set(i.field,a))}return t||null}function Sw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ua(i,o,(a,c)=>SN(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class zu extends Ed{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ys extends Ed{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function MT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Cw(n,e,t){const i=new Map;He(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,d=e.data.field(a.field);i.set(a.field,TN(c,d,t[o]))}return i}function Aw(n,e,t){const i=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);i.set(o.field,EN(a,c,e))}return i}class og extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PN extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&AN(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=hu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=hu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=kT();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const p=VT(c,d);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(t,i)=>Sw(t,i))&&Ua(this.baseMutations,e.baseMutations,(t,i)=>Sw(t,i))}}class ag{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let o=function(){return gN}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,i[c].version);return new ag(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ue;function ON(n){switch(n){case K.OK:return Se(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function LT(n){if(n===void 0)return ci("GRPC error has no .code"),K.UNKNOWN;switch(n){case pt.OK:return K.OK;case pt.CANCELLED:return K.CANCELLED;case pt.UNKNOWN:return K.UNKNOWN;case pt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case pt.INTERNAL:return K.INTERNAL;case pt.UNAVAILABLE:return K.UNAVAILABLE;case pt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case pt.NOT_FOUND:return K.NOT_FOUND;case pt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case pt.ABORTED:return K.ABORTED;case pt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case pt.DATA_LOSS:return K.DATA_LOSS;default:return Se(39323,{code:n})}}(Ue=pt||(pt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new os([4294967295,4294967295],0);function Rw(n){const e=oT().encode(n),t=new J0;return t.update(e),new Uint8Array(t.digest())}function Pw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new os([t,i],0),new os([o,a],0)]}class lg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new nu(`Invalid padding: ${t}`);if(i<0)throw new nu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new nu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=os.fromNumber(this.pe)}we(e,t,i){let o=e.add(t.multiply(os.fromNumber(i)));return o.compare(DN)===1&&(o=new os([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Rw(e),[i,o]=Pw(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,o,a);if(!this.Se(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new lg(a,o,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=Rw(e),[i,o]=Pw(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,o,a);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Td(Ae.min(),o,new st(xe),hi(),be())}}class Bu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Bu(i,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t,i,o){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=o}}class FT{constructor(e,t){this.targetId=e,this.Ce=t}}class UT{constructor(e,t,i=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class kw{constructor(){this.Fe=0,this.Me=xw(),this.xe=Ut.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=be(),t=be(),i=be();return this.Me.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:a})}}),new Bu(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=xw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,He(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class bN{constructor(e){this.ze=e,this.je=new Map,this.He=hi(),this.Je=gh(),this.Ye=gh(),this.Ze=new st(xe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,i=e.Ce.count,o=this._t(t);if(o){const a=o.target;if(ym(a))if(i===0){const c=new ve(a.path);this.tt(t,c,Gt.newNoDocument(c,Ae.min()))}else He(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=cs(i).toUint8Array()}catch(p){if(p instanceof cT)return Fa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new lg(c,o,a)}catch(p){return Fa(p instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let o=0;return i.forEach(a=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,a,null),o++)}),o}It(e){const t=new Map;this.je.forEach((a,c)=>{const d=this._t(c);if(d){if(a.current&&ym(d.target)){const p=new ve(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,Gt.newNoDocument(p,e))}a.Le&&(t.set(c,a.qe()),a.Qe())}});let i=be();this.Ye.forEach((a,c)=>{let d=!0;c.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const o=new Td(e,t,this.Ze,this.He,i);return this.He=hi(),this.Je=gh(),this.Ye=gh(),this.Ze=new st(xe),o}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new kw,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new St(xe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new St(xe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new kw),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function gh(){return new st(ve.comparator)}function xw(){return new st(ve.comparator)}const VN={asc:"ASCENDING",desc:"DESCENDING"},MN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LN={and:"AND",or:"OR"};class FN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wm(n,e){return n.useProto3Json||gd(e)?e:{value:e}}function Yh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UN(n,e){return Yh(n,e.toTimestamp())}function Nr(n){return He(!!n,49232),Ae.fromTimestamp(function(t){const i=us(t);return new It(i.seconds,i.nanos)}(n))}function ug(n,e){return Em(n,e).canonicalString()}function Em(n,e){const t=function(o){return new et(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function zT(n){const e=et.fromString(n);return He(WT(e),10190,{key:e.toString()}),e}function Tm(n,e){return ug(n.databaseId,e.path)}function xp(n,e){const t=zT(e);if(t.get(1)!==n.databaseId.projectId)throw new de(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve($T(t))}function BT(n,e){return ug(n.databaseId,e)}function jN(n){const e=zT(n);return e.length===4?et.emptyPath():$T(e)}function Im(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $T(n){return He(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Nw(n,e,t){return{name:Tm(n,e),fields:t.value.mapValue.fields}}function zN(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(y,_){return y.useProto3Json?(He(_===void 0||typeof _=="string",58123),Ut.fromBase64String(_||"")):(He(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Ut.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(y){const _=y.code===void 0?K.UNKNOWN:LT(y.code);return new de(_,y.message||"")}(c);t=new UT(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=xp(n,i.document.name),a=Nr(i.document.updateTime),c=i.document.createTime?Nr(i.document.createTime):Ae.min(),d=new yn({mapValue:{fields:i.document.fields}}),p=Gt.newFoundDocument(o,a,c,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new Rh(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=xp(n,i.document),a=i.readTime?Nr(i.readTime):Ae.min(),c=Gt.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Rh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=xp(n,i.document),a=i.removedTargetIds||[];t=new Rh([],a,o,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,c=new NN(o,a),d=i.targetId;t=new FT(d,c)}}return t}function BN(n,e){let t;if(e instanceof zu)t={update:Nw(n,e.key,e.value)};else if(e instanceof og)t={delete:Tm(n,e.key)};else if(e instanceof ys)t={update:Nw(n,e.key,e.data),updateMask:XN(e.fieldMask)};else{if(!(e instanceof PN))return Se(16599,{ft:e.type});t={verify:Tm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const d=c.transform;if(d instanceof Au)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ru)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gh)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Se(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:UN(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Se(27497)}(n,e.precondition)),t}function $N(n,e){return n&&n.length>0?(He(e!==void 0,14353),n.map(t=>function(o,a){let c=o.updateTime?Nr(o.updateTime):Nr(a);return c.isEqual(Ae.min())&&(c=Nr(a)),new CN(c,o.transformResults||[])}(t,e))):[]}function qN(n,e){return{documents:[BT(n,e.path)]}}function HN(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=BT(n,o);const a=function(y){if(y.length!==0)return HT(cr.create(y,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(y){if(y.length!==0)return y.map(_=>function(T){return{field:ma(T.field),direction:QN(T.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=wm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function WN(n){let e=jN(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=function(w){const T=qT(w);return T instanceof cr&&wT(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(T=>function(j){return new Cu(ga(j.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(w){let T;return T=typeof w=="object"?w.value:w,gd(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(w){const T=!!w.before,R=w.values||[];return new Qh(R,T)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const T=!w.before,R=w.values||[];return new Qh(R,T)}(t.endAt)),hN(e,o,c,a,d,"F",p,y)}function KN(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ga(t.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ga(t.unaryFilter.field);return mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ga(t.unaryFilter.field);return mt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ga(t.unaryFilter.field);return mt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(n):n.fieldFilter!==void 0?function(t){return mt.create(ga(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return cr.create(t.compositeFilter.filters.map(i=>qT(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(t.compositeFilter.op))}(n):Se(30097,{filter:n})}function QN(n){return VN[n]}function GN(n){return MN[n]}function YN(n){return LN[n]}function ma(n){return{fieldPath:n.canonicalString()}}function ga(n){return Ft.fromServerFormat(n.fieldPath)}function HT(n){return n instanceof mt?function(t){if(t.op==="=="){if(vw(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NAN"}};if(yw(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vw(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NOT_NAN"}};if(yw(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(t.field),op:GN(t.op),value:t.value}}}(n):n instanceof cr?function(t){const i=t.getFilters().map(o=>HT(o));return i.length===1?i[0]:{compositeFilter:{op:YN(t.op),filters:i}}}(n):Se(54877,{filter:n})}function XN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t,i,o,a=Ae.min(),c=Ae.min(),d=Ut.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.wt=e}}function ZN(n){const e=WN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_m(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.Cn=new tO}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(ls.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class tO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new St(et.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new St(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KT=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(KT,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ba(0)}static lr(){return new Ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="LruGarbageCollector",nO=1048576;function bw([n,e],[t,i]){const o=xe(n,t);return o===0?xe(e,i):o}class rO{constructor(e){this.Er=e,this.buffer=new St(bw),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();bw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){he(Dw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xa(t)?he(Dw,"Ignoring IndexedDB error during garbage collection: ",t):await Ya(t)}await this.mr(3e5)})}}class sO{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(md.le);const i=new rO(t);return this.gr.forEachTarget(e,o=>i.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>i.Rr(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Ow)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ow):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,o,a,c,d,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(i=w,d=Date.now(),this.removeTargets(e,i,t))).next(w=>(a=w,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(y=Date.now(),fa()<=De.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w})))}}function oO(n,e){return new sO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.changes=new yo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&hu(i.mutation,o,An.empty(),It.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,t,i=be()){const o=Qs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(a=>{let c=tu();return a.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Qs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,be()))}populateOverlays(e,t,i){const o=[];return i.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,o){let a=hi();const c=cu(),d=function(){return cu()}();return t.forEach((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof ys)?a=a.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),hu(_.mutation,y,_.mutation.getFieldMask(),It.now())):c.set(y.key,An.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((y,_)=>c.set(y,_)),t.forEach((y,_)=>{var w;return d.set(y,new lO(_,(w=c.get(y))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const i=cu();let o=new st((c,d)=>c-d),a=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||An.empty();_=d.applyToLocalView(y,_),i.set(p,_);const w=(o.get(d.batchId)||be()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,w=kT();_.forEach(T=>{if(!a.has(T)){const R=VT(t.get(T),i.get(T));R!==null&&w.set(T,R),a=a.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,w))}return Q.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ST(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):Q.resolve(Qs());let d=Eu,p=a;return c.next(y=>Q.forEach(y,(_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(_)?Q.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{p=p.insert(_,T)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,p,y,be())).next(_=>({batchId:d,changes:PT(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(i=>{let o=tu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let c=tu();return this.indexManager.getCollectionParents(e,a).next(d=>Q.forEach(d,p=>{const y=function(w,T){return new Ja(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(_=>{_.forEach((w,T)=>{c=c.insert(w,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o))).next(c=>{a.forEach((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,Gt.newInvalidDocument(_)))});let d=tu();return c.forEach((p,y)=>{const _=a.get(p);_!==void 0&&hu(_.mutation,y,An.empty(),It.now()),_d(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Q.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Nr(o.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:ZN(o.bundledQuery),readTime:Nr(o.readTime)}}(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.overlays=new st(ve.comparator),this.Qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Qs();return Q.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&i.set(o,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,a)=>{this.bt(e,t,a)}),Q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Qr.get(i);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const o=Qs(),a=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new st((y,_)=>y-_);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=a.get(y.largestBatchId);_===null&&(_=Qs(),a=a.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=Qs(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,_)=>d.set(y,_)),!(d.size()>=o)););return Q.resolve(d)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Qr.get(o.largestBatchId).delete(i.key);this.Qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new xN(t,i));let a=this.Qr.get(t);a===void 0&&(a=be(),this.Qr.set(t,a)),this.Qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.$r=new St(Nt.Ur),this.Kr=new St(Nt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const i=new Nt(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new Nt(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){const t=new ve(new et([])),i=new Nt(t,e),o=new Nt(t,e+1),a=[];return this.Kr.forEachInRange([i,o],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ve(new et([])),i=new Nt(t,e),o=new Nt(t,e+1);let a=be();return this.Kr.forEachInRange([i,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Nt(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Nt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ve.comparator(e.key,t.key)||xe(e.Zr,t.Zr)}static Wr(e,t){return xe(e.Zr,t.Zr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new St(Nt.Ur)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new kN(a,t,i,o);this.mutationQueue.push(c);for(const d of o)this.Xr=this.Xr.add(new Nt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Q.resolve(c)}lookupMutationBatch(e,t){return Q.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ti(i),a=o<0?0:o;return Q.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Zm:this.nr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nt(t,0),o=new Nt(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([i,o],c=>{const d=this.ei(c.Zr);a.push(d)}),Q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(xe);return t.forEach(o=>{const a=new Nt(o,0),c=new Nt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],d=>{i=i.add(d.Zr)})}),Q.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;ve.isDocumentKey(a)||(a=a.child(""));const c=new Nt(new ve(a),0);let d=new St(xe);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Zr)),!0)},c),Q.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(i=>{const o=this.ei(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){He(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return Q.forEach(t.mutations,o=>{const a=new Nt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){const i=new Nt(t,0),o=this.Xr.firstAfterOrEqual(i);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.ii=e,this.docs=function(){return new st(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,c=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let i=hi();return t.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():Gt.newInvalidDocument(o))}),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=hi();const c=t.path,d=new ve(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||$x(Bx(_),i)<=0||(o.has(_.key)||_d(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return Q.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Se(9500)}si(e,t){return Q.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new mO(this)}getSize(e){return Q.resolve(this.size)}}class mO extends aO{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(i)}),Q.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.persistence=e,this.oi=new yo(t=>ng(t),rg),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this._i=0,this.ai=new cg,this.targetCount=0,this.ui=Ba.cr()}forEachTarget(e,t){return this.oi.forEach((i,o)=>t(o)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),Q.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ba(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Tr(t),Q.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),Q.waitFor(a).next(()=>o)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.oi.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),Q.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ai.Yr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,t){this.ci={},this.overlays={},this.li=new md(0),this.hi=!1,this.hi=!0,this.Pi=new dO,this.referenceDelegate=e(this),this.Ti=new gO(this),this.indexManager=new eO,this.remoteDocumentCache=function(o){return new pO(o)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new JN(t),this.Ei=new cO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new fO(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new yO(this.li.next());return this.referenceDelegate.di(),i(o).next(a=>this.referenceDelegate.Ai(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Ri(e,t){return Q.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}}class yO extends Hx{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Vi=new cg,this.mi=null}static fi(e){return new hg(e)}get gi(){if(this.mi)return this.mi;throw Se(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.gi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.gi,i=>{const o=ve.fromPath(i);return this.pi(e,o).next(a=>{a||t.removeEntry(o,Ae.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return Q.or([()=>Q.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Xh{constructor(e,t){this.persistence=e,this.yi=new yo(i=>Qx(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=oO(this,t)}static fi(e,t){return new Xh(e,t)}di(){}Ai(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}Sr(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return Q.forEach(this.yi,(i,o)=>this.Dr(e,i,o).next(a=>a?Q.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.si(e,c=>this.Dr(e,c,t).next(d=>{d||(i++,a.removeEntry(c,Ae.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Q.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sh(e.data.value)),t}Dr(e,t,i){return Q.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return Q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.ds=i,this.As=o}static Rs(e,t){let i=be(),o=be();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new dg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return X1()?8:Wx(Yt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ws(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Ss(e,t,o,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new vO;return this.bs(e,t,c).next(d=>{if(a.result=d,this.fs)return this.Ds(e,t,c,d.size)})}).next(()=>a.result)}Ds(e,t,i,o){return i.documentReadCount<this.gs?(fa()<=De.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",pa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Q.resolve()):(fa()<=De.DEBUG&&he("QueryEngine","Query:",pa(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ps*o?(fa()<=De.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",pa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):Q.resolve())}ws(e,t){if(Tw(t))return Q.resolve(null);let i=xr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=_m(t,null,"F"),i=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=be(...a);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.vs(t,d);return this.Cs(t,y,c,p.readTime)?this.ws(e,_m(t,null,"F")):this.Fs(e,y,t,p)}))})))}Ss(e,t,i,o){return Tw(t)||o.isEqual(Ae.min())?Q.resolve(null):this.ys.getDocuments(e,i).next(a=>{const c=this.vs(t,a);return this.Cs(t,c,i,o)?Q.resolve(null):(fa()<=De.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),pa(t)),this.Fs(e,c,t,zx(o,Eu)).next(d=>d))})}vs(e,t){let i=new St(AT(e));return t.forEach((o,a)=>{_d(e,a)&&(i=i.add(a))}),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}bs(e,t,i){return fa()<=De.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",pa(t)),this.ys.getDocumentsMatchingQuery(e,t,ls.min(),i)}Fs(e,t,i,o){return this.ys.getDocumentsMatchingQuery(e,i,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LocalStore",wO=3e8;class EO{constructor(e,t,i,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new st(xe),this.Os=new yo(a=>ng(a),rg),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uO(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function TO(n,e,t,i){return new EO(n,e,t,i)}async function GT(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],d=[];let p=be();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of a){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(y=>({ks:y,removedBatchIds:c,addedBatchIds:d}))})})}function IO(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,_){const w=y.batch,T=w.keys();let R=Q.resolve();return T.forEach(j=>{R=R.next(()=>_.getEntry(p,j)).next(U=>{const P=y.docVersions.get(j);He(P!==null,48541),U.version.compareTo(P)<0&&(w.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),_.addEntry(U)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=be();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function YT(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function SO(n,e){const t=Re(n),i=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const d=[];e.targetChanges.forEach((_,w)=>{const T=o.get(w);if(!T)return;d.push(t.Ti.removeMatchingKeys(a,_.removedDocuments,w).next(()=>t.Ti.addMatchingKeys(a,_.addedDocuments,w)));let R=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(Ut.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),o=o.insert(w,R),function(U,P,W){return U.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=wO?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(T,R,_)&&d.push(t.Ti.updateTargetData(a,R))});let p=hi(),y=be();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),d.push(CO(a,c,e.documentUpdates).next(_=>{p=_.qs,y=_.Qs})),!i.isEqual(Ae.min())){const _=t.Ti.getLastRemoteSnapshotVersion(a).next(w=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,i));d.push(_)}return Q.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,y)).next(()=>p)}).then(a=>(t.xs=o,a))}function CO(n,e,t){let i=be(),o=be();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let c=hi();return t.forEach((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):he(fg,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{qs:c,Qs:o}})}function AO(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Zm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function RO(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Ti.getTargetData(i,e).next(a=>a?(o=a,Q.resolve(o)):t.Ti.allocateTargetId(i).next(c=>(o=new ts(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.xs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}async function Sm(n,e,t){const i=Re(n),o=i.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Xa(c))throw c;he(fg,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(o.target)}function Vw(n,e,t){const i=Re(n);let o=Ae.min(),a=be();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,_){const w=Re(p),T=w.Os.get(_);return T!==void 0?Q.resolve(w.xs.get(T)):w.Ti.getTargetData(y,_)}(i,c,xr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(p=>{a=p})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,t?o:Ae.min(),t?a:be())).next(d=>(PO(i,fN(e),d),{documents:d,$s:a})))}function PO(n,e,t){let i=n.Ns.get(e)||Ae.min();t.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Ns.set(e,i)}class Mw{constructor(){this.activeTargetIds=_N()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kO{constructor(){this.xo=new Mw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Mw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="ConnectivityMonitor";class Fw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){he(Lw,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){he(Lw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function Cm(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="RestConnection",NO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${o}`,this.Go=this.databaseId.database===Wh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}zo(e,t,i,o,a){const c=Cm(),d=this.jo(e,t.toUriEncodedString());he(Np,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,a);const{host:y}=new URL(d),_=bu(y);return this.Jo(e,d,p,i,_).then(w=>(he(Np,`Received RPC '${e}' ${c}: `,w),w),w=>{throw Fa(Np,`RPC '${e}' ${c} failed with error: `,w,"url: ",d,"request:",i),w})}Yo(e,t,i,o,a,c){return this.zo(e,t,i,o,a)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ga}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),i&&i.headers.forEach((o,a)=>e[a]=o)}jo(e,t){const i=NO[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class bO extends OO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const c=Cm();return new Promise((d,p)=>{const y=new Z0;y.setWithCredentials(!0),y.listenOnce(eT.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Ih.NO_ERROR:const w=y.getResponseJson();he(Wt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),d(w);break;case Ih.TIMEOUT:he(Wt,`RPC '${e}' ${c} timed out`),p(new de(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const T=y.getStatus();if(he(Wt,`RPC '${e}' ${c} failed with status:`,T,"response text:",y.getResponseText()),T>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const j=R==null?void 0:R.error;if(j&&j.status&&j.message){const U=function(W){const J=W.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(J)>=0?J:K.UNKNOWN}(j.status);p(new de(U,j.message))}else p(new de(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new de(K.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(Wt,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(o);he(Wt,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",_,i,15)})}T_(e,t,i){const o=Cm(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=rT(),d=nT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");he(Wt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=c.createWebChannel(_,p);let T=!1,R=!1;const j=new DO({Zo:P=>{R?he(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(T||(he(Wt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),he(Wt,`RPC '${e}' stream ${o} sending:`,P),w.send(P))},Xo:()=>w.close()}),U=(P,W,J)=>{P.listen(W,ee=>{try{J(ee)}catch(te){setTimeout(()=>{throw te},0)}})};return U(w,eu.EventType.OPEN,()=>{R||(he(Wt,`RPC '${e}' stream ${o} transport opened.`),j.__())}),U(w,eu.EventType.CLOSE,()=>{R||(R=!0,he(Wt,`RPC '${e}' stream ${o} transport closed`),j.u_())}),U(w,eu.EventType.ERROR,P=>{R||(R=!0,Fa(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),j.u_(new de(K.UNAVAILABLE,"The operation could not be completed")))}),U(w,eu.EventType.MESSAGE,P=>{var W;if(!R){const J=P.data[0];He(!!J,16349);const ee=J,te=(ee==null?void 0:ee.error)||((W=ee[0])===null||W===void 0?void 0:W.error);if(te){he(Wt,`RPC '${e}' stream ${o} received error:`,te);const oe=te.status;let ae=function(A){const x=pt[A];if(x!==void 0)return LT(x)}(oe),D=te.message;ae===void 0&&(ae=K.INTERNAL,D="Unknown error status: "+oe+" with message "+te.message),R=!0,j.u_(new de(ae,D)),w.close()}else he(Wt,`RPC '${e}' stream ${o} received:`,J),j.c_(J)}}),U(d,tT.STAT_EVENT,P=>{P.stat===dm.PROXY?he(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===dm.NOPROXY&&he(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.a_()},0),j}}function Op(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(n){return new FN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t,i=1e3,o=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=i,this.E_=o,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),i=Math.max(0,Date.now()-this.V_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="PersistentStream";class JT{constructor(e,t,i,o,a,c,d,p){this.xi=e,this.y_=i,this.w_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new XT(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.S_===t&&this.K_(i,o)},i=>{e(()=>{const o=new de(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.W_(o)})})}K_(e,t){const i=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{i(()=>this.W_(o))}),this.stream.onMessage(o=>{i(()=>++this.v_==1?this.z_(o):this.onNext(o))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return he(Uw,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(he(Uw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VO extends JT{constructor(e,t,i,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=zN(this.serializer,e),i=function(a){if(!("targetChange"in a))return Ae.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Nr(c.readTime):Ae.min()}(e);return this.listener.j_(t,i)}H_(e){const t={};t.database=Im(this.serializer),t.addTarget=function(a,c){let d;const p=c.target;if(d=ym(p)?{documents:qN(a,p)}:{query:HN(a,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=jT(a,c.resumeToken);const y=wm(a,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Yh(a,c.snapshotVersion.toTimestamp());const y=wm(a,c.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const i=KN(this.serializer,e);i&&(t.labels=i),this.L_(t)}J_(e){const t={};t.database=Im(this.serializer),t.removeTarget=e,this.L_(t)}}class MO extends JT{constructor(e,t,i,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=$N(e.writeResults,e.commitTime),i=Nr(e.commitTime);return this.listener.ea(i,t)}ta(){const e={};e.database=Im(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>BN(this.serializer,i))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{}class FO extends LO{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.na=!1}ra(){if(this.na)throw new de(K.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,Em(t,i),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(K.UNKNOWN,a.toString())})}Yo(e,t,i,o,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,Em(t,i),o,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(K.UNKNOWN,c.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class UO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(ci(t),this.oa=!1):he("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class jO{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(c=>{i.enqueueAndForget(async()=>{vo(this)&&(he(fo,"Restarting streams for network reachability change."),await async function(p){const y=Re(p);y.Ta.add(4),await $u(y),y.da.set("Unknown"),y.Ta.delete(4),await Sd(y)}(this))})}),this.da=new UO(i,o)}}async function Sd(n){if(vo(n))for(const e of n.Ia)await e(!0)}async function $u(n){for(const e of n.Ia)await e(!1)}function ZT(n,e){const t=Re(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),yg(t)?gg(t):Za(t).M_()&&mg(t,e))}function pg(n,e){const t=Re(n),i=Za(t);t.Pa.delete(e),i.M_()&&eI(t,e),t.Pa.size===0&&(i.M_()?i.N_():vo(t)&&t.da.set("Unknown"))}function mg(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Za(n).H_(e)}function eI(n,e){n.Aa.Ke(e),Za(n).J_(e)}function gg(n){n.Aa=new bN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Za(n).start(),n.da._a()}function yg(n){return vo(n)&&!Za(n).F_()&&n.Pa.size>0}function vo(n){return Re(n).Ta.size===0}function tI(n){n.Aa=void 0}async function zO(n){n.da.set("Online")}async function BO(n){n.Pa.forEach((e,t)=>{mg(n,e)})}async function $O(n,e){tI(n),yg(n)?(n.da.ca(e),gg(n)):n.da.set("Unknown")}async function qO(n,e,t){if(n.da.set("Online"),e instanceof UT&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const d of a.targetIds)o.Pa.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Pa.delete(d),o.Aa.removeTarget(d))}(n,e)}catch(i){he(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Jh(n,i)}else if(e instanceof Rh?n.Aa.Xe(e):e instanceof FT?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Ae.min()))try{const i=await YT(n.localStore);t.compareTo(i)>=0&&await function(a,c){const d=a.Aa.It(c);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Pa.get(y);_&&a.Pa.set(y,_.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,y)=>{const _=a.Pa.get(p);if(!_)return;a.Pa.set(p,_.withResumeToken(Ut.EMPTY_BYTE_STRING,_.snapshotVersion)),eI(a,p);const w=new ts(_.target,p,y,_.sequenceNumber);mg(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){he(fo,"Failed to raise snapshot:",i),await Jh(n,i)}}async function Jh(n,e,t){if(!Xa(e))throw e;n.Ta.add(1),await $u(n),n.da.set("Offline"),t||(t=()=>YT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(fo,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Sd(n)})}function nI(n,e){return e().catch(t=>Jh(n,t,e))}async function Cd(n){const e=Re(n),t=ds(e);let i=e.ha.length>0?e.ha[e.ha.length-1].batchId:Zm;for(;HO(e);)try{const o=await AO(e.localStore,i);if(o===null){e.ha.length===0&&t.N_();break}i=o.batchId,WO(e,o)}catch(o){await Jh(e,o)}rI(e)&&iI(e)}function HO(n){return vo(n)&&n.ha.length<10}function WO(n,e){n.ha.push(e);const t=ds(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function rI(n){return vo(n)&&!ds(n).F_()&&n.ha.length>0}function iI(n){ds(n).start()}async function KO(n){ds(n).ta()}async function QO(n){const e=ds(n);for(const t of n.ha)e.Z_(t.mutations)}async function GO(n,e,t){const i=n.ha.shift(),o=ag.from(i,e,t);await nI(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Cd(n)}async function YO(n,e){e&&ds(n).Y_&&await async function(i,o){if(function(c){return ON(c)&&c!==K.ABORTED}(o.code)){const a=i.ha.shift();ds(i).O_(),await nI(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Cd(i)}}(n,e),rI(n)&&iI(n)}async function jw(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),he(fo,"RemoteStore received new credentials");const i=vo(t);t.Ta.add(3),await $u(t),i&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Sd(t)}async function XO(n,e){const t=Re(n);e?(t.Ta.delete(2),await Sd(t)):e||(t.Ta.add(2),await $u(t),t.da.set("Unknown"))}function Za(n){return n.Ra||(n.Ra=function(t,i,o){const a=Re(t);return a.ra(),new VO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{e_:zO.bind(null,n),n_:BO.bind(null,n),i_:$O.bind(null,n),j_:qO.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),yg(n)?gg(n):n.da.set("Unknown")):(await n.Ra.stop(),tI(n))})),n.Ra}function ds(n){return n.Va||(n.Va=function(t,i,o){const a=Re(t);return a.ra(),new MO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:KO.bind(null,n),i_:YO.bind(null,n),X_:QO.bind(null,n),ea:GO.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Cd(n)):(await n.Va.stop(),n.ha.length>0&&(he(fo,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const c=Date.now()+i,d=new vg(e,t,c,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(n,e){if(ci("AsyncQueue",`${e}: ${n}`),Xa(n))return new de(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=tu(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ta;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.ma=new st(ve.comparator)}track(e){const t=e.doc.key,i=this.ma.get(t);i?e.type!==0&&i.type===3?this.ma=this.ma.insert(t,e):e.type===3&&i.type!==1?this.ma=this.ma.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ma=this.ma.remove(t):e.type===1&&i.type===2?this.ma=this.ma.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):Se(63341,{Vt:e,fa:i}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,i)=>{e.push(i)}),e}}class $a{constructor(e,t,i,o,a,c,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new $a(e,t,Ta.emptySet(t),c,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class ZO{constructor(){this.queries=Bw(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,i){const o=Re(t),a=o.queries;o.queries=Bw(),a.forEach((c,d)=>{for(const p of d.ya)p.onError(i)})})(this,new de(K.ABORTED,"Firestore shutting down"))}}function Bw(){return new yo(n=>CT(n),vd)}async function sI(n,e){const t=Re(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.wa()&&e.Sa()&&(i=2):(a=new JO,i=e.Sa()?0:1);try{switch(i){case 0:a.pa=await t.onListen(o,!0);break;case 1:a.pa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=_g(c,`Initialization of query '${pa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&wg(t)}async function oI(n,e){const t=Re(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const c=a.ya.indexOf(e);c>=0&&(a.ya.splice(c,1),a.ya.length===0?o=e.Sa()?0:1:!a.wa()&&e.Sa()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function eD(n,e){const t=Re(n);let i=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.ya)d.va(o)&&(i=!0);c.pa=o}}i&&wg(t)}function tD(n,e,t){const i=Re(n),o=i.queries.get(e);if(o)for(const a of o.ya)a.onError(t);i.queries.delete(e)}function wg(n){n.ba.forEach(e=>{e.next()})}var Am,$w;($w=Am||(Am={})).Ca="default",$w.Cache="cache";class aI{constructor(e,t,i){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=i||{}}va(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new $a(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const i=t!=="Offline";return(!this.options.La||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.key=e}}class uI{constructor(e){this.key=e}}class nD{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=be(),this.mutatedKeys=be(),this.Ha=AT(e),this.Ja=new Ta(this.Ha)}get Ya(){return this.Ga}Za(e,t){const i=t?t.Xa:new zw,o=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const T=o.get(_),R=_d(this.query,w)?w:null,j=!!T&&this.mutatedKeys.has(T.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let P=!1;T&&R?T.data.isEqual(R.data)?j!==U&&(i.track({type:3,doc:R}),P=!0):this.eu(T,R)||(i.track({type:2,doc:R}),P=!0,(p&&this.Ha(R,p)>0||y&&this.Ha(R,y)<0)&&(d=!0)):!T&&R?(i.track({type:0,doc:R}),P=!0):T&&!R&&(i.track({type:1,doc:T}),P=!0,(p||y)&&(d=!0)),P&&(R?(c=c.add(R),a=U?a.add(_):a.delete(_)):(c=c.delete(_),a=a.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ja:c,Xa:i,Cs:d,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const c=e.Xa.ga();c.sort((_,w)=>function(R,j){const U=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:P})}};return U(R)-U(j)}(_.type,w.type)||this.Ha(_.doc,w.doc)),this.tu(i),o=o!=null&&o;const d=t&&!o?this.nu():[],p=this.ja.size===0&&this.current&&!o?1:0,y=p!==this.za;return this.za=p,c.length!==0||y?{snapshot:new $a(this.query,e.Ja,a,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ru:d}:{ru:d}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new zw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=be(),this.Ja.forEach(i=>{this.iu(i.key)&&(this.ja=this.ja.add(i.key))});const t=[];return e.forEach(i=>{this.ja.has(i)||t.push(new uI(i))}),this.ja.forEach(i=>{e.has(i)||t.push(new lI(i))}),t}su(e){this.Ga=e.$s,this.ja=be();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return $a.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Eg="SyncEngine";class rD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class iD{constructor(e){this.key=e,this._u=!1}}class sD{constructor(e,t,i,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.au={},this.uu=new yo(d=>CT(d),vd),this.cu=new Map,this.lu=new Set,this.hu=new st(ve.comparator),this.Pu=new Map,this.Tu=new cg,this.Iu={},this.Eu=new Map,this.du=Ba.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function oD(n,e,t=!0){const i=mI(n);let o;const a=i.uu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.ou()):o=await cI(i,e,t,!0),o}async function aD(n,e){const t=mI(n);await cI(t,e,!0,!1)}async function cI(n,e,t,i){const o=await RO(n.localStore,xr(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await lD(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&ZT(n.remoteStore,o),d}async function lD(n,e,t,i,o){n.Ru=(w,T,R)=>async function(U,P,W,J){let ee=P.view.Za(W);ee.Cs&&(ee=await Vw(U.localStore,P.query,!1).then(({documents:D})=>P.view.Za(D,ee)));const te=J&&J.targetChanges.get(P.targetId),oe=J&&J.targetMismatches.get(P.targetId)!=null,ae=P.view.applyChanges(ee,U.isPrimaryClient,te,oe);return Hw(U,P.targetId,ae.ru),ae.snapshot}(n,w,T,R);const a=await Vw(n.localStore,e,!0),c=new nD(e,a.$s),d=c.Za(a.documents),p=Bu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(d,n.isPrimaryClient,p);Hw(n,t,y.ru);const _=new rD(e,t,c);return n.uu.set(e,_),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),y.snapshot}async function uD(n,e,t){const i=Re(n),o=i.uu.get(e),a=i.cu.get(o.targetId);if(a.length>1)return i.cu.set(o.targetId,a.filter(c=>!vd(c,e))),void i.uu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Sm(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&pg(i.remoteStore,o.targetId),Rm(i,o.targetId)}).catch(Ya)):(Rm(i,o.targetId),await Sm(i.localStore,o.targetId,!0))}async function cD(n,e){const t=Re(n),i=t.uu.get(e),o=t.cu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),pg(t.remoteStore,i.targetId))}async function hD(n,e,t){const i=vD(n);try{const o=await function(c,d){const p=Re(c),y=It.now(),_=d.reduce((R,j)=>R.add(j.key),be());let w,T;return p.persistence.runTransaction("Locally write mutations","readwrite",R=>{let j=hi(),U=be();return p.Bs.getEntries(R,_).next(P=>{j=P,j.forEach((W,J)=>{J.isValidDocument()||(U=U.add(W))})}).next(()=>p.localDocuments.getOverlayedDocuments(R,j)).next(P=>{w=P;const W=[];for(const J of d){const ee=RN(J,w.get(J.key).overlayedDocument);ee!=null&&W.push(new ys(J.key,ee,yT(ee.value.mapValue),zn.exists(!0)))}return p.mutationQueue.addMutationBatch(R,y,W,d)}).next(P=>{T=P;const W=P.applyToLocalDocumentSet(w,U);return p.documentOverlayCache.saveOverlays(R,P.batchId,W)})}).then(()=>({batchId:T.batchId,changes:PT(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let y=c.Iu[c.currentUser.toKey()];y||(y=new st(xe)),y=y.insert(d,p),c.Iu[c.currentUser.toKey()]=y}(i,o.batchId,t),await qu(i,o.changes),await Cd(i.remoteStore)}catch(o){const a=_g(o,"Failed to persist write");t.reject(a)}}async function hI(n,e){const t=Re(n);try{const i=await SO(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Pu.get(a);c&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c._u=!0:o.modifiedDocuments.size>0?He(c._u,14607):o.removedDocuments.size>0&&(He(c._u,42227),c._u=!1))}),await qu(t,i,e)}catch(i){await Ya(i)}}function qw(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.uu.forEach((a,c)=>{const d=c.view.Da(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=Re(c);p.onlineState=d;let y=!1;p.queries.forEach((_,w)=>{for(const T of w.ya)T.Da(d)&&(y=!0)}),y&&wg(p)}(i.eventManager,e),o.length&&i.au.j_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dD(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Pu.get(e),a=o&&o.key;if(a){let c=new st(ve.comparator);c=c.insert(a,Gt.newNoDocument(a,Ae.min()));const d=be().add(a),p=new Td(Ae.min(),new Map,new st(xe),c,d);await hI(i,p),i.hu=i.hu.remove(a),i.Pu.delete(e),Tg(i)}else await Sm(i.localStore,e,!1).then(()=>Rm(i,e,t)).catch(Ya)}async function fD(n,e){const t=Re(n),i=e.batch.batchId;try{const o=await IO(t.localStore,e);fI(t,i,null),dI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await qu(t,o)}catch(o){await Ya(o)}}async function pD(n,e,t){const i=Re(n);try{const o=await function(c,d){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next(w=>(He(w!==null,37113),_=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>p.localDocuments.getDocuments(y,_))})}(i.localStore,e);fI(i,e,t),dI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await qu(i,o)}catch(o){await Ya(o)}}function dI(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function fI(n,e,t){const i=Re(n);let o=i.Iu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Iu[i.currentUser.toKey()]=o}}function Rm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.cu.get(e))n.uu.delete(i),t&&n.au.Vu(i,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(i=>{n.Tu.containsKey(i)||pI(n,i)})}function pI(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(pg(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),Tg(n))}function Hw(n,e,t){for(const i of t)i instanceof lI?(n.Tu.addReference(i.key,e),mD(n,i)):i instanceof uI?(he(Eg,"Document no longer in limbo: "+i.key),n.Tu.removeReference(i.key,e),n.Tu.containsKey(i.key)||pI(n,i.key)):Se(19791,{mu:i})}function mD(n,e){const t=e.key,i=t.path.canonicalString();n.hu.get(t)||n.lu.has(i)||(he(Eg,"New document in limbo: "+t),n.lu.add(i),Tg(n))}function Tg(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new ve(et.fromString(e)),i=n.du.next();n.Pu.set(i,new iD(t)),n.hu=n.hu.insert(t,i),ZT(n.remoteStore,new ts(xr(ig(t.path)),i,"TargetPurposeLimboResolution",md.le))}}async function qu(n,e,t){const i=Re(n),o=[],a=[],c=[];i.uu.isEmpty()||(i.uu.forEach((d,p)=>{c.push(i.Ru(p,e,t).then(y=>{var _;if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=dg.Rs(p.targetId,y);a.push(w)}}))}),await Promise.all(c),i.au.j_(o),await async function(p,y){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Q.forEach(y,T=>Q.forEach(T.ds,R=>_.persistence.referenceDelegate.addReference(w,T.targetId,R)).next(()=>Q.forEach(T.As,R=>_.persistence.referenceDelegate.removeReference(w,T.targetId,R)))))}catch(w){if(!Xa(w))throw w;he(fg,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const R=_.xs.get(T),j=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(j);_.xs=_.xs.insert(T,U)}}}(i.localStore,a))}async function gD(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){he(Eg,"User change. New user:",e.toKey());const i=await GT(t.localStore,e);t.currentUser=e,function(a,c){a.Eu.forEach(d=>{d.forEach(p=>{p.reject(new de(K.CANCELLED,c))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await qu(t,i.ks)}}function yD(n,e){const t=Re(n),i=t.Pu.get(e);if(i&&i._u)return be().add(i.key);{let o=be();const a=t.cu.get(e);if(!a)return o;for(const c of a){const d=t.uu.get(c);o=o.unionWith(d.view.Ya)}return o}}function mI(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dD.bind(null,e),e.au.j_=eD.bind(null,e.eventManager),e.au.Vu=tD.bind(null,e.eventManager),e}function vD(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pD.bind(null,e),e}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return TO(this.persistence,new _O,e.initialUser,this.serializer)}yu(e){return new QT(hg.fi,this.serializer)}pu(e){return new kO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class _D extends Zh{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){He(this.persistence.referenceDelegate instanceof Xh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new iO(i,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new QT(i=>Xh.fi(i,t),this.serializer)}}class Pm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gD.bind(null,this.syncEngine),await XO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZO}()}createDatastore(e){const t=Id(e.databaseInfo.databaseId),i=function(a){return new bO(a)}(e.databaseInfo);return function(a,c,d,p){return new FO(a,c,d,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,a,c,d){return new jO(i,o,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>qw(this.syncEngine,t,0),function(){return Fw.C()?new Fw:new xO}())}createSyncEngine(e,t){return function(o,a,c,d,p,y,_){const w=new sD(o,a,c,d,p,y);return _&&(w.Au=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Re(o);he(fo,"RemoteStore shutting down."),a.Ta.add(5),await $u(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pm.provider={build:()=>new Pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="FirestoreClient";class wD{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=aT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{he(fs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(he(fs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=_g(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Dp(n,e){n.asyncQueue.verifyOperationInProgress(),he(fs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await GT(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Ww(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ED(n);he(fs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>jw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>jw(e.remoteStore,o)),n._onlineComponents=e}async function ED(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(fs,"Using user provided OfflineComponentProvider");try{await Dp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Fa("Error using user provided cache. Falling back to memory cache: "+t),await Dp(n,new Zh)}}else he(fs,"Using default OfflineComponentProvider"),await Dp(n,new _D(void 0));return n._offlineComponents}async function yI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(fs,"Using user provided OnlineComponentProvider"),await Ww(n,n._uninitializedComponentsProvider._online)):(he(fs,"Using default OnlineComponentProvider"),await Ww(n,new Pm))),n._onlineComponents}function TD(n){return yI(n).then(e=>e.syncEngine)}async function vI(n){const e=await yI(n),t=e.eventManager;return t.onListen=oD.bind(null,e.syncEngine),t.onUnlisten=uD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=aD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cD.bind(null,e.syncEngine),t}function ID(n,e,t={}){const i=new ii;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,y){const _=new gI({next:T=>{_.Cu(),c.enqueueAndForget(()=>oI(a,w));const R=T.docs.has(d);!R&&T.fromCache?y.reject(new de(K.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&p&&p.source==="server"?y.reject(new de(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new aI(ig(d.path),_,{includeMetadataChanges:!0,La:!0});return sI(a,w)}(await vI(n),n.asyncQueue,e,t,i)),i.promise}function SD(n,e,t={}){const i=new ii;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,y){const _=new gI({next:T=>{_.Cu(),c.enqueueAndForget(()=>oI(a,w)),T.fromCache&&p.source==="server"?y.reject(new de(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new aI(d,_,{includeMetadataChanges:!0,La:!0});return sI(a,w)}(await vI(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n,e,t){if(!t)throw new de(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CD(n,e,t,i){if(e===!0&&i===!0)throw new de(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qw(n){if(!ve.isDocumentKey(n))throw new de(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Gw(n){if(ve.isDocumentKey(n))throw new de(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ad(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ad(n);throw new de(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="firestore.googleapis.com",Yw=!0;class Xw{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EI,this.ssl=Yw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Yw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nO)throw new de(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_I((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new de(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new de(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new de(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ox;switch(i.type){case"firstParty":return new Mx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Kw.get(t);i&&(he("ComponentProvider","Removing Datastore"),Kw.delete(t),i.terminate())}(this),Promise.resolve()}}function AD(n,e,t,i={}){var o;n=hr(n,Rd);const a=bu(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(u0(`https://${p}`),c0("Firestore",!0)),c.host!==EI&&c.host!==p&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:p,ssl:a,emulatorOptions:i});if(!ao(y,d)&&(n._setSettings(y),i.mockUserToken)){let _,w;if(typeof i.mockUserToken=="string")_=i.mockUserToken,w=Qt.MOCK_USER;else{_=B1(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new de(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Qt(T)}n._authCredentials=new Dx(new sT(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class sn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class as extends _o{constructor(e,t,i){super(e,t,ig(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ve(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function du(n,e,...t){if(n=Ct(n),wI("collection","path",e),n instanceof Rd){const i=et.fromString(e,...t);return Gw(i),new as(n,null,i)}{if(!(n instanceof sn||n instanceof as))throw new de(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return Gw(i),new as(n.firestore,null,i)}}function si(n,e,...t){if(n=Ct(n),arguments.length===1&&(e=aT.newId()),wI("doc","path",e),n instanceof Rd){const i=et.fromString(e,...t);return Qw(i),new sn(n,null,new ve(i))}{if(!(n instanceof sn||n instanceof as))throw new de(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return Qw(i),new sn(n.firestore,n instanceof as?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="AsyncQueue";class Zw{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new XT(this,"async_queue_retry"),this.ec=()=>{const i=Op();i&&he(Jw,"Visibility state changed to "+i.visibilityState),this.C_.p_()},this.tc=e;const t=Op();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Op();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new ii;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Xa(e))throw e;he(Jw,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(i=>{throw this.Ju=i,this.Yu=!1,ci("INTERNAL UNHANDLED ERROR: ",eE(i)),i}).then(i=>(this.Yu=!1,i))));return this.tc=t,t}enqueueAfterDelay(e,t,i){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const o=vg.createAndSchedule(this,e,t,i,a=>this.oc(a));return this.Hu.push(o),o}nc(){this.Ju&&Se(47125,{_c:eE(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function eE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class wo extends Rd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Zw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zw(e),this._firestoreClient=void 0,await e}}}function RD(n,e){const t=typeof n=="object"?n:p0(),i=typeof n=="string"?n:Wh,o=Bm(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=j1("firestore");a&&AD(o,...a)}return o}function Ig(n){if(n._terminated)throw new de(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PD(n),n._firestoreClient}function PD(n){var e,t,i;const o=n._freezeSettings(),a=function(d,p,y,_){return new Xx(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_I(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new wD(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qa(Ut.fromBase64String(e))}catch(t){throw new de(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qa(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=/^__.*__$/;class xD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new zu(e,this.data,t,this.fieldTransforms)}}class TI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function II(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{hc:n})}}class Ag{constructor(e,t,i,o,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Tc({path:i,Ec:!1});return o.dc(e),o}Ac(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Tc({path:i,Ec:!1});return o.Pc(),o}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return ed(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(II(this.hc)&&kD.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class ND{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Id(e)}gc(e,t,i,o=!1){return new Ag({hc:e,methodName:t,fc:i,path:Ft.emptyPath(),Ec:!1,mc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xd(n){const e=n._freezeSettings(),t=Id(n._databaseId);return new ND(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SI(n,e,t,i,o,a={}){const c=n.gc(a.merge||a.mergeFields?2:0,e,t,o);Pg("Data must be an object, but it was:",c,i);const d=CI(i,c);let p,y;if(a.merge)p=new An(c.fieldMask),y=c.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const T=km(e,w,t);if(!c.contains(T))throw new de(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);RI(_,T)||_.push(T)}p=new An(_),y=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=c.fieldTransforms;return new xD(new yn(d),p,y)}class Nd extends kd{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nd}}class Rg extends kd{_toFieldTransform(e){return new IN(e.path,new Au)}isEqual(e){return e instanceof Rg}}function OD(n,e,t,i){const o=n.gc(1,e,t);Pg("Data must be an object, but it was:",o,i);const a=[],c=yn.empty();gs(i,(p,y)=>{const _=kg(e,p,t);y=Ct(y);const w=o.Ac(_);if(y instanceof Nd)a.push(_);else{const T=Hu(y,w);T!=null&&(a.push(_),c.set(_,T))}});const d=new An(a);return new TI(c,d,o.fieldTransforms)}function DD(n,e,t,i,o,a){const c=n.gc(1,e,t),d=[km(e,i,t)],p=[o];if(a.length%2!=0)throw new de(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(km(e,a[T])),p.push(a[T+1]);const y=[],_=yn.empty();for(let T=d.length-1;T>=0;--T)if(!RI(y,d[T])){const R=d[T];let j=p[T];j=Ct(j);const U=c.Ac(R);if(j instanceof Nd)y.push(R);else{const P=Hu(j,U);P!=null&&(y.push(R),_.set(R,P))}}const w=new An(y);return new TI(_,w,c.fieldTransforms)}function bD(n,e,t,i=!1){return Hu(t,n.gc(i?4:3,e))}function Hu(n,e){if(AI(n=Ct(n)))return Pg("Unsupported field value:",e,n),CI(n,e);if(n instanceof kd)return function(i,o){if(!II(o.hc))throw o.Vc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Vc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(i,o){const a=[];let c=0;for(const d of i){let p=Hu(d,o.Rc(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,e)}return function(i,o){if((i=Ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wN(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=It.fromDate(i);return{timestampValue:Yh(o.serializer,a)}}if(i instanceof It){const a=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,a)}}if(i instanceof Sg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qa)return{bytesValue:jT(o.serializer,i._byteString)};if(i instanceof sn){const a=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw o.Vc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ug(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Cg)return function(c,d){return{mapValue:{fields:{[mT]:{stringValue:gT},[Kh]:{arrayValue:{values:c.toArray().map(y=>{if(typeof y!="number")throw d.Vc("VectorValues must only contain numeric values.");return sg(d.serializer,y)})}}}}}}(i,o);throw o.Vc(`Unsupported field value: ${Ad(i)}`)}(n,e)}function CI(n,e){const t={};return uT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(n,(i,o)=>{const a=Hu(o,e.Ic(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function AI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof Sg||n instanceof qa||n instanceof sn||n instanceof kd||n instanceof Cg)}function Pg(n,e,t){if(!AI(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Ad(t);throw i==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+i)}}function km(n,e,t){if((e=Ct(e))instanceof Pd)return e._internalPath;if(typeof e=="string")return kg(n,e);throw ed("Field path arguments must be of type string or ",n,!1,void 0,t)}const VD=new RegExp("[~\\*/\\[\\]]");function kg(n,e,t){if(e.search(VD)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pd(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ed(n,e,t,i,o){const a=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new de(K.INVALID_ARGUMENT,d+n+p)}function RI(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Od("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class MD extends PI{data(){return super.data()}}function Od(n,e){return typeof e=="string"?kg(n,e):e instanceof Pd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xg{}class kI extends xg{}function tE(n,e,...t){let i=[];e instanceof xg&&i.push(e),i=i.concat(t),function(a){const c=a.filter(p=>p instanceof Ng).length,d=a.filter(p=>p instanceof Dd).length;if(c>1||c>0&&d>0)throw new de(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class Dd extends kI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Dd(e,t,i)}_apply(e){const t=this._parse(e);return xI(e._query,t),new _o(e.firestore,e.converter,vm(e._query,t))}_parse(e){const t=xd(e.firestore);return function(a,c,d,p,y,_,w){let T;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){iE(w,_);const j=[];for(const U of w)j.push(rE(p,a,U));T={arrayValue:{values:j}}}else T=rE(p,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||iE(w,_),T=bD(d,c,w,_==="in"||_==="not-in");return mt.create(y,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nE(n,e,t){const i=e,o=Od("where",n);return Dd._create(o,i,t)}class Ng extends xg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ng(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:cr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let c=o;const d=a.getFlattenedFilters();for(const p of d)xI(c,p),c=vm(c,p)}(e._query,t),new _o(e.firestore,e.converter,vm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends kI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Og(e,t)}_apply(e){const t=function(o,a,c){if(o.startAt!==null)throw new de(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cu(a,c)}(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,function(o,a){const c=o.explicitOrderBy.concat([a]);return new Ja(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function FD(n,e="asc"){const t=e,i=Od("orderBy",n);return Og._create(i,t)}function rE(n,e,t){if(typeof(t=Ct(t))=="string"){if(t==="")throw new de(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ST(e)&&t.indexOf("/")!==-1)throw new de(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!ve.isDocumentKey(i))throw new de(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gw(n,new ve(i))}if(t instanceof sn)return gw(n,t._key);throw new de(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ad(t)}.`)}function iE(n,e){if(!Array.isArray(n)||n.length===0)throw new de(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xI(n,e){const t=function(o,a){for(const c of o)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class UD{convertValue(e,t="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return gs(e,(o,a)=>{i[o]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Kh].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>ht(c.doubleValue));return new Cg(a)}convertGeoPoint(e){return new Sg(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=yd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const t=us(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);He(WT(i),9688,{name:e});const o=new Iu(i.get(1),i.get(3)),a=new ve(i.popFirst(5));return o.isEqual(t)||ci(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OI extends PI{constructor(e,t,i,o,a,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Od("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ph extends OI{data(e={}){return super.data(e)}}class jD{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ru(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ph(this._firestore,this._userDataWriter,i.key,i,new ru(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const p=new Ph(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ru(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const p=new Ph(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ru(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:zD(d.type),doc:p,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(n){n=hr(n,sn);const e=hr(n.firestore,wo);return ID(Ig(e),n._key).then(t=>$D(e,n,t))}class DI extends UD{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function xm(n){n=hr(n,_o);const e=hr(n.firestore,wo),t=Ig(e),i=new DI(e);return LD(n._query),SD(t,n._query).then(o=>new jD(e,i,n,o))}function BD(n,e,t){n=hr(n,sn);const i=hr(n.firestore,wo),o=NI(n.converter,e);return bd(i,[SI(xd(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,zn.none())])}function bI(n,e,t,...i){n=hr(n,sn);const o=hr(n.firestore,wo),a=xd(o);let c;return c=typeof(e=Ct(e))=="string"||e instanceof Pd?DD(a,"updateDoc",n._key,e,t,i):OD(a,"updateDoc",n._key,e),bd(o,[c.toMutation(n._key,zn.exists(!0))])}function bg(n){return bd(hr(n.firestore,wo),[new og(n._key,zn.none())])}function VI(n,e){const t=hr(n.firestore,wo),i=si(n),o=NI(n.converter,e);return bd(t,[SI(xd(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,zn.exists(!1))]).then(()=>i)}function bd(n,e){return function(i,o){const a=new ii;return i.asyncQueue.enqueueAndForget(async()=>hD(await TD(i),o,a)),a.promise}(Ig(n),e)}function $D(n,e,t){const i=t.docs.get(e._key),o=new DI(n);return new OI(n,o,e._key,i,new ru(t.hasPendingWrites,t.fromCache),e.converter)}function qD(){return new Rg("serverTimestamp")}(function(e,t=!0){(function(o){Ga=o})(Ka),La(new lo("firestore",(i,{instanceIdentifier:o,options:a})=>{const c=i.getProvider("app").getImmediate(),d=new wo(new bx(i.getProvider("auth-internal")),new Lx(c,i.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new de(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(y.options.projectId,_)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),ss(iw,sw,e),ss(iw,sw,"esm2017")})();const HD={apiKey:"AIzaSyB47CvmzxfDBskNWRCO-NPuh01xHhJvSY4",authDomain:"react-e-commerce-app-49b40.firebaseapp.com",projectId:"react-e-commerce-app-49b40",storageBucket:"react-e-commerce-app-49b40.firebasestorage.app",messagingSenderId:"900487185646",appId:"1:900487185646:web:179f05cee1ceb7224b1fff",measurementId:"G-KE5476Z2M0"},MI=f0(HD);X0(MI);const Cn=RD(MI),LI=Y.createContext(null),el=()=>{const n=Y.useContext(LI);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},WD=({children:n})=>{const[e,t]=Y.useState(null),[i,o]=Y.useState(!0),a=X0();Y.useEffect(()=>gk(a,T=>{t(T?{uid:T.uid,email:T.email}:null),o(!1)}),[]);const _={currentUser:e,loading:i,register:async(w,T)=>{try{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w))throw new Error("Invalid email format");if(T.length<6)throw new Error("Password must be at least 6 characters long");const j=w.trim();console.log("Attempting to create user with email:",j);const P=(await dk(a,j,T)).user;console.log("User created successfully:",P.uid),await BD(si(Cn,"users",P.uid),{email:P.email,createdAt:new Date().toISOString()}),console.log("User document created in Firestore")}catch(R){if(console.error("Registration error:",R),R instanceof lr)switch(R.code){case"auth/email-already-in-use":throw new Error("Email is already registered");case"auth/invalid-email":throw new Error("Invalid email format");case"auth/weak-password":throw new Error("Password is too weak");case"auth/operation-not-allowed":throw new Error("Email/password accounts are not enabled. Please contact support.");case"auth/network-request-failed":throw new Error("Network error. Please check your internet connection.");default:throw console.error("Firebase error code:",R.code),new Error("Failed to create account. Please try again.")}throw R}},login:async(w,T)=>{try{await fk(a,w,T)}catch(R){if(R instanceof lr)switch(R.code){case"auth/user-not-found":throw new Error("No account found with this email");case"auth/wrong-password":throw new Error("Incorrect password");case"auth/invalid-email":throw new Error("Invalid email format");case"auth/network-request-failed":throw new Error("Network error. Please check your internet connection.");default:throw new Error("Failed to login")}throw R}},logout:async()=>{try{await yk(a)}catch{throw new Error("Failed to logout")}},deleteAccount:async()=>{try{const w=a.currentUser;if(!w)throw new Error("No user is currently signed in");await vk(w),t(null)}catch(w){throw console.error("Error deleting account:",w),w}}};return b.jsx(LI.Provider,{value:_,children:!i&&n})},FI=Y.createContext(null),UI=()=>{const n=Y.useContext(FI);if(!n)throw new Error("useCart must be used within a CartProvider");return n},KD=({children:n})=>{const[e,t]=Y.useState([]),i=_=>{t(w=>w.find(R=>R.product.id===_.id)?w.map(R=>R.product.id===_.id?{...R,quantity:R.quantity+1}:R):[...w,{product:_,quantity:1}])},o=_=>{t(w=>w.filter(T=>T.product.id!==_))},a=(_,w)=>{if(w<1){o(_);return}t(T=>T.map(R=>R.product.id===_?{...R,quantity:w}:R))},c=()=>{t([])},d=e.reduce((_,w)=>_+w.quantity,0),p=e.reduce((_,w)=>_+w.product.price*w.quantity,0),y={items:e,addToCart:i,removeFromCart:o,updateQuantity:a,clearCart:c,totalItems:d,totalPrice:p};return b.jsx(FI.Provider,{value:y,children:n})};function QD(){const{currentUser:n,logout:e}=el();return b.jsx("nav",{className:"navbar",children:b.jsxs("div",{className:"navbar-container container",children:[b.jsx(Ir,{to:"/",className:"navbar-brand",children:"E-Commerce Store"}),b.jsxs("div",{className:"navbar-links",children:[b.jsx(Ir,{to:"/products",children:"Products"}),n?b.jsxs(b.Fragment,{children:[b.jsx(Ir,{to:"/cart",children:"Cart"}),b.jsx(Ir,{to:"/orders",children:"Orders"}),b.jsx(Ir,{to:"/profile",children:"Profile"}),b.jsx("button",{onClick:e,className:"logout-btn",children:"Logout"})]}):b.jsxs(b.Fragment,{children:[b.jsx(Ir,{to:"/login",children:"Login"}),b.jsx(Ir,{to:"/register",children:"Register"})]})]})]})})}const iu={async getAllProducts(){try{const n=du(Cn,"products");return(await xm(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error fetching products:",n),n}},async getProduct(n){try{const e=si(Cn,"products",n),t=await Dg(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error(`Error fetching product ${n}:`,e),e}},async createProduct(n){try{return(await VI(du(Cn,"products"),n)).id}catch(e){throw console.error("Error creating product:",e),e}},async updateProduct(n,e){try{const t=si(Cn,"products",n);await bI(t,e)}catch(t){throw console.error(`Error updating product ${n}:`,t),t}},async deleteProduct(n){try{await bg(si(Cn,"products",n))}catch(e){throw console.error(`Error deleting product ${n}:`,e),e}}};function GD(){const{data:n,isLoading:e}=rd({queryKey:["products"],queryFn:iu.getAllProducts});return e?b.jsx("div",{className:"loading",children:"Loading products..."}):b.jsxs("div",{className:"home-container",children:[b.jsx("h1",{children:"Welcome to Our Store"}),b.jsxs("div",{className:"featured-products",children:[b.jsx("h2",{children:"Featured Products"}),b.jsx("div",{className:"products-grid",children:n==null?void 0:n.slice(0,4).map(t=>b.jsxs("div",{className:"product-card",children:[b.jsx("h3",{children:t.name}),b.jsx("p",{className:"product-description",children:t.description}),b.jsxs("p",{className:"product-price",children:["$",t.price]}),b.jsx(Ir,{to:"/products",className:"view-products-btn",children:"Shop and View All Products"})]},t.id))})]})]})}const Vg={async createOrder(n){try{const e={...n,createdAt:qD()},t=await VI(du(Cn,"orders"),e);return console.log("Order created successfully with ID:",t.id),t.id}catch(e){throw console.error("Error creating order:",e),e}},async getUserOrders(n){try{const e=tE(du(Cn,"orders"),nE("userId","==",n),FD("createdAt","desc")),i=(await xm(e)).docs.map(o=>{var c;const a=o.data();return{id:o.id,userId:a.userId,items:a.items,totalPrice:a.totalPrice,createdAt:((c=a.createdAt)==null?void 0:c.toMillis())||Date.now()}});return console.log(`Retrieved ${i.length} orders for user ${n}`),i}catch(e){throw console.error("Error fetching user orders:",e),e}},async getOrder(n){var e;try{const t=si(Cn,"orders",n),i=await Dg(t);if(!i.exists())return console.log(`Order ${n} not found`),null;const o=i.data(),a={id:i.id,userId:o.userId,items:o.items,totalPrice:o.totalPrice,createdAt:((e=o.createdAt)==null?void 0:e.toMillis())||Date.now()};return console.log(`Retrieved order ${n}`),a}catch(t){throw console.error(`Error fetching order ${n}:`,t),t}},async deleteUserOrders(n){try{const e=tE(du(Cn,"orders"),nE("userId","==",n)),i=(await xm(e)).docs.map(o=>bg(o.ref));await Promise.all(i),console.log(`Deleted all orders for user ${n}`)}catch(e){throw console.error("Error deleting user orders:",e),e}}};function YD(){const{items:n,updateQuantity:e,removeFromCart:t,totalPrice:i,clearCart:o}=UI(),{currentUser:a}=el(),c=cd(),d=async()=>{if(!a){c("/login");return}try{const p={userId:a.uid,items:n.map(_=>({productId:_.product.id,name:_.product.name,price:_.product.price,quantity:_.quantity})),totalPrice:i,createdAt:Date.now()};if(await Vg.createOrder(p))o(),c("/orders");else throw new Error("Failed to create order")}catch(p){console.error("Failed to create order:",p),alert("Failed to create order. Please try again.")}};return n.length===0?b.jsxs("div",{className:"cart-container",children:[b.jsx("h2",{children:"Your Cart"}),b.jsxs("div",{className:"cart-empty",children:[b.jsx("p",{children:"Your cart is empty"}),b.jsx("button",{onClick:()=>c("/products"),children:"Continue Shopping"})]})]}):b.jsxs("div",{className:"cart-container",children:[b.jsx("h2",{children:"Your Cart"}),b.jsx("div",{className:"cart-items",children:n.map(p=>b.jsx("div",{className:"cart-item",children:b.jsxs("div",{className:"cart-item-details",children:[b.jsx("h3",{className:"cart-item-title",children:p.product.name}),b.jsxs("p",{className:"cart-item-price",children:["$",p.product.price]}),b.jsxs("div",{className:"quantity-controls",children:[b.jsx("button",{className:"quantity-btn",onClick:()=>e(p.product.id,p.quantity-1),children:"-"}),b.jsx("span",{className:"quantity-value",children:p.quantity}),b.jsx("button",{className:"quantity-btn",onClick:()=>e(p.product.id,p.quantity+1),children:"+"}),b.jsx("button",{className:"remove-btn",onClick:()=>t(p.product.id),children:"Remove"})]})]})},p.product.id))}),b.jsxs("div",{className:"cart-summary",children:[b.jsxs("div",{className:"summary-row",children:[b.jsx("span",{className:"summary-label",children:"Total:"}),b.jsxs("span",{className:"summary-value",children:["$",i.toFixed(2)]})]}),b.jsx("button",{className:"checkout-btn",onClick:d,children:"Place Order"})]})]})}function XD(){const[n,e]=Y.useState(""),[t,i]=Y.useState(""),[o,a]=Y.useState(""),[c,d]=Y.useState(!1),p=cd(),{login:y}=el(),_=async w=>{w.preventDefault();try{a(""),d(!0),await y(n,t),p("/")}catch{a("Failed to sign in")}finally{d(!1)}};return b.jsx("div",{className:"auth-container",children:b.jsxs("div",{className:"auth-card",children:[b.jsx("h2",{children:"Login"}),o&&b.jsx("div",{className:"error-message",children:o}),b.jsxs("form",{onSubmit:_,children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"email",children:"Email"}),b.jsx("input",{type:"email",id:"email",value:n,onChange:w=>e(w.target.value),required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"password",children:"Password"}),b.jsx("input",{type:"password",id:"password",value:t,onChange:w=>i(w.target.value),required:!0})]}),b.jsx("button",{type:"submit",disabled:c,children:c?"Logging in...":"Login"})]}),b.jsx("div",{className:"auth-links",children:b.jsxs("p",{children:["Don't have an account? ",b.jsx(Ir,{to:"/register",children:"Register"})]})})]})})}function JD(){const[n,e]=Y.useState(""),[t,i]=Y.useState(""),[o,a]=Y.useState(""),[c,d]=Y.useState(""),[p,y]=Y.useState(!1),_=cd(),{register:w}=el(),T=async R=>{if(R.preventDefault(),t!==o)return d("Passwords do not match");if(t.length<6)return d("Password must be at least 6 characters long");try{d(""),y(!0),await w(n,t),_("/")}catch(j){j instanceof Error?d(j.message):d("Failed to create an account")}finally{y(!1)}};return b.jsx("div",{className:"auth-container",children:b.jsxs("div",{className:"auth-card",children:[b.jsx("h2",{children:"Register"}),c&&b.jsx("div",{className:"error-message",children:c}),b.jsxs("form",{onSubmit:T,children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"email",children:"Email"}),b.jsx("input",{type:"email",id:"email",value:n,onChange:R=>e(R.target.value),required:!0,placeholder:"Enter your email"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"password",children:"Password"}),b.jsx("input",{type:"password",id:"password",value:t,onChange:R=>i(R.target.value),required:!0,placeholder:"Enter your password (min. 6 characters)",minLength:6})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"confirm-password",children:"Confirm Password"}),b.jsx("input",{type:"password",id:"confirm-password",value:o,onChange:R=>a(R.target.value),required:!0,placeholder:"Confirm your password",minLength:6})]}),b.jsx("button",{type:"submit",disabled:p,children:p?"Creating Account...":"Register"})]}),b.jsx("div",{className:"auth-links",children:b.jsxs("p",{children:["Already have an account? ",b.jsx(Ir,{to:"/login",children:"Login"})]})})]})})}function ZD(){const[n,e]=Y.useState(!1),[t,i]=Y.useState(null),o=nd(),{data:a,isLoading:c,error:d}=rd({queryKey:["products"],queryFn:iu.getAllProducts}),{addToCart:p}=UI(),[y,_]=Y.useState(null),w=su({mutationFn:iu.createProduct,onSuccess:()=>{o.invalidateQueries({queryKey:["products"]}),e(!1)}}),T=su({mutationFn:({id:P,product:W})=>iu.updateProduct(P,W),onSuccess:()=>{o.invalidateQueries({queryKey:["products"]}),i(null)}}),R=su({mutationFn:iu.deleteProduct,onSuccess:()=>{o.invalidateQueries({queryKey:["products"]})}}),j=async P=>{P.preventDefault();const W=new FormData(P.currentTarget),J={name:W.get("name"),description:W.get("description"),price:Number(W.get("price")),stock:Number(W.get("stock")),imageUrl:W.get("imageUrl")||"https://via.placeholder.com/150",category:W.get("category")||"uncategorized"};t?T.mutate({id:t.id,product:J}):w.mutate(J)},U=P=>{p(P),_(P.id),setTimeout(()=>_(null),2e3)};return c?b.jsx("div",{children:"Loading..."}):d?b.jsx("div",{children:"Error loading products"}):b.jsxs("div",{className:"products-container",children:[b.jsxs("div",{className:"products-header",children:[b.jsx("h2",{children:"Products"}),b.jsx("button",{onClick:()=>e(!0),children:"Add Product"})]}),(n||t)&&b.jsxs("div",{className:"product-form-container",children:[b.jsx("h3",{children:t?"Edit Product":"Add New Product"}),b.jsxs("form",{onSubmit:j,children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"name",children:"Name"}),b.jsx("input",{type:"text",id:"name",name:"name",defaultValue:t==null?void 0:t.name,required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"description",children:"Description"}),b.jsx("textarea",{id:"description",name:"description",defaultValue:t==null?void 0:t.description,required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"price",children:"Price"}),b.jsx("input",{type:"number",id:"price",name:"price",defaultValue:t==null?void 0:t.price,required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"stock",children:"Stock"}),b.jsx("input",{type:"number",id:"stock",name:"stock",defaultValue:t==null?void 0:t.stock,required:!0})]}),b.jsxs("div",{className:"form-actions",children:[b.jsx("button",{type:"submit",children:t?"Update Product":"Add Product"}),b.jsx("button",{type:"button",onClick:()=>{e(!1),i(null)},children:"Cancel"})]})]})]}),b.jsx("div",{className:"products-grid",children:a==null?void 0:a.map(P=>b.jsxs("div",{className:"product-card",children:[b.jsx("h3",{children:P.name}),b.jsx("p",{children:P.description}),b.jsxs("p",{className:"price",children:["$",P.price]}),b.jsxs("p",{className:"stock",children:["Stock: ",P.stock]}),b.jsxs("div",{className:"product-actions",children:[b.jsx("button",{onClick:()=>i(P),children:"Edit"}),b.jsx("button",{onClick:()=>R.mutate(P.id),className:"delete",children:"Delete"})]}),b.jsx("button",{className:`add-to-cart-btn ${y===P.id?"added":""}`,onClick:()=>U(P),children:y===P.id?"Added to Cart!":"Add to Cart"})]},P.id))})]})}const eb=()=>{const{currentUser:n}=el(),{data:e,isLoading:t,error:i}=rd({queryKey:["orders",n==null?void 0:n.uid],queryFn:()=>Vg.getUserOrders(n.uid),enabled:!!n});if(t)return b.jsxs("div",{className:"container mx-auto px-4 py-8",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Your Orders"}),b.jsx("div",{className:"text-center",children:"Loading your orders..."})]});if(i){const a=(i instanceof Error?i.message:"Unknown error").includes("requires an index");return b.jsxs("div",{className:"container mx-auto px-4 py-8",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Your Orders"}),b.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:b.jsxs("div",{className:"flex",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),b.jsx("div",{className:"ml-3",children:b.jsx("p",{className:"text-sm text-yellow-700",children:a?b.jsxs(b.Fragment,{children:["We're currently setting up your order history. This may take a few minutes.",b.jsx("br",{}),"Please try again in a moment."]}):"There was an error loading your orders. Please try again later."})})]})})]})}return!e||e.length===0?b.jsxs("div",{className:"container mx-auto px-4 py-8",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Your Orders"}),b.jsx("div",{className:"text-center text-gray-500",children:"You haven't placed any orders yet."})]}):b.jsxs("div",{className:"container mx-auto px-4 py-8",children:[b.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Your Orders"}),b.jsx("div",{className:"space-y-6",children:e.map(o=>b.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[b.jsxs("div",{className:"flex justify-between items-start mb-4",children:[b.jsxs("div",{children:[b.jsxs("h2",{className:"text-lg font-semibold",children:["Order #",o.id]}),b.jsx("p",{className:"text-gray-500",children:new Date(o.createdAt).toLocaleDateString()})]}),b.jsx("div",{className:"text-right",children:b.jsxs("p",{className:"text-lg font-semibold",children:["$",o.totalPrice.toFixed(2)]})})]}),b.jsxs("div",{className:"border-t pt-4",children:[b.jsx("h3",{className:"font-medium mb-2",children:"Items:"}),b.jsx("ul",{className:"space-y-2",children:o.items.map((a,c)=>b.jsxs("li",{className:"flex justify-between",children:[b.jsxs("span",{children:[a.name," x ",a.quantity]}),b.jsxs("span",{children:["$",(a.price*a.quantity).toFixed(2)]})]},c))})]})]},o.id))})]})},bp={async getUserProfile(n){const e=await Dg(si(Cn,"users",n));return e.exists()?{uid:n,...e.data()}:null},async updateUserProfile(n,e){const t=si(Cn,"users",n);await bI(t,e)},async deleteUserProfile(n){try{await Vg.deleteUserOrders(n),await bg(si(Cn,"users",n))}catch(e){throw console.error("Error deleting user profile:",e),e}}};function tb(){const{currentUser:n,logout:e,deleteAccount:t}=el(),[i,o]=Y.useState(!1),a=nd(),{data:c,isLoading:d}=rd({queryKey:["profile",n==null?void 0:n.uid],queryFn:()=>bp.getUserProfile(n.uid),enabled:!!n}),p=su({mutationFn:w=>bp.updateUserProfile(n.uid,w),onSuccess:()=>{a.invalidateQueries({queryKey:["profile",n==null?void 0:n.uid]}),o(!1)}}),y=su({mutationFn:async()=>{await bp.deleteUserProfile(n.uid),await t()},onSuccess:()=>{e()}}),_=async w=>{w.preventDefault();const T=new FormData(w.currentTarget),R={name:T.get("name"),address:T.get("address")};p.mutate(R)};return d?b.jsx("div",{children:"Loading profile..."}):b.jsxs("div",{className:"profile-container",children:[b.jsx("h2",{children:"Profile"}),i?b.jsxs("form",{onSubmit:_,className:"profile-form",children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"email",children:"Email"}),b.jsx("input",{type:"email",id:"email",value:(n==null?void 0:n.email)||"",disabled:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"name",children:"Name"}),b.jsx("input",{type:"text",id:"name",name:"name",defaultValue:c==null?void 0:c.name})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"address",children:"Address"}),b.jsx("textarea",{id:"address",name:"address",defaultValue:c==null?void 0:c.address})]}),b.jsxs("div",{className:"form-actions",children:[b.jsx("button",{type:"submit",children:"Save Changes"}),b.jsx("button",{type:"button",onClick:()=>o(!1),children:"Cancel"})]})]}):b.jsxs("div",{className:"profile-info",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Email:"})," ",n==null?void 0:n.email]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Name:"})," ",(c==null?void 0:c.name)||"Not set"]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Address:"})," ",(c==null?void 0:c.address)||"Not set"]}),b.jsxs("div",{className:"profile-actions",children:[b.jsx("button",{onClick:()=>o(!0),children:"Edit Profile"}),b.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&y.mutate()},className:"delete",children:"Delete Account"})]})]})]})}const nb=new PE;function rb(){return b.jsx(NE,{client:nb,children:b.jsx(WD,{children:b.jsx(KD,{children:b.jsx(P1,{children:b.jsxs("div",{className:"app",children:[b.jsx(QD,{}),b.jsx("main",{className:"main-content",children:b.jsxs(E1,{children:[b.jsx(Ui,{path:"/",element:b.jsx(GD,{})}),b.jsx(Ui,{path:"/products",element:b.jsx(ZD,{})}),b.jsx(Ui,{path:"/cart",element:b.jsx(YD,{})}),b.jsx(Ui,{path:"/login",element:b.jsx(XD,{})}),b.jsx(Ui,{path:"/register",element:b.jsx(JD,{})}),b.jsx(Ui,{path:"/profile",element:b.jsx(tb,{})}),b.jsx(Ui,{path:"/orders",element:b.jsx(eb,{})})]})})]})})})})})}const ib=new PE;ZS.createRoot(document.getElementById("root")).render(b.jsx(gE.StrictMode,{children:b.jsx(pC,{store:xA,children:b.jsx(NE,{client:ib,children:b.jsx(rb,{})})})}));
